<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Beej's Guide to Git</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!-- BG custom styling -->
  <style type="text/css">
  /* Fix for line numbers not visible */
  pre.numberSource code > span {
      left: -1em;
  }
  pre.numberSource {
      margin-left: initial;
  }

  /* Put some space after the section numbers */
  span.toc-section-number::after {
      content: "\a0\a0\a0";  /* non-breaking whitespace */
  }

  /* Hide underlines on code number links */
  pre > code.sourceCode > span > a:first-child::before {
      text-decoration: none;
  }

  /* Color the source blocks */
  div.sourceCode {
      background-color: #f0f0f0;
  }

  /* Fix iOS big text rendering issue */
  pre > code.sourceCode > span {
      display: initial;
  }


  /* Color the inline code */
  code:not(.sourceCode) {
      background: #f0f0f0;
      padding-left: 0.2em;
      padding-right: 0.2em;
      border-radius: 0.2em;
  }

  pre.sourceCode {
      border: 1px solid #ccc;
      padding: 0.5em;
      border-radius: 0.2em;
  }

  /* Keep code tags from wrapping in tables */
  tbody code {
      white-space: nowrap;
  }

  /* Prevent hyphenation and hyphen breaks in code*/
  code {
      word-break: keep-all;
  }

  td {
      vertical-align: top;
  }

  body {
      font-size: 12pt;
      max-width: 43em;
      font-family: sans-serif;
  }

  html {
      background: #f9f9f9;
  }

  figure > embed {
      max-width: 100%;
  }

  figure {
      text-align: center;
      margin-top: 2em;
      margin-bottom: 2em;
  }

  figcaption {
      font-size: 0.9em;
      font-style: italic;
      margin-top: 0.6em;
  }

  body {
      counter-reset: figure-counter-major;
      counter-reset: figure-counter-minor;
  }

  figure {
      counter-increment: figure-counter-minor;
  }

  figcaption::before {
      content: "Figure " counter(figure-counter-major) "." counter(figure-counter-minor) ": ";
  }

  blockquote {
      border-left: 2px solid #bbb;
      color: #444;
  }

  /* Contents */

  nav[role="doc-toc"] > ul > li {
    font-weight: bold;
    margin-top: 1.2em;
  }

  nav[role="doc-toc"] > ul > li:first {
    font-weight: bold;
    margin-top: initial;
  }

  nav[role="doc-toc"] > ul > li > ul {
    font-weight: normal;
    margin-top: 0.3em;
  }

  /*
  In multipage, we need to reset the figure counter to the chapter
  number. Luckily, this is in the <h1 data-number> attribute. Unluckily,
  there is no way to get this in a general way.

  This doesn't work:

    h1[data-number] {
      counter-set: figure-counter-major attr(data-number);
    }

  Nor this:

    h1[data-number] {
      --figure-counter-major-value: attr(data-number);
      counter-set: figure-counter-major var(--figure-counter-major-value);
    }

  So, dumbly, we have a bunch of rules for all these sections, up to the
  maximum possible section.

  Here's a program to generate them:

    for (let i = 1; i < 100; i++)
        console.log(`h1[data-number="${i}"]{counter-set:figure-counter-major ${i};counter-reset:figure-counter-minor;}`);

  Note to self: never write a book with more than 99 frickin' chapters.
  */

  h1[data-number="1"]{counter-set:figure-counter-major 1;counter-reset:figure-counter-minor;}
  h1[data-number="2"]{counter-set:figure-counter-major 2;counter-reset:figure-counter-minor;}
  h1[data-number="3"]{counter-set:figure-counter-major 3;counter-reset:figure-counter-minor;}
  h1[data-number="4"]{counter-set:figure-counter-major 4;counter-reset:figure-counter-minor;}
  h1[data-number="5"]{counter-set:figure-counter-major 5;counter-reset:figure-counter-minor;}
  h1[data-number="6"]{counter-set:figure-counter-major 6;counter-reset:figure-counter-minor;}
  h1[data-number="7"]{counter-set:figure-counter-major 7;counter-reset:figure-counter-minor;}
  h1[data-number="8"]{counter-set:figure-counter-major 8;counter-reset:figure-counter-minor;}
  h1[data-number="9"]{counter-set:figure-counter-major 9;counter-reset:figure-counter-minor;}
  h1[data-number="10"]{counter-set:figure-counter-major 10;counter-reset:figure-counter-minor;}
  h1[data-number="11"]{counter-set:figure-counter-major 11;counter-reset:figure-counter-minor;}
  h1[data-number="12"]{counter-set:figure-counter-major 12;counter-reset:figure-counter-minor;}
  h1[data-number="13"]{counter-set:figure-counter-major 13;counter-reset:figure-counter-minor;}
  h1[data-number="14"]{counter-set:figure-counter-major 14;counter-reset:figure-counter-minor;}
  h1[data-number="15"]{counter-set:figure-counter-major 15;counter-reset:figure-counter-minor;}
  h1[data-number="16"]{counter-set:figure-counter-major 16;counter-reset:figure-counter-minor;}
  h1[data-number="17"]{counter-set:figure-counter-major 17;counter-reset:figure-counter-minor;}
  h1[data-number="18"]{counter-set:figure-counter-major 18;counter-reset:figure-counter-minor;}
  h1[data-number="19"]{counter-set:figure-counter-major 19;counter-reset:figure-counter-minor;}
  h1[data-number="20"]{counter-set:figure-counter-major 20;counter-reset:figure-counter-minor;}
  h1[data-number="21"]{counter-set:figure-counter-major 21;counter-reset:figure-counter-minor;}
  h1[data-number="22"]{counter-set:figure-counter-major 22;counter-reset:figure-counter-minor;}
  h1[data-number="23"]{counter-set:figure-counter-major 23;counter-reset:figure-counter-minor;}
  h1[data-number="24"]{counter-set:figure-counter-major 24;counter-reset:figure-counter-minor;}
  h1[data-number="25"]{counter-set:figure-counter-major 25;counter-reset:figure-counter-minor;}
  h1[data-number="26"]{counter-set:figure-counter-major 26;counter-reset:figure-counter-minor;}
  h1[data-number="27"]{counter-set:figure-counter-major 27;counter-reset:figure-counter-minor;}
  h1[data-number="28"]{counter-set:figure-counter-major 28;counter-reset:figure-counter-minor;}
  h1[data-number="29"]{counter-set:figure-counter-major 29;counter-reset:figure-counter-minor;}
  h1[data-number="30"]{counter-set:figure-counter-major 30;counter-reset:figure-counter-minor;}
  h1[data-number="31"]{counter-set:figure-counter-major 31;counter-reset:figure-counter-minor;}
  h1[data-number="32"]{counter-set:figure-counter-major 32;counter-reset:figure-counter-minor;}
  h1[data-number="33"]{counter-set:figure-counter-major 33;counter-reset:figure-counter-minor;}
  h1[data-number="34"]{counter-set:figure-counter-major 34;counter-reset:figure-counter-minor;}
  h1[data-number="35"]{counter-set:figure-counter-major 35;counter-reset:figure-counter-minor;}
  h1[data-number="36"]{counter-set:figure-counter-major 36;counter-reset:figure-counter-minor;}
  h1[data-number="37"]{counter-set:figure-counter-major 37;counter-reset:figure-counter-minor;}
  h1[data-number="38"]{counter-set:figure-counter-major 38;counter-reset:figure-counter-minor;}
  h1[data-number="39"]{counter-set:figure-counter-major 39;counter-reset:figure-counter-minor;}
  h1[data-number="40"]{counter-set:figure-counter-major 40;counter-reset:figure-counter-minor;}
  h1[data-number="41"]{counter-set:figure-counter-major 41;counter-reset:figure-counter-minor;}
  h1[data-number="42"]{counter-set:figure-counter-major 42;counter-reset:figure-counter-minor;}
  h1[data-number="43"]{counter-set:figure-counter-major 43;counter-reset:figure-counter-minor;}
  h1[data-number="44"]{counter-set:figure-counter-major 44;counter-reset:figure-counter-minor;}
  h1[data-number="45"]{counter-set:figure-counter-major 45;counter-reset:figure-counter-minor;}
  h1[data-number="46"]{counter-set:figure-counter-major 46;counter-reset:figure-counter-minor;}
  h1[data-number="47"]{counter-set:figure-counter-major 47;counter-reset:figure-counter-minor;}
  h1[data-number="48"]{counter-set:figure-counter-major 48;counter-reset:figure-counter-minor;}
  h1[data-number="49"]{counter-set:figure-counter-major 49;counter-reset:figure-counter-minor;}
  h1[data-number="50"]{counter-set:figure-counter-major 50;counter-reset:figure-counter-minor;}
  h1[data-number="51"]{counter-set:figure-counter-major 51;counter-reset:figure-counter-minor;}
  h1[data-number="52"]{counter-set:figure-counter-major 52;counter-reset:figure-counter-minor;}
  h1[data-number="53"]{counter-set:figure-counter-major 53;counter-reset:figure-counter-minor;}
  h1[data-number="54"]{counter-set:figure-counter-major 54;counter-reset:figure-counter-minor;}
  h1[data-number="55"]{counter-set:figure-counter-major 55;counter-reset:figure-counter-minor;}
  h1[data-number="56"]{counter-set:figure-counter-major 56;counter-reset:figure-counter-minor;}
  h1[data-number="57"]{counter-set:figure-counter-major 57;counter-reset:figure-counter-minor;}
  h1[data-number="58"]{counter-set:figure-counter-major 58;counter-reset:figure-counter-minor;}
  h1[data-number="59"]{counter-set:figure-counter-major 59;counter-reset:figure-counter-minor;}
  h1[data-number="60"]{counter-set:figure-counter-major 60;counter-reset:figure-counter-minor;}
  h1[data-number="61"]{counter-set:figure-counter-major 61;counter-reset:figure-counter-minor;}
  h1[data-number="62"]{counter-set:figure-counter-major 62;counter-reset:figure-counter-minor;}
  h1[data-number="63"]{counter-set:figure-counter-major 63;counter-reset:figure-counter-minor;}
  h1[data-number="64"]{counter-set:figure-counter-major 64;counter-reset:figure-counter-minor;}
  h1[data-number="65"]{counter-set:figure-counter-major 65;counter-reset:figure-counter-minor;}
  h1[data-number="66"]{counter-set:figure-counter-major 66;counter-reset:figure-counter-minor;}
  h1[data-number="67"]{counter-set:figure-counter-major 67;counter-reset:figure-counter-minor;}
  h1[data-number="68"]{counter-set:figure-counter-major 68;counter-reset:figure-counter-minor;}
  h1[data-number="69"]{counter-set:figure-counter-major 69;counter-reset:figure-counter-minor;}
  h1[data-number="70"]{counter-set:figure-counter-major 70;counter-reset:figure-counter-minor;}
  h1[data-number="71"]{counter-set:figure-counter-major 71;counter-reset:figure-counter-minor;}
  h1[data-number="72"]{counter-set:figure-counter-major 72;counter-reset:figure-counter-minor;}
  h1[data-number="73"]{counter-set:figure-counter-major 73;counter-reset:figure-counter-minor;}
  h1[data-number="74"]{counter-set:figure-counter-major 74;counter-reset:figure-counter-minor;}
  h1[data-number="75"]{counter-set:figure-counter-major 75;counter-reset:figure-counter-minor;}
  h1[data-number="76"]{counter-set:figure-counter-major 76;counter-reset:figure-counter-minor;}
  h1[data-number="77"]{counter-set:figure-counter-major 77;counter-reset:figure-counter-minor;}
  h1[data-number="78"]{counter-set:figure-counter-major 78;counter-reset:figure-counter-minor;}
  h1[data-number="79"]{counter-set:figure-counter-major 79;counter-reset:figure-counter-minor;}
  h1[data-number="80"]{counter-set:figure-counter-major 80;counter-reset:figure-counter-minor;}
  h1[data-number="81"]{counter-set:figure-counter-major 81;counter-reset:figure-counter-minor;}
  h1[data-number="82"]{counter-set:figure-counter-major 82;counter-reset:figure-counter-minor;}
  h1[data-number="83"]{counter-set:figure-counter-major 83;counter-reset:figure-counter-minor;}
  h1[data-number="84"]{counter-set:figure-counter-major 84;counter-reset:figure-counter-minor;}
  h1[data-number="85"]{counter-set:figure-counter-major 85;counter-reset:figure-counter-minor;}
  h1[data-number="86"]{counter-set:figure-counter-major 86;counter-reset:figure-counter-minor;}
  h1[data-number="87"]{counter-set:figure-counter-major 87;counter-reset:figure-counter-minor;}
  h1[data-number="88"]{counter-set:figure-counter-major 88;counter-reset:figure-counter-minor;}
  h1[data-number="89"]{counter-set:figure-counter-major 89;counter-reset:figure-counter-minor;}
  h1[data-number="90"]{counter-set:figure-counter-major 90;counter-reset:figure-counter-minor;}
  h1[data-number="91"]{counter-set:figure-counter-major 91;counter-reset:figure-counter-minor;}
  h1[data-number="92"]{counter-set:figure-counter-major 92;counter-reset:figure-counter-minor;}
  h1[data-number="93"]{counter-set:figure-counter-major 93;counter-reset:figure-counter-minor;}
  h1[data-number="94"]{counter-set:figure-counter-major 94;counter-reset:figure-counter-minor;}
  h1[data-number="95"]{counter-set:figure-counter-major 95;counter-reset:figure-counter-minor;}
  h1[data-number="96"]{counter-set:figure-counter-major 96;counter-reset:figure-counter-minor;}
  h1[data-number="97"]{counter-set:figure-counter-major 97;counter-reset:figure-counter-minor;}
  h1[data-number="98"]{counter-set:figure-counter-major 98;counter-reset:figure-counter-minor;}
  h1[data-number="99"]{counter-set:figure-counter-major 99;counter-reset:figure-counter-minor;}


  </style>
  <!-- BG custom styling for the wide body variant -->
  <!-- Gets appended after bg-css.html -->

  <style type="text/css">
  body {
      max-width: inherit;
  }
  </style>
</head>
<body>
<div style="text-align:center"><span><a href="revert.html" rel="prev">Prev</a> | </span><a href="index.html">Contents</a><span> | <a href="the-reference-log-reflog.html" rel="next">Next</a></span></div><hr>
<h1 data-number="19" id="reset"><span class="header-section-number">19</span> Reset: Moving Branches Around</h1>
<p></p>
<p>Before we begin, using <code>git reset</code> <strong><em>rewrites history</em></strong>. This means that you shouldn’t use it on any branches that other people might have copies of, i.e. branches that you have pushed.</p>
<p>Of course, this is a highly-recommended guideline, not a rule, and you can reset anything provided you know what you’re doing and have good communication with your team.</p>
<p>But if you never reset a branch you haven’t pushed, you won’t get into trouble.</p>
<p>So what is it?</p>
<p>Doing a reset allows you change where the <code>HEAD</code> and your current branch point to. You can move your current branch to a different commit!</p>
<p>When you move a branch to another commit, the branch “becomes” the repo at the point of that commit, including all the history that led up to that commit. The upshot is that all the commits that led to the old branch point are now effectively gone, as shown in Figure 18.1.</p>
<figure>
<embed src="img_150_010.svg" title="If we reset main to commit 2, commits 3 and 4 will eventually be lost." />
<figcaption aria-hidden="true">If we reset <code>main</code> to commit <em>2</em>, commits <em>3</em> and <em>4</em> will eventually be lost.</figcaption>
</figure>
<p>So be sure you mean it when you reset! You’ll be losing commits<a href="quick-reference.html#fn30" class="footnote-ref" id="fnref30" role="doc-noteref"><sup>30</sup></a>!</p>
<p>When doing a reset, you can ask Git to move the current branch to another commit, or to another branch, or to anything else that identifies a commit.</p>
<p>Now, there is a question of what happens to the <em>difference</em> between your working tree at the old commit and whatever it would be at the new commit.</p>
<p>You might have read that last sentence too quickly, so let’s revisit it because it’s important. Right now, you have some files in your working tree. Let’s assume you’re fully committed and your <code>HEAD</code> is on the <code>main</code> branch. Now if you move the <code>main</code> branch elsewhere, <em>there will necessarily be a difference between what you had at the commit you</em> were <em>looking at, and the one you</em> will be *looking at.</p>
<p>We need to decide what to do with that difference. Where will it be reflected? As a difference between the stage and the destination commit? A difference between the working tree and the stage? Or both?</p>
<p>Turns out we have three options: <strong><em>soft reset</em></strong>, <strong><em>mixed reset</em></strong>, and <strong><em>hard reset</em></strong>.</p>
<p>And which you choose controls what happens to the branch, the stage, and the working tree.</p>
<blockquote>
<p><strong>I want you to consider that <em>all</em> files exist in three places at all times in Git:</strong> the working tree, the stage, and a commit.</p>
<p>And you’re supposed to say, “Wait—the stage has <em>all</em> the files on it? But I haven’t added anything to it!”</p>
<p>Yes. I’m saying that when your working tree is clean that means that the files in the <code>HEAD</code> commit, the files on the stage, and the files in your working tree <em>are all the same</em>. And, yes, all the files exist in all three places!<a href="quick-reference.html#fn31" class="footnote-ref" id="fnref31" role="doc-noteref"><sup>31</sup></a></p>
<p>And <code>git status</code> won’t show anything because there are no differences between these three places. And <code>git status</code> shows the differences.</p>
<p>Let’s say you modified a file in your working tree. In that case, <code>git status</code> would show you a difference between your working tree and the stage as a “modified file”. But there would still be no difference between the stage and the <code>HEAD</code> commit, so nothing would show as “ready to commit”.</p>
<p>Then let’s say you added the file to the stage. At the point, a copy of the file from the working tree is placed on the stage. So now the working tree and the stage are the same. And nothing shows as “modified”. But now, crucially, the stage differs from the <code>HEAD</code> commit! So now <code>git status</code> shows that difference as “ready to commit”.</p>
<p>Finally, let’s say that before you committed, you modified the file again in the working tree. Now the file in the working tree is different than the stage. <strong>And</strong> the file on the stage is different than the <code>HEAD</code> commit! Now the file shows up as both “ready to commit” and “modified”.</p>
<p>The reason I want us to think about things this way is because it will make this whole thing with <code>git reset</code> easier to digest. Sometimes a reset will change the files in the working tree, sometimes on the stage, and sometimes both.</p>
</blockquote>
<p>Note: in the following examples, I’m going to use the term “old commit” to refer to where the branch was <em>before</em> the reset, and “new commit” to refer to where it will be <em>after</em> the reset.</p>
<p>With all three variants, the current branch moves to the new (specified) commit.</p>
<p>The summary of differences is:</p>
<ul>
<li><strong>Soft</strong>:
<ul>
<li>Stage: old commit</li>
<li>Working tree: old commit</li>
<li>Result: All the old files will show on the stage as “ready to commit”.</li>
</ul></li>
<li><strong>Mixed</strong>:
<ul>
<li>Stage: new commit</li>
<li>Working tree: old commit</li>
<li>Result: All the old files will show in the working tree as “modified”.</li>
</ul></li>
<li><strong>Hard</strong>:
<ul>
<li>Stage: new commit</li>
<li>Working tree: new commit</li>
<li>Result: All the old files will be gone, and the working tree and stage will be clean.</li>
</ul></li>
</ul>
<h2 data-number="19.1" id="soft-reset"><span class="header-section-number">19.1</span> Soft Reset</h2>
<p></p>
<p>When you run a <code>git reset --soft</code>, this resets the current branch to point to the given commit, and makes the stage and working tree both have the changes that were present in the old commit.</p>
<p>The upshot is that <code>git status</code> will show your old commit’s changes as staged, and none of the files as modified.</p>
<p>In other words, you’ll see the old state of your files on the stage ready to commit.</p>
<p>A common use for this might be to collapse some of your previous commits similar to what we did with <a href="rebase.html#squashing-commits">rebase and squashing commits</a>.</p>
<p>Let’s say we have commits like this (pretend the numbers are the commit hashes):</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb234-1"><a href="reset.html#cb234-1" aria-hidden="true" tabindex="-1"></a>commit 555 (HEAD -&gt; main)</span>
<span id="cb234-2"><a href="reset.html#cb234-2" aria-hidden="true" tabindex="-1"></a>   Fixed another typo again</span>
<span id="cb234-3"><a href="reset.html#cb234-3" aria-hidden="true" tabindex="-1"></a>commit 444</span>
<span id="cb234-4"><a href="reset.html#cb234-4" aria-hidden="true" tabindex="-1"></a>   Fixed another typo</span>
<span id="cb234-5"><a href="reset.html#cb234-5" aria-hidden="true" tabindex="-1"></a>commit 333</span>
<span id="cb234-6"><a href="reset.html#cb234-6" aria-hidden="true" tabindex="-1"></a>   Fixed a typo</span>
<span id="cb234-7"><a href="reset.html#cb234-7" aria-hidden="true" tabindex="-1"></a>commit 222</span>
<span id="cb234-8"><a href="reset.html#cb234-8" aria-hidden="true" tabindex="-1"></a>   Implemented feature</span>
<span id="cb234-9"><a href="reset.html#cb234-9" aria-hidden="true" tabindex="-1"></a>commit 111</span>
<span id="cb234-10"><a href="reset.html#cb234-10" aria-hidden="true" tabindex="-1"></a>   Added</span></code></pre></div>
<p>That’s a gnarly-looking commit history. It would be nice to rewrite it (<em>but if and only if you haven’t pushed it yet!</em>).</p>
<p>We can do that with a soft reset back to commit <code>111</code>.</p>
<p>If we do this soft reset:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb235-1"><a href="reset.html#cb235-1" aria-hidden="true" tabindex="-1"></a>$ git reset --soft 111   # Again, pretend 111 is the commit hash</span></code></pre></div>
<p>We’ll then be in this point with all the other commits gone…</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb236-1"><a href="reset.html#cb236-1" aria-hidden="true" tabindex="-1"></a>commit 111 (HEAD -&gt; main)</span>
<span id="cb236-2"><a href="reset.html#cb236-2" aria-hidden="true" tabindex="-1"></a>   Added</span></code></pre></div>
<p><strong>Except importantly</strong> our files <em>as they existed in commit 555</em> will now be staged and ready to commit. That means with the soft reset the changes weren’t lost, but effectively commits 222-555 are all squished together on the stage.</p>
<p>So we commit them:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb237-1"><a href="reset.html#cb237-1" aria-hidden="true" tabindex="-1"></a>$ git commit -m &quot;Implemented feature&quot;</span></code></pre></div>
<p>And now we’re here with a nice commit history:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb238-1"><a href="reset.html#cb238-1" aria-hidden="true" tabindex="-1"></a>commit 222 (HEAD -&gt; main)</span>
<span id="cb238-2"><a href="reset.html#cb238-2" aria-hidden="true" tabindex="-1"></a>   Implemented feature</span>
<span id="cb238-3"><a href="reset.html#cb238-3" aria-hidden="true" tabindex="-1"></a>commit 111</span>
<span id="cb238-4"><a href="reset.html#cb238-4" aria-hidden="true" tabindex="-1"></a>   Added</span></code></pre></div>
<p>And now, finally we can push, happy that our changes are presentable to the general public.</p>
<blockquote>
<p><strong>Again, we’ve rewritten history here.</strong> Don’t do this if you’ve already pushed those commits past the one you’re resetting to.</p>
</blockquote>
<p></p>
<h2 data-number="19.2" id="mixed-reset"><span class="header-section-number">19.2</span> Mixed Reset</h2>
<p></p>
<p>Before we begin, the main use case of this reset was to unstage files. Now the more modern command is <code>git restore --staged</code>, and you should use that if all you want to do is unstage.</p>
<p>But let’s still look at how this works!</p>
<p>When you run a <code>git reset --mixed</code><a href="quick-reference.html#fn32" class="footnote-ref" id="fnref32" role="doc-noteref"><sup>32</sup></a>, this resets the current branch to point to the given commit, and it modifies the stage to that commit, and it <strong>doesn’t</strong> change your working tree.</p>
<p>The upshot is that it will show files as “modified” with the changes of the old commit, and there will be nothing on the stage.</p>
<p>Now, thinking about this, since the branch has moved to a commit with your files in one state, but your working tree has the files in another state, the files must be <em>modified</em> with respect to the commit the branch now points to.</p>
<p>And this is what happens. Your changes at the old commit will show up as modified files at the current commit.</p>
<p>It’s like the soft reset, except instead of the old commit ending up on the stage, it ends up in the working tree. You can stage it and commit it from here.</p>
<p>But that’s not all! Since the stage is also updated to the new commit, it means the stage is effectively “emptied”.</p>
<p>Like I mentioned, this is the classic use for a mixed reset: <code>git reset HEAD</code>. This moves files from staged state back to modified state.</p>
<p>This will reset the current branch to where it already was (assuming <code>HEAD</code> points to the current branch), and reset the stage to be the same as that commit. This unstages the files that were there. And it changes the working tree files to have the changes that were already present in those files at that point, which would be any changes you introduced.</p>
<p>And that unstages the files!</p>
<p>Another use might be if you want to squash a bunch of unpushed commits but simply don’t want to stage the changes at the old commit yet, leaving them as modified.</p>
<p></p>
<h2 data-number="19.3" id="hard-reset"><span class="header-section-number">19.3</span> Hard Reset</h2>
<p></p>
<p>This resets everything to a particular commit. The branch moves there. The stage is set to that commit. The files in the working tree are set to that commit. All changes since that commit are lost.</p>
<p>Use this if you want to bail out. You’ve made some commits and decided that was the wrong way, and you want to just roll them back entirely.</p>
<p><strong>Again, only do this if you haven’t pushed!</strong></p>
<p>If you do a hard reset, it will simply move the branch and reset your entire world (as it pertains to that branch) to that point as if nothing had happened since. <code>git status</code> will report that everything is clean.</p>
<p></p>
<h2 data-number="19.4" id="reset-to-a-divergent-branch"><span class="header-section-number">19.4</span> Reset to a Divergent Branch</h2>
<p></p>
<p>In the above examples, we’ve been resetting to a direct ancestor of our current commit. This is the common case for using <code>git reset</code>.</p>
<p>But there’s no reason why you couldn’t reset to an entirely different divergent branch. It just moves the branch there with exactly the same rules for soft, mixed, and hard that we’ve already covered.</p>
<p></p>
<h2 data-number="19.5" id="resetting-files"><span class="header-section-number">19.5</span> Resetting Files</h2>
<p></p>
<p>So far, we’ve been just doing resets on a commit-by-commit basis. But we could also do mixed resets with specific files. We can’t do hard or soft resets with specific files, though—sorry!</p>
<p>For example, we can do a mixed reset to unstage a single file.</p>
<p>Let’s say we’re here:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb239-1"><a href="reset.html#cb239-1" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb239-2"><a href="reset.html#cb239-2" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb239-3"><a href="reset.html#cb239-3" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb239-4"><a href="reset.html#cb239-4" aria-hidden="true" tabindex="-1"></a>    (use &quot;git restore --staged &lt;file&gt;...&quot; to unstage)</span>
<span id="cb239-5"><a href="reset.html#cb239-5" aria-hidden="true" tabindex="-1"></a>      modified:   bar.txt</span>
<span id="cb239-6"><a href="reset.html#cb239-6" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span></code></pre></div>
<p>And we want to reset <code>foo.txt</code> off the stage, but leave <code>bar.txt</code> on there.</p>
<blockquote>
<p><strong>Again, we’d use <code>git restore --staged</code> in these modern times.</strong> But we’re going to press on here for the sake of example.</p>
</blockquote>
<p>So let’s specify just that file:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb240-1"><a href="reset.html#cb240-1" aria-hidden="true" tabindex="-1"></a>$ git reset foo.txt</span>
<span id="cb240-2"><a href="reset.html#cb240-2" aria-hidden="true" tabindex="-1"></a>  Unstaged changes after reset:</span>
<span id="cb240-3"><a href="reset.html#cb240-3" aria-hidden="true" tabindex="-1"></a>  M    foo.txt</span>
<span id="cb240-4"><a href="reset.html#cb240-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-5"><a href="reset.html#cb240-5" aria-hidden="true" tabindex="-1"></a>$ git status</span>
<span id="cb240-6"><a href="reset.html#cb240-6" aria-hidden="true" tabindex="-1"></a>  On branch main</span>
<span id="cb240-7"><a href="reset.html#cb240-7" aria-hidden="true" tabindex="-1"></a>  Changes to be committed:</span>
<span id="cb240-8"><a href="reset.html#cb240-8" aria-hidden="true" tabindex="-1"></a>    (use &quot;git restore --staged &lt;file&gt;...&quot; to unstage)</span>
<span id="cb240-9"><a href="reset.html#cb240-9" aria-hidden="true" tabindex="-1"></a>      modified:   bar.txt</span>
<span id="cb240-10"><a href="reset.html#cb240-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-11"><a href="reset.html#cb240-11" aria-hidden="true" tabindex="-1"></a>  Changes not staged for commit:</span>
<span id="cb240-12"><a href="reset.html#cb240-12" aria-hidden="true" tabindex="-1"></a>    (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span>
<span id="cb240-13"><a href="reset.html#cb240-13" aria-hidden="true" tabindex="-1"></a>    (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working</span>
<span id="cb240-14"><a href="reset.html#cb240-14" aria-hidden="true" tabindex="-1"></a>    directory)</span>
<span id="cb240-15"><a href="reset.html#cb240-15" aria-hidden="true" tabindex="-1"></a>      modified:   foo.txt</span></code></pre></div>
<p>And there you have it.</p>
<p></p>
<h2 data-number="19.6" id="pushing-branch-changes-to-a-remote"><span class="header-section-number">19.6</span> Pushing Branch Changes to a Remote</h2>
<p></p>
<p>Let’s say you’ve made a mess of things somehow and you have to reset a branch that you’ve already pushed commits on. That is, you have to rewrite a public history.</p>
<p><strong><em>First: get good communication with the team.</em></strong> They’re going to make fun of you for sure, but at least they won’t hate you<a href="quick-reference.html#fn33" class="footnote-ref" id="fnref33" role="doc-noteref"><sup>33</sup></a>.</p>
<blockquote>
<p><strong><em>Never do a forced push without completely understanding </em>why<em> you’re doing it.</em></strong> Git is trying to stop you from doing a push for a reason: your own good! Everyone else who has cloned the repo will very likely be impacted and they need to be informed. Everybody. We use it here to demonstrate when it is necessary.</p>
</blockquote>
<p>Our process will be something like this:</p>
<ol type="1">
<li>Do the reset.</li>
<li>Do a forced push to your remote. For your protection, Git won’t push in this circumstance. You have to override with a forced push.</li>
</ol>
<p>Your coworkers will do something like this:</p>
<ol type="1">
<li>Do a <code>git fetch</code> to get the new branch position from the remote.</li>
<li>Stash or commit any local changes they need to preserve.</li>
<li>Maybe make a new branch at the old branch point in case they need to return to see old soon-to-be-obliterated commits.</li>
<li>Do a reset of the branch in question to the remote branch commit. For example, if we’re resetting the <code>main</code> branch, you would <code>git reset --hard origin/main</code>.</li>
<li>Pop their changes from the stash, if any.</li>
<li>Maybe apply earlier commits that got obliterated<a href="quick-reference.html#fn34" class="footnote-ref" id="fnref34" role="doc-noteref"><sup>34</sup></a>.</li>
</ol>
<p>Note that your coworkers don’t necessarily need to do a hard reset; they could do a mixed reset, for instance.</p>
<p></p>
<h3 data-number="19.6.1" id="forcing-the-push"><span class="header-section-number">19.6.1</span> Forcing the Push</h3>
<p></p>
<p>We have basically two options to use with <code>git push</code> here:</p>
<ol type="1">
<li><code>--force</code>: Just push the new branch position, <a href="https://en.wikipedia.org/wiki/Battle_of_Mobile_Bay#%22Damn_the_torpedoes%22">damn the torpedoes</a><a href="quick-reference.html#fn35" class="footnote-ref" id="fnref35" role="doc-noteref"><sup>35</sup></a>.</li>
<li><code>--force-with-lease</code>: Only force push if the remote branch’s position is what we expect. In other words, <strong>don’t</strong> force push if someone else has pushed a new commit in the meantime. This is a good safety measure because no one should have pushed a new commit in the meantime since you’ve been in communication with your team about this. <strong><em>Right?</em></strong></li>
</ol>
<p>If you try to <code>--force-with-lease</code> and someone else has pushed another commit to this branch in the meantime, you’ll be presented with an error:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb241-1"><a href="reset.html#cb241-1" aria-hidden="true" tabindex="-1"></a>$ git push --force-with-lease</span>
<span id="cb241-2"><a href="reset.html#cb241-2" aria-hidden="true" tabindex="-1"></a>  To git@github.com:user/repo.git</span>
<span id="cb241-3"><a href="reset.html#cb241-3" aria-hidden="true" tabindex="-1"></a>   ! [rejected]        main -&gt; main (stale info)</span>
<span id="cb241-4"><a href="reset.html#cb241-4" aria-hidden="true" tabindex="-1"></a>  error: failed to push some refs to &#39;git@github.com:user/repo.git&#39;</span></code></pre></div>
<p>If that happens, you’ll have to talk to your team to get them to stop, and then pull the changes, make sure everyone is on board with the new reset, and then start again.</p>
<p>We’ll use <code>--force-with-lease</code> in our examples.</p>
<h3 data-number="19.6.2" id="example-rewrite-public-history"><span class="header-section-number">19.6.2</span> Example: Rewrite Public History</h3>
<p>First, let’s play the part of the person who is rewriting the public history.</p>
<p><strong><em>The very first thing I’m going to do is coordinate with the team.</em></strong> If you’re already past this point, do it <strong>right now</strong>.</p>
<p>Then we’ll start the rewrite. We’ll be on the <code>main</code> branch for this demo. Let’s reset to an earlier commit, and we’ll assume that these commits we’re resetting past are already public and other team members already have them.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb242-1"><a href="reset.html#cb242-1" aria-hidden="true" tabindex="-1"></a>$ git reset --hard 4849e6</span>
<span id="cb242-2"><a href="reset.html#cb242-2" aria-hidden="true" tabindex="-1"></a>  HEAD is now at 4849e65 added line 3</span></code></pre></div>
<p>So far no harm, but now we’re going to push this history change to our origin. And we’ll use <code>--force-with-lease</code> for safety.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb243-1"><a href="reset.html#cb243-1" aria-hidden="true" tabindex="-1"></a>$ git push --force-with-lease</span>
<span id="cb243-2"><a href="reset.html#cb243-2" aria-hidden="true" tabindex="-1"></a>  To git@github.com:user/repo.git</span>
<span id="cb243-3"><a href="reset.html#cb243-3" aria-hidden="true" tabindex="-1"></a>   + a2b7ac3...ce44516 main -&gt; main (forced update)</span></code></pre></div>
<p>Now we’ve publicly rewritten history. Tell the team, which you’ve been in contact with this entire time, that you’ve done so. And they can begin to fix up their clones with much grumbling.</p>
<h3 data-number="19.6.3" id="example-receiving-rewritten-history"><span class="header-section-number">19.6.3</span> Example: Receiving Rewritten History</h3>
<p>You’ve just received word from your coworker that public history on the <code>main</code> branch has been rewritten and pushed to the remote, which we’ll assume is <code>origin</code> for this example.</p>
<p>First thing we should do is make sure we’re all backed up in whatever manner we need.</p>
<p>Perhaps a commit of the latest stuff:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb244-1"><a href="reset.html#cb244-1" aria-hidden="true" tabindex="-1"></a>$ git add [all files]</span>
<span id="cb244-2"><a href="reset.html#cb244-2" aria-hidden="true" tabindex="-1"></a>$ git commit -m &quot;last commit before public reset&quot;</span></code></pre></div>
<p>Or a stash if we’re not ready to commit:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb245-1"><a href="reset.html#cb245-1" aria-hidden="true" tabindex="-1"></a>$ git stash</span></code></pre></div>
<p>And perhaps make a new branch right here so we can revisit the old state of affairs for reference if we have to:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb246-1"><a href="reset.html#cb246-1" aria-hidden="true" tabindex="-1"></a>$ git branch oldmain</span></code></pre></div>
<p>And now it’s time for action. We need to fetch the new branch information.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb247-1"><a href="reset.html#cb247-1" aria-hidden="true" tabindex="-1"></a>$ git fetch origin</span>
<span id="cb247-2"><a href="reset.html#cb247-2" aria-hidden="true" tabindex="-1"></a>  From git@github.com:user/repo.git</span>
<span id="cb247-3"><a href="reset.html#cb247-3" aria-hidden="true" tabindex="-1"></a>   + e7b133a...521a873 main       -&gt; origin/main  (forced update)</span></code></pre></div>
<p>We just fetched, so our clone doesn’t look different to us yet. But let’s put an end to that and get on the same page as <code>origin</code>. This involves resetting our local <code>main</code> to be the same as it is on the remote tracking branch <code>origin/main</code>. (Remember the latter has been force pushed to a different commit, and we want our <code>main</code> to point to that commit, as well.)</p>
<p>Assuming we’re on branch <code>main</code> right now:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb248-1"><a href="reset.html#cb248-1" aria-hidden="true" tabindex="-1"></a>$ git reset --hard origin/main</span></code></pre></div>
<p>And now we’re on the same page as <code>origin</code>.</p>
<p>If we had stashed things, let’s try to get them back, resolving any conflicts as per usual:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb249-1"><a href="reset.html#cb249-1" aria-hidden="true" tabindex="-1"></a>$ git stash pop</span></code></pre></div>
<p>And if you want to refer to any old commits and you set up the <code>oldmain</code> branch as above, you can <code>git switch oldmain</code> to examine them, and maybe use something like <code>git cherry-pick</code> to bring in any functionality you need.</p>
<p></p>
<h2 data-number="19.7" id="resetting-without-moving-head"><span class="header-section-number">19.7</span> Resetting Without Moving <code>HEAD</code></h2>
<p></p>
<p>Using the reset feature moves the <code>HEAD</code> around by necessity. What if you just want to move a branch to another commit but leave <code>HEAD</code> alone?</p>
<p>It can be done! But you can’t do it with a branch you have checked out right now. So either detach the head or attach it to a different branch.</p>
<p>Instead of using <code>git reset</code> to do this, we’ll use <code>git branch</code>. Here’s an example:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb250-1"><a href="reset.html#cb250-1" aria-hidden="true" tabindex="-1"></a>$ git switch topic1</span>
<span id="cb250-2"><a href="reset.html#cb250-2" aria-hidden="true" tabindex="-1"></a>  Switched to branch &#39;topic1&#39;</span>
<span id="cb250-3"><a href="reset.html#cb250-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-4"><a href="reset.html#cb250-4" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb250-5"><a href="reset.html#cb250-5" aria-hidden="true" tabindex="-1"></a>  commit 97c4da49eda8de7b273003515a660945c (HEAD -&gt; topic1)</span>
<span id="cb250-6"><a href="reset.html#cb250-6" aria-hidden="true" tabindex="-1"></a>  Author: User &lt;user@example.com&gt;</span>
<span id="cb250-7"><a href="reset.html#cb250-7" aria-hidden="true" tabindex="-1"></a>  Date:   Thu Aug 1 14:22:39 2024 -0700</span>
<span id="cb250-8"><a href="reset.html#cb250-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-9"><a href="reset.html#cb250-9" aria-hidden="true" tabindex="-1"></a>      fix a third typo</span>
<span id="cb250-10"><a href="reset.html#cb250-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-11"><a href="reset.html#cb250-11" aria-hidden="true" tabindex="-1"></a>$ git branch --force main</span>
<span id="cb250-12"><a href="reset.html#cb250-12" aria-hidden="true" tabindex="-1"></a>$ git log</span>
<span id="cb250-13"><a href="reset.html#cb250-13" aria-hidden="true" tabindex="-1"></a>  commit 97c4da49eda8de7b273003515a660945c (HEAD -&gt; topic1, main)</span>
<span id="cb250-14"><a href="reset.html#cb250-14" aria-hidden="true" tabindex="-1"></a>  Author: User &lt;user@example.com&gt;</span>
<span id="cb250-15"><a href="reset.html#cb250-15" aria-hidden="true" tabindex="-1"></a>  Date:   Thu Aug 1 14:22:39 2024 -0700</span>
<span id="cb250-16"><a href="reset.html#cb250-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-17"><a href="reset.html#cb250-17" aria-hidden="true" tabindex="-1"></a>      fix a third typo</span></code></pre></div>
<p>See what happened to <code>main</code>? It moved to the current commit! You can see it in the output for the second <code>git log</code>.</p>
<p>You could also specify a destination for <code>main</code> as a second argument if you wanted it to move somewhere other than your current location.</p>
<p></p>
<h2 data-number="19.8" id="resetting-to-remove-credentials"><span class="header-section-number">19.8</span> Resetting to Remove Credentials</h2>
<p>Did you accidentally commit some secret password into your repo? Can you use <code>git reset</code> to back out of that commit?</p>
<ul>
<li>Have you pushed? Then <strong>NO</strong>. Your password is out in the wild. Change it now and never make that mistake again.</li>
<li>Have you <em>not yet</em> pushed? <strong>Yes</strong>. You can do it. But keep in mind the commit containing the password will remain in your local repo until it is garbage collected.</li>
</ul>
<p>If the answer was yes, you might find <code>git reset -p</code> useful to selectively reset parts of commits, something we’ll cover in a later chapter.</p>
<p></p>
<!-- BG_NEW_CHAPTER -->
<hr><div style="text-align:center"><span><a href="revert.html" rel="prev">Prev</a> | </span><a href="index.html">Contents</a><span> | <a href="the-reference-log-reflog.html" rel="next">Next</a></span></div></body>
</html>
