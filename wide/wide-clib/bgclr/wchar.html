<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Beej's Guide to C Programming</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!-- BG custom styling -->
  <style type="text/css">
  /* Fix for line numbers not visible */
  pre.numberSource code > span {
      left: -1em;
  }
  pre.numberSource {
      margin-left: initial;
  }

  /* Put some space after the section numbers */
  span.toc-section-number::after {
      content: "\a0\a0\a0";  /* non-breaking whitespace */
  }

  /* Hide underlines on code number links */
  pre > code.sourceCode > span > a:first-child::before {
      text-decoration: none;
  }

  /* Color the source blocks */
  div.sourceCode {
      background-color: #f0f0f0;
  }

  /* Fix iOS big text rendering issue */
  pre > code.sourceCode > span {
      display: initial;
  }


  /* Color the inline code */
  code:not(.sourceCode) {
      background: #f0f0f0;
      padding-left: 0.2em;
      padding-right: 0.2em;
      border-radius: 0.2em;
  }

  pre.sourceCode {
      border: 1px solid #ccc;
      padding: 0.5em;
      border-radius: 0.2em;
  }

  /* Keep code tags from wrapping in tables */
  tbody code {
      white-space: nowrap;
  }

  /* Prevent hyphenation and hyphen breaks in code*/
  code {
      word-break: keep-all;
  }

  td {
      vertical-align: top;
  }

  body {
      font-size: 12pt;
      max-width: 43em;
      font-family: sans-serif;
  }

  html {
      background: #f9f9f9;
  }

  figure > embed {
      max-width: 100%;
  }

  figure {
      text-align: center;
      margin-top: 2em;
      margin-bottom: 2em;
  }

  figcaption {
      font-size: 0.9em;
      font-style: italic;
      margin-top: 0.6em;
  }

  body {
      counter-reset: figure-counter-major;
      counter-reset: figure-counter-minor;
  }

  figure {
      counter-increment: figure-counter-minor;
  }

  figcaption::before {
      content: "Figure " counter(figure-counter-major) "." counter(figure-counter-minor) ": ";
  }

  blockquote {
      border-left: 2px solid #bbb;
      color: #444;
  }

  /* Contents */

  nav[role="doc-toc"] > ul > li {
    font-weight: bold;
    margin-top: 1.2em;
  }

  nav[role="doc-toc"] > ul > li:first {
    font-weight: bold;
    margin-top: initial;
  }

  nav[role="doc-toc"] > ul > li > ul {
    font-weight: normal;
    margin-top: 0.3em;
  }

  /*
  In multipage, we need to reset the figure counter to the chapter
  number. Luckily, this is in the <h1 data-number> attribute. Unluckily,
  there is no way to get this in a general way.

  This doesn't work:

    h1[data-number] {
      counter-set: figure-counter-major attr(data-number);
    }

  Nor this:

    h1[data-number] {
      --figure-counter-major-value: attr(data-number);
      counter-set: figure-counter-major var(--figure-counter-major-value);
    }

  So, dumbly, we have a bunch of rules for all these sections, up to the
  maximum possible section.

  Here's a program to generate them:

    for (let i = 1; i < 100; i++)
        console.log(`h1[data-number="${i}"]{counter-set:figure-counter-major ${i};counter-reset:figure-counter-minor;}`);

  Note to self: never write a book with more than 99 frickin' chapters.
  */

  h1[data-number="1"]{counter-set:figure-counter-major 1;counter-reset:figure-counter-minor;}
  h1[data-number="2"]{counter-set:figure-counter-major 2;counter-reset:figure-counter-minor;}
  h1[data-number="3"]{counter-set:figure-counter-major 3;counter-reset:figure-counter-minor;}
  h1[data-number="4"]{counter-set:figure-counter-major 4;counter-reset:figure-counter-minor;}
  h1[data-number="5"]{counter-set:figure-counter-major 5;counter-reset:figure-counter-minor;}
  h1[data-number="6"]{counter-set:figure-counter-major 6;counter-reset:figure-counter-minor;}
  h1[data-number="7"]{counter-set:figure-counter-major 7;counter-reset:figure-counter-minor;}
  h1[data-number="8"]{counter-set:figure-counter-major 8;counter-reset:figure-counter-minor;}
  h1[data-number="9"]{counter-set:figure-counter-major 9;counter-reset:figure-counter-minor;}
  h1[data-number="10"]{counter-set:figure-counter-major 10;counter-reset:figure-counter-minor;}
  h1[data-number="11"]{counter-set:figure-counter-major 11;counter-reset:figure-counter-minor;}
  h1[data-number="12"]{counter-set:figure-counter-major 12;counter-reset:figure-counter-minor;}
  h1[data-number="13"]{counter-set:figure-counter-major 13;counter-reset:figure-counter-minor;}
  h1[data-number="14"]{counter-set:figure-counter-major 14;counter-reset:figure-counter-minor;}
  h1[data-number="15"]{counter-set:figure-counter-major 15;counter-reset:figure-counter-minor;}
  h1[data-number="16"]{counter-set:figure-counter-major 16;counter-reset:figure-counter-minor;}
  h1[data-number="17"]{counter-set:figure-counter-major 17;counter-reset:figure-counter-minor;}
  h1[data-number="18"]{counter-set:figure-counter-major 18;counter-reset:figure-counter-minor;}
  h1[data-number="19"]{counter-set:figure-counter-major 19;counter-reset:figure-counter-minor;}
  h1[data-number="20"]{counter-set:figure-counter-major 20;counter-reset:figure-counter-minor;}
  h1[data-number="21"]{counter-set:figure-counter-major 21;counter-reset:figure-counter-minor;}
  h1[data-number="22"]{counter-set:figure-counter-major 22;counter-reset:figure-counter-minor;}
  h1[data-number="23"]{counter-set:figure-counter-major 23;counter-reset:figure-counter-minor;}
  h1[data-number="24"]{counter-set:figure-counter-major 24;counter-reset:figure-counter-minor;}
  h1[data-number="25"]{counter-set:figure-counter-major 25;counter-reset:figure-counter-minor;}
  h1[data-number="26"]{counter-set:figure-counter-major 26;counter-reset:figure-counter-minor;}
  h1[data-number="27"]{counter-set:figure-counter-major 27;counter-reset:figure-counter-minor;}
  h1[data-number="28"]{counter-set:figure-counter-major 28;counter-reset:figure-counter-minor;}
  h1[data-number="29"]{counter-set:figure-counter-major 29;counter-reset:figure-counter-minor;}
  h1[data-number="30"]{counter-set:figure-counter-major 30;counter-reset:figure-counter-minor;}
  h1[data-number="31"]{counter-set:figure-counter-major 31;counter-reset:figure-counter-minor;}
  h1[data-number="32"]{counter-set:figure-counter-major 32;counter-reset:figure-counter-minor;}
  h1[data-number="33"]{counter-set:figure-counter-major 33;counter-reset:figure-counter-minor;}
  h1[data-number="34"]{counter-set:figure-counter-major 34;counter-reset:figure-counter-minor;}
  h1[data-number="35"]{counter-set:figure-counter-major 35;counter-reset:figure-counter-minor;}
  h1[data-number="36"]{counter-set:figure-counter-major 36;counter-reset:figure-counter-minor;}
  h1[data-number="37"]{counter-set:figure-counter-major 37;counter-reset:figure-counter-minor;}
  h1[data-number="38"]{counter-set:figure-counter-major 38;counter-reset:figure-counter-minor;}
  h1[data-number="39"]{counter-set:figure-counter-major 39;counter-reset:figure-counter-minor;}
  h1[data-number="40"]{counter-set:figure-counter-major 40;counter-reset:figure-counter-minor;}
  h1[data-number="41"]{counter-set:figure-counter-major 41;counter-reset:figure-counter-minor;}
  h1[data-number="42"]{counter-set:figure-counter-major 42;counter-reset:figure-counter-minor;}
  h1[data-number="43"]{counter-set:figure-counter-major 43;counter-reset:figure-counter-minor;}
  h1[data-number="44"]{counter-set:figure-counter-major 44;counter-reset:figure-counter-minor;}
  h1[data-number="45"]{counter-set:figure-counter-major 45;counter-reset:figure-counter-minor;}
  h1[data-number="46"]{counter-set:figure-counter-major 46;counter-reset:figure-counter-minor;}
  h1[data-number="47"]{counter-set:figure-counter-major 47;counter-reset:figure-counter-minor;}
  h1[data-number="48"]{counter-set:figure-counter-major 48;counter-reset:figure-counter-minor;}
  h1[data-number="49"]{counter-set:figure-counter-major 49;counter-reset:figure-counter-minor;}
  h1[data-number="50"]{counter-set:figure-counter-major 50;counter-reset:figure-counter-minor;}
  h1[data-number="51"]{counter-set:figure-counter-major 51;counter-reset:figure-counter-minor;}
  h1[data-number="52"]{counter-set:figure-counter-major 52;counter-reset:figure-counter-minor;}
  h1[data-number="53"]{counter-set:figure-counter-major 53;counter-reset:figure-counter-minor;}
  h1[data-number="54"]{counter-set:figure-counter-major 54;counter-reset:figure-counter-minor;}
  h1[data-number="55"]{counter-set:figure-counter-major 55;counter-reset:figure-counter-minor;}
  h1[data-number="56"]{counter-set:figure-counter-major 56;counter-reset:figure-counter-minor;}
  h1[data-number="57"]{counter-set:figure-counter-major 57;counter-reset:figure-counter-minor;}
  h1[data-number="58"]{counter-set:figure-counter-major 58;counter-reset:figure-counter-minor;}
  h1[data-number="59"]{counter-set:figure-counter-major 59;counter-reset:figure-counter-minor;}
  h1[data-number="60"]{counter-set:figure-counter-major 60;counter-reset:figure-counter-minor;}
  h1[data-number="61"]{counter-set:figure-counter-major 61;counter-reset:figure-counter-minor;}
  h1[data-number="62"]{counter-set:figure-counter-major 62;counter-reset:figure-counter-minor;}
  h1[data-number="63"]{counter-set:figure-counter-major 63;counter-reset:figure-counter-minor;}
  h1[data-number="64"]{counter-set:figure-counter-major 64;counter-reset:figure-counter-minor;}
  h1[data-number="65"]{counter-set:figure-counter-major 65;counter-reset:figure-counter-minor;}
  h1[data-number="66"]{counter-set:figure-counter-major 66;counter-reset:figure-counter-minor;}
  h1[data-number="67"]{counter-set:figure-counter-major 67;counter-reset:figure-counter-minor;}
  h1[data-number="68"]{counter-set:figure-counter-major 68;counter-reset:figure-counter-minor;}
  h1[data-number="69"]{counter-set:figure-counter-major 69;counter-reset:figure-counter-minor;}
  h1[data-number="70"]{counter-set:figure-counter-major 70;counter-reset:figure-counter-minor;}
  h1[data-number="71"]{counter-set:figure-counter-major 71;counter-reset:figure-counter-minor;}
  h1[data-number="72"]{counter-set:figure-counter-major 72;counter-reset:figure-counter-minor;}
  h1[data-number="73"]{counter-set:figure-counter-major 73;counter-reset:figure-counter-minor;}
  h1[data-number="74"]{counter-set:figure-counter-major 74;counter-reset:figure-counter-minor;}
  h1[data-number="75"]{counter-set:figure-counter-major 75;counter-reset:figure-counter-minor;}
  h1[data-number="76"]{counter-set:figure-counter-major 76;counter-reset:figure-counter-minor;}
  h1[data-number="77"]{counter-set:figure-counter-major 77;counter-reset:figure-counter-minor;}
  h1[data-number="78"]{counter-set:figure-counter-major 78;counter-reset:figure-counter-minor;}
  h1[data-number="79"]{counter-set:figure-counter-major 79;counter-reset:figure-counter-minor;}
  h1[data-number="80"]{counter-set:figure-counter-major 80;counter-reset:figure-counter-minor;}
  h1[data-number="81"]{counter-set:figure-counter-major 81;counter-reset:figure-counter-minor;}
  h1[data-number="82"]{counter-set:figure-counter-major 82;counter-reset:figure-counter-minor;}
  h1[data-number="83"]{counter-set:figure-counter-major 83;counter-reset:figure-counter-minor;}
  h1[data-number="84"]{counter-set:figure-counter-major 84;counter-reset:figure-counter-minor;}
  h1[data-number="85"]{counter-set:figure-counter-major 85;counter-reset:figure-counter-minor;}
  h1[data-number="86"]{counter-set:figure-counter-major 86;counter-reset:figure-counter-minor;}
  h1[data-number="87"]{counter-set:figure-counter-major 87;counter-reset:figure-counter-minor;}
  h1[data-number="88"]{counter-set:figure-counter-major 88;counter-reset:figure-counter-minor;}
  h1[data-number="89"]{counter-set:figure-counter-major 89;counter-reset:figure-counter-minor;}
  h1[data-number="90"]{counter-set:figure-counter-major 90;counter-reset:figure-counter-minor;}
  h1[data-number="91"]{counter-set:figure-counter-major 91;counter-reset:figure-counter-minor;}
  h1[data-number="92"]{counter-set:figure-counter-major 92;counter-reset:figure-counter-minor;}
  h1[data-number="93"]{counter-set:figure-counter-major 93;counter-reset:figure-counter-minor;}
  h1[data-number="94"]{counter-set:figure-counter-major 94;counter-reset:figure-counter-minor;}
  h1[data-number="95"]{counter-set:figure-counter-major 95;counter-reset:figure-counter-minor;}
  h1[data-number="96"]{counter-set:figure-counter-major 96;counter-reset:figure-counter-minor;}
  h1[data-number="97"]{counter-set:figure-counter-major 97;counter-reset:figure-counter-minor;}
  h1[data-number="98"]{counter-set:figure-counter-major 98;counter-reset:figure-counter-minor;}
  h1[data-number="99"]{counter-set:figure-counter-major 99;counter-reset:figure-counter-minor;}


  </style>
  <!-- BG custom styling for the wide body variant -->
  <!-- Gets appended after bg-css.html -->

  <style type="text/css">
  body {
      max-width: inherit;
  }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>
<div style="text-align:center"><span><a href="uchar.html" rel="prev">Prev</a> | </span><a href="index.html">Contents</a><span> | <a href="wctype.html" rel="next">Next</a></span></div><hr>
<h1 data-number="31" id="wchar"><span class="header-section-number">31</span> <code>&lt;wchar.h&gt;</code> Wide Character Handling</h1>
<p></p>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="wchar.html#man-btowc"><code>btowc()</code></a></td>
<td>Convert a single byte character to a wide character</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-getwc"><code>fgetwc()</code></a></td>
<td>Get a wide character from a wide stream</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-fgetws"><code>fgetws()</code></a></td>
<td>Read a wide string from a wide stream</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-putwc"><code>fputwc()</code></a></td>
<td>Write a wide character to a wide stream</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-fputws"><code>fputws()</code></a></td>
<td>Write a wide string to a wide stream</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-fwide"><code>fwide()</code></a></td>
<td>Get or set the orientation of the stream</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wprintf"><code>fwprintf()</code></a></td>
<td>Formatted wide output to a wide stream</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wscanf"><code>fwscanf()</code></a></td>
<td>Formatted wide input from a wide stream</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-getwc"><code>getwchar()</code></a></td>
<td>Get a wide character from <code>stdin</code></td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-getwc"><code>getwc()</code></a></td>
<td>Get a wide character from <code>stdin</code></td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-mbrlen"><code>mbrlen()</code></a></td>
<td>Compute the number of bytes in a multibyte character restartably</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-mbrtowc"><code>mbrtowc()</code></a></td>
<td>Convert multibyte to wide characters restartably</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-mbsinit"><code>mbsinit()</code></a></td>
<td>Test if an <code>mbstate_t</code> is in the initial conversion state</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-mbsrtowcs"><code>mbsrtowcs()</code></a></td>
<td>Convert a multibyte string to a wide character string restartably</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-putwc"><code>putwchar()</code></a></td>
<td>Write a wide character to <code>stdout</code></td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-putwc"><code>putwc()</code></a></td>
<td>Write a wide character to <code>stdout</code></td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wprintf"><code>swprintf()</code></a></td>
<td>Formatted wide output to a wide string</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wscanf"><code>swscanf()</code></a></td>
<td>Formatted wide input from a wide string</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-ungetwc"><code>ungetwc()</code></a></td>
<td>Pushes a wide character back into the input stream</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wprintf"><code>vfwprintf()</code></a></td>
<td>Variadic formatted wide output to a wide stream</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wscanf"><code>vfwscanf()</code></a></td>
<td>Variadic formatted wide input from a wide stream</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wprintf"><code>vswprintf()</code></a></td>
<td>Variadic formatted wide output to a wide string</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wscanf"><code>vswscanf()</code></a></td>
<td>Variadic formatted wide input from a wide string</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wprintf"><code>vwprintf()</code></a></td>
<td>Variadic formatted wide output</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wscanf"><code>vwscanf()</code></a></td>
<td>Variadic formatted wide input</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcscat"><code>wcscat()</code></a></td>
<td>Concatenate wide strings dangerously</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcschr"><code>wcschr()</code></a></td>
<td>Find a wide character in a wide string</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcscmp"><code>wcscmp()</code></a></td>
<td>Compare wide strings</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcscoll"><code>wcscoll()</code></a></td>
<td>Compare two wide strings accounting for locale</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcscpy"><code>wcscpy()</code></a></td>
<td>Copy a wide string dangerously</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcsspn"><code>wcscspn()</code></a></td>
<td>Count characters not from a start at the front of a wide string</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcsftime"><code>wcsftime()</code></a></td>
<td>Formatted date and time output</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcslen"><code>wcslen()</code></a></td>
<td>Returns the length of a wide string</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcscat"><code>wcsncat()</code></a></td>
<td>Concatenate wide strings more safely</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcscmp"><code>wcsncmp()</code></a></td>
<td>Compare wide strings, length limited</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcscpy"><code>wcsncpy()</code></a></td>
<td>Copy a wide string more safely</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcspbrk"><code>wcspbrk()</code></a></td>
<td>Search a wide string for one of a set of wide characters</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcschr"><code>wcsrchr()</code></a></td>
<td>Find a wide character in a wide string from the end</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcsrtombs"><code>wcsrtombs()</code></a></td>
<td>Convert a wide character string to a multibyte string restartably</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcsspn"><code>wcsspn()</code></a></td>
<td>Count characters from a set at the front of a wide string</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcsstr"><code>wcsstr()</code></a></td>
<td>Find a wide string in another wide string</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcstod"><code>wcstod()</code></a></td>
<td>Convert a wide string to a <code>double</code></td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcstod"><code>wcstof()</code></a></td>
<td>Convert a wide string to a <code>float</code></td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcstok"><code>wcstok()</code></a></td>
<td>Tokenize a wide string</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcstod"><code>wcstold()</code></a></td>
<td>Convert a wide string to a <code>long double</code></td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcstol"><code>wcstoll()</code></a></td>
<td>Convert a wide string to a <code>long long</code></td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcstol"><code>wcstol()</code></a></td>
<td>Convert a wide string to a <code>long</code></td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcstol"><code>wcstoull()</code></a></td>
<td>Convert a wide string to an <code>unsigned long long</code></td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcstol"><code>wcstoul()</code></a></td>
<td>Convert a wide string to an <code>unsigned long</code></td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcsxfrm"><code>wcsxfrm()</code></a></td>
<td>Transform a wide string for comparing based on locale</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-btowc"><code>wctob()</code></a></td>
<td>Convert a wide character to a single byte character</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wcrtomb"><code>wctombr()</code></a></td>
<td>Convert wide to multibyte characters restartably</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wcscmp"><code>wmemcmp()</code></a></td>
<td>Compare wide characters in memory</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wmemcpy"><code>wmemcpy()</code></a></td>
<td>Copy wide character memory</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wmemcpy"><code>wmemmove()</code></a></td>
<td>Copy wide character memory, potentially overlapping</td>
</tr>
<tr class="even">
<td><a href="wchar.html#man-wprintf"><code>wprintf()</code></a></td>
<td>Formatted wide output</td>
</tr>
<tr class="odd">
<td><a href="wchar.html#man-wscanf"><code>wscanf()</code></a></td>
<td>Formatted wide input</td>
</tr>
</tbody>
</table>
<p>These are the wide character variants of the functions found in <a href="stdio.html#stdio"><code>&lt;stdio.h&gt;</code></a>.</p>
<p>Remember that you can’t mix-and-match multibyte output functions (like <a href="stdio.html#man-printf"><code>printf()</code></a>) with wide character output functions (like <a href="wchar.html#man-wprintf"><code>wprintf()</code></a>). The output stream has an <em>orientation</em> to either multibyte or wide that gets set on the first I/O call to that stream. (Or it can be set with <a href="wchar.html#man-fwide"><code>fwide()</code></a>.)</p>
<p>So choose one or the other and stick with it.</p>
<p>And you can specify wide character constants and string literals by prefixing <code>L</code> to the front of it:</p>
<div class="sourceCode" id="cb851"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb851-1"><a href="wchar.html#cb851-1" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>s <span class="op">=</span> <span class="st">L&quot;Hello, world!&quot;</span><span class="op">;</span></span>
<span id="cb851-2"><a href="wchar.html#cb851-2" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> c <span class="op">=</span> <span class="ch">L&#39;B&#39;</span><span class="op">;</span></span></code></pre></div>
<p>This header also introduces a type <code>wint_t</code> that is used by the character I/O functions. It’s a type that can hold any single wide character, but <em>also</em> the macro <code>WEOF</code> to indicate wide end-of-file.</p>
<h2 data-number="31.1" id="restartable-functions"><span class="header-section-number">31.1</span> Restartable Functions</h2>
<p>Finally, a note on the “restartable” functions that are included here. When conversion is happening, some encodings require C to keep track of some <em>state</em> about the progress of the conversion so far.</p>
<p>For a lot of the functions, C uses an internal variable for the state that is shared between function calls. The problem is if you’re writing multithreaded code, this state might get trampled by other threads.</p>
<p>To avoid this, each thread needs to maintain its own state in a variable of the opaque type <code>mbstate_t</code>. And the “restartable” functions allow you to pass in this state so that each thread can use their own.</p>
<hr />
<h2 data-number="31.2" id="man-wprintf"><span class="header-section-number">31.2</span> <code>wprintf()</code>, <code>fwprintf()</code>, <code>swprintf()</code></h2>
<p> </p>
<p>Formatted output with a wide string</p>
<h3 class="unnumbered unlisted" id="synopsis-252">Synopsis</h3>
<div class="sourceCode" id="cb852"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb852-1"><a href="wchar.html#cb852-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">   </span><span class="co">// For fwprintf()</span></span>
<span id="cb852-2"><a href="wchar.html#cb852-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb852-3"><a href="wchar.html#cb852-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb852-4"><a href="wchar.html#cb852-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> wprintf<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb852-5"><a href="wchar.html#cb852-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb852-6"><a href="wchar.html#cb852-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fwprintf<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span> <span class="dt">restrict</span> stream<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb852-7"><a href="wchar.html#cb852-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb852-8"><a href="wchar.html#cb852-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> swprintf<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">,</span></span>
<span id="cb852-9"><a href="wchar.html#cb852-9" aria-hidden="true" tabindex="-1"></a>             <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span> <span class="op">...);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-252">Description</h3>
<p>These are the wide versions of <a href="stdio.html#man-printf"><code>printf()</code></a>, <a href="stdio.html#man-printf"><code>fprintf()](#man-printf), and [</code>sprintf()`</a>.</p>
<p>See those pages for exact substantial usage.</p>
<p>These are the same except the <code>format</code> string is a wide character string instead of a multibyte string.</p>
<p>And that <code>swprintf()</code> is analogous to <code>snprintf()</code> in that they both take the size of the destination array as an argument.</p>
<p>And one more thing: the precision specified for a <code>%s</code> specifier corresponds to the number of wide characters printed, not the number of bytes. If you know of other difference, let me know.</p>
<h3 class="unnumbered unlisted" id="return-value-250">Return Value</h3>
<p>Returns the number of wide characters outputted, or <code>-1</code> if there’s an error.</p>
<h3 class="unnumbered unlisted" id="example-254">Example</h3>
<div class="sourceCode" id="cb853"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb853-1"><a href="wchar.html#cb853-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb853-2"><a href="wchar.html#cb853-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb853-3"><a href="wchar.html#cb853-3"></a></span>
<span id="cb853-4"><a href="wchar.html#cb853-4"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb853-5"><a href="wchar.html#cb853-5"></a><span class="op">{</span></span>
<span id="cb853-6"><a href="wchar.html#cb853-6"></a>    <span class="dt">char</span> <span class="op">*</span>mbs <span class="op">=</span> <span class="st">&quot;multibyte&quot;</span><span class="op">;</span></span>
<span id="cb853-7"><a href="wchar.html#cb853-7"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>ws <span class="op">=</span> <span class="st">L&quot;wide&quot;</span><span class="op">;</span></span>
<span id="cb853-8"><a href="wchar.html#cb853-8"></a></span>
<span id="cb853-9"><a href="wchar.html#cb853-9"></a>    wprintf<span class="op">(</span><span class="st">L&quot;We&#39;re all wide for </span><span class="sc">%s</span><span class="st"> and </span><span class="sc">%ls</span><span class="st">!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> mbs<span class="op">,</span> ws<span class="op">);</span></span>
<span id="cb853-10"><a href="wchar.html#cb853-10"></a></span>
<span id="cb853-11"><a href="wchar.html#cb853-11"></a>    <span class="dt">double</span> pi <span class="op">=</span> <span class="fl">3.14159265358979</span><span class="op">;</span></span>
<span id="cb853-12"><a href="wchar.html#cb853-12"></a>    wprintf<span class="op">(</span><span class="st">L&quot;pi = </span><span class="sc">%f\n</span><span class="st">&quot;</span><span class="op">,</span> pi<span class="op">);</span></span>
<span id="cb853-13"><a href="wchar.html#cb853-13"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb854"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb854-1"><a href="wchar.html#cb854-1" aria-hidden="true" tabindex="-1"></a>We&#39;re all wide for multibyte and wide!</span>
<span id="cb854-2"><a href="wchar.html#cb854-2" aria-hidden="true" tabindex="-1"></a>pi = 3.141593</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-238">See Also</h3>
<p><a href="stdio.html#man-printf"><code>printf()</code></a>, <a href="wchar.html#man-vwprintf"><code>vwprintf()</code></a></p>
<hr />
<h2 data-number="31.3" id="man-wscanf"><span class="header-section-number">31.3</span> <code>wscanf()</code> <code>fwscanf()</code> <code>swscanf()</code></h2>
<p> </p>
<p>Scan a wide stream or wide string for formatted input</p>
<h3 class="unnumbered unlisted" id="synopsis-253">Synopsis</h3>
<div class="sourceCode" id="cb855"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb855-1"><a href="wchar.html#cb855-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">  </span><span class="co">// for fwscanf()</span></span>
<span id="cb855-2"><a href="wchar.html#cb855-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb855-3"><a href="wchar.html#cb855-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-4"><a href="wchar.html#cb855-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> wscanf<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb855-5"><a href="wchar.html#cb855-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-6"><a href="wchar.html#cb855-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fwscanf<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span> <span class="dt">restrict</span> stream<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb855-7"><a href="wchar.html#cb855-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-8"><a href="wchar.html#cb855-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> swscanf<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span> <span class="op">...);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-253">Description</h3>
<p>These are the wide variants of <a href="stdio.html#man-scanf"><code>scanf()</code></a>, <a href="stdio.html#man-scanf"><code>fscanf()</code></a>, and <a href="stdio.html#man-scanf"><code>sscanf()</code></a>.</p>
<p>See the <a href="stdio.html#man-scanf"><code>scanf()</code></a> page for all the details.</p>
<h3 class="unnumbered unlisted" id="return-value-251">Return Value</h3>
<p>Returns the number of items successfully scanned, or <code>EOF</code> on some kind of input failure.</p>
<h3 class="unnumbered unlisted" id="example-255">Example</h3>
<div class="sourceCode" id="cb856"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb856-1"><a href="wchar.html#cb856-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb856-2"><a href="wchar.html#cb856-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb856-3"><a href="wchar.html#cb856-3"></a></span>
<span id="cb856-4"><a href="wchar.html#cb856-4"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb856-5"><a href="wchar.html#cb856-5"></a><span class="op">{</span></span>
<span id="cb856-6"><a href="wchar.html#cb856-6"></a>    <span class="dt">int</span> quantity<span class="op">;</span></span>
<span id="cb856-7"><a href="wchar.html#cb856-7"></a>    <span class="dt">wchar_t</span> item<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb856-8"><a href="wchar.html#cb856-8"></a></span>
<span id="cb856-9"><a href="wchar.html#cb856-9"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Enter </span><span class="sc">\&quot;</span><span class="st">quantity: item</span><span class="sc">\&quot;\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb856-10"><a href="wchar.html#cb856-10"></a>    </span>
<span id="cb856-11"><a href="wchar.html#cb856-11"></a>    <span class="cf">if</span> <span class="op">(</span>wscanf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d</span><span class="st">:</span><span class="sc">%99ls</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>quantity<span class="op">,</span> item<span class="op">)</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span></span>
<span id="cb856-12"><a href="wchar.html#cb856-12"></a>        wprintf<span class="op">(</span><span class="st">L&quot;Malformed input!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb856-13"><a href="wchar.html#cb856-13"></a>    <span class="cf">else</span></span>
<span id="cb856-14"><a href="wchar.html#cb856-14"></a>        wprintf<span class="op">(</span><span class="st">L&quot;You entered: </span><span class="sc">%d</span><span class="st"> </span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> quantity<span class="op">,</span> item<span class="op">);</span></span>
<span id="cb856-15"><a href="wchar.html#cb856-15"></a><span class="op">}</span></span></code></pre></div>
<p>Output (input of <code>12: apples</code>):</p>
<div class="sourceCode" id="cb857"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb857-1"><a href="wchar.html#cb857-1" aria-hidden="true" tabindex="-1"></a>Enter &quot;quantity: item&quot;</span>
<span id="cb857-2"><a href="wchar.html#cb857-2" aria-hidden="true" tabindex="-1"></a>12: apples</span>
<span id="cb857-3"><a href="wchar.html#cb857-3" aria-hidden="true" tabindex="-1"></a>You entered: 12 apples</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-239">See Also</h3>
<p><a href="stdio.html#man-scanf"><code>scanf()</code></a>, <a href="wchar.html#man-vwscanf"><code>vwscanf()</code></a></p>
<hr />
<h2 data-number="31.4" id="man-vwprintf"><span class="header-section-number">31.4</span> <code>vwprintf()</code> <code>vfwprintf()</code> <code>vswprintf()</code></h2>
<p> </p>
<p><code>wprintf()</code> variants using variable argument lists (<code>va_list</code>)</p>
<h3 class="unnumbered unlisted" id="synopsis-254">Synopsis</h3>
<div class="sourceCode" id="cb858"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb858-1"><a href="wchar.html#cb858-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">   </span><span class="co">// For vfwprintf()</span></span>
<span id="cb858-2"><a href="wchar.html#cb858-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb858-3"><a href="wchar.html#cb858-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb858-4"><a href="wchar.html#cb858-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb858-5"><a href="wchar.html#cb858-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> vwprintf<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span> <span class="dt">va_list</span> arg<span class="op">);</span></span>
<span id="cb858-6"><a href="wchar.html#cb858-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb858-7"><a href="wchar.html#cb858-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> vswprintf<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">,</span></span>
<span id="cb858-8"><a href="wchar.html#cb858-8" aria-hidden="true" tabindex="-1"></a>              <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span> <span class="dt">va_list</span> arg<span class="op">);</span> </span>
<span id="cb858-9"><a href="wchar.html#cb858-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb858-10"><a href="wchar.html#cb858-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> vfwprintf<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span> <span class="dt">restrict</span> stream<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span></span>
<span id="cb858-11"><a href="wchar.html#cb858-11" aria-hidden="true" tabindex="-1"></a>              <span class="dt">va_list</span> arg<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-254">Description</h3>
<p>These functions are the wide character variants of the <a href="stdio.html#man-vprintf"><code>vprintf()</code></a>, functions. You can <a href="stdio.html#man-vprintf">refer to that reference page</a> for more details.</p>
<h3 class="unnumbered unlisted" id="return-value-252">Return Value</h3>
<p>Returns the number of wide characters stored, or a negative value on error.</p>
<h3 class="unnumbered unlisted" id="example-256">Example</h3>
<p>In this example, we make our own version of <code>wprintf()</code> called <code>wlogger()</code> that timestamps output. Notice how the calls to <code>wlogger()</code> have all the bells and whistles of <code>wprintf()</code>.</p>
<div class="sourceCode" id="cb859"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb859-1"><a href="wchar.html#cb859-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb859-2"><a href="wchar.html#cb859-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb859-3"><a href="wchar.html#cb859-3"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb859-4"><a href="wchar.html#cb859-4"></a></span>
<span id="cb859-5"><a href="wchar.html#cb859-5"></a><span class="dt">int</span> wlogger<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb859-6"><a href="wchar.html#cb859-6"></a><span class="op">{</span></span>
<span id="cb859-7"><a href="wchar.html#cb859-7"></a>    <span class="dt">va_list</span> va<span class="op">;</span></span>
<span id="cb859-8"><a href="wchar.html#cb859-8"></a>    <span class="dt">time_t</span> now_secs <span class="op">=</span> time<span class="op">(</span>NULL<span class="op">);</span></span>
<span id="cb859-9"><a href="wchar.html#cb859-9"></a>    <span class="kw">struct</span> tm <span class="op">*</span>now <span class="op">=</span> gmtime<span class="op">(&amp;</span>now_secs<span class="op">);</span></span>
<span id="cb859-10"><a href="wchar.html#cb859-10"></a></span>
<span id="cb859-11"><a href="wchar.html#cb859-11"></a>    <span class="co">// Output timestamp in format &quot;YYYY-MM-DD hh:mm:ss : &quot;</span></span>
<span id="cb859-12"><a href="wchar.html#cb859-12"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%04d</span><span class="st">-</span><span class="sc">%02d</span><span class="st">-</span><span class="sc">%02d</span><span class="st"> </span><span class="sc">%02d</span><span class="st">:</span><span class="sc">%02d</span><span class="st">:</span><span class="sc">%02d</span><span class="st"> : &quot;</span><span class="op">,</span></span>
<span id="cb859-13"><a href="wchar.html#cb859-13"></a>        now<span class="op">-&gt;</span>tm_year <span class="op">+</span> <span class="dv">1900</span><span class="op">,</span> now<span class="op">-&gt;</span>tm_mon <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> now<span class="op">-&gt;</span>tm_mday<span class="op">,</span></span>
<span id="cb859-14"><a href="wchar.html#cb859-14"></a>        now<span class="op">-&gt;</span>tm_hour<span class="op">,</span> now<span class="op">-&gt;</span>tm_min<span class="op">,</span> now<span class="op">-&gt;</span>tm_sec<span class="op">);</span></span>
<span id="cb859-15"><a href="wchar.html#cb859-15"></a></span>
<span id="cb859-16"><a href="wchar.html#cb859-16"></a>    va_start<span class="op">(</span>va<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb859-17"><a href="wchar.html#cb859-17"></a>    <span class="dt">int</span> result <span class="op">=</span> vwprintf<span class="op">(</span>format<span class="op">,</span> va<span class="op">);</span></span>
<span id="cb859-18"><a href="wchar.html#cb859-18"></a>    va_end<span class="op">(</span>va<span class="op">);</span></span>
<span id="cb859-19"><a href="wchar.html#cb859-19"></a></span>
<span id="cb859-20"><a href="wchar.html#cb859-20"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb859-21"><a href="wchar.html#cb859-21"></a></span>
<span id="cb859-22"><a href="wchar.html#cb859-22"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb859-23"><a href="wchar.html#cb859-23"></a><span class="op">}</span></span>
<span id="cb859-24"><a href="wchar.html#cb859-24"></a></span>
<span id="cb859-25"><a href="wchar.html#cb859-25"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb859-26"><a href="wchar.html#cb859-26"></a><span class="op">{</span></span>
<span id="cb859-27"><a href="wchar.html#cb859-27"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb859-28"><a href="wchar.html#cb859-28"></a>    <span class="dt">float</span> y <span class="op">=</span> <span class="fl">3.2</span><span class="op">;</span></span>
<span id="cb859-29"><a href="wchar.html#cb859-29"></a></span>
<span id="cb859-30"><a href="wchar.html#cb859-30"></a>    wlogger<span class="op">(</span><span class="st">L&quot;Hello!&quot;</span><span class="op">);</span></span>
<span id="cb859-31"><a href="wchar.html#cb859-31"></a>    wlogger<span class="op">(</span><span class="st">L&quot;x = </span><span class="sc">%d</span><span class="st"> and y = </span><span class="sc">%.2f</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb859-32"><a href="wchar.html#cb859-32"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb860"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb860-1"><a href="wchar.html#cb860-1" aria-hidden="true" tabindex="-1"></a>2021-03-30 04:25:49 : Hello!</span>
<span id="cb860-2"><a href="wchar.html#cb860-2" aria-hidden="true" tabindex="-1"></a>2021-03-30 04:25:49 : x = 12 and y = 3.20</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-240">See Also</h3>
<p><a href="stdio.html#man-printf"><code>printf()</code></a>, <a href="stdio.html#man-vprintf"><code>vprintf()</code></a></p>
<hr />
<h2 data-number="31.5" id="man-vwscanf"><span class="header-section-number">31.5</span> <code>vwscanf()</code>, <code>vfwscanf()</code>, <code>vswscanf()</code></h2>
<p> </p>
<p><code>wscanf()</code> variants using variable argument lists (<code>va_list</code>)</p>
<h3 class="unnumbered unlisted" id="synopsis-255">Synopsis</h3>
<div class="sourceCode" id="cb861"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb861-1"><a href="wchar.html#cb861-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">   </span><span class="co">// For vfwscanf()</span></span>
<span id="cb861-2"><a href="wchar.html#cb861-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb861-3"><a href="wchar.html#cb861-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb861-4"><a href="wchar.html#cb861-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb861-5"><a href="wchar.html#cb861-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> vwscanf<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span> <span class="dt">va_list</span> arg<span class="op">);</span></span>
<span id="cb861-6"><a href="wchar.html#cb861-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb861-7"><a href="wchar.html#cb861-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> vfwscanf<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span> <span class="dt">restrict</span> stream<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span></span>
<span id="cb861-8"><a href="wchar.html#cb861-8" aria-hidden="true" tabindex="-1"></a>             <span class="dt">va_list</span> arg<span class="op">);</span> </span>
<span id="cb861-9"><a href="wchar.html#cb861-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb861-10"><a href="wchar.html#cb861-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> vswscanf<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span></span>
<span id="cb861-11"><a href="wchar.html#cb861-11" aria-hidden="true" tabindex="-1"></a>             <span class="dt">va_list</span> arg<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-255">Description</h3>
<p>These are the wide counterparts to the <a href="stdio.html#man-vscanf"><code>vscanf()</code></a> collection of functions. See their <a href="stdio.html#man-vscanf">reference page for details</a>.</p>
<h3 class="unnumbered unlisted" id="return-value-253">Return Value</h3>
<p>Returns the number of items successfully scanned, or <code>EOF</code> on some kind of input failure.</p>
<h3 class="unnumbered unlisted" id="example-257">Example</h3>
<p>I have to admit I was wracking my brain to think of when you’d ever want to use this. The best example I could find was <a href="https://stackoverflow.com/questions/17017331/c99-vscanf-for-dummies/17018046#17018046">one on Stack Overflow</a><a href="wctype.html#fn79" class="footnote-ref" id="fnref79" role="doc-noteref"><sup>79</sup></a> that error-checks the return value from <code>scanf()</code> against the expected. A variant of that is shown below.</p>
<div class="sourceCode" id="cb862"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb862-1"><a href="wchar.html#cb862-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb862-2"><a href="wchar.html#cb862-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb862-3"><a href="wchar.html#cb862-3"></a><span class="pp">#include </span><span class="im">&lt;assert.h&gt;</span></span>
<span id="cb862-4"><a href="wchar.html#cb862-4"></a></span>
<span id="cb862-5"><a href="wchar.html#cb862-5"></a><span class="dt">int</span> error_check_wscanf<span class="op">(</span><span class="dt">int</span> expected_count<span class="op">,</span> <span class="dt">wchar_t</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb862-6"><a href="wchar.html#cb862-6"></a><span class="op">{</span></span>
<span id="cb862-7"><a href="wchar.html#cb862-7"></a>    <span class="dt">va_list</span> va<span class="op">;</span></span>
<span id="cb862-8"><a href="wchar.html#cb862-8"></a></span>
<span id="cb862-9"><a href="wchar.html#cb862-9"></a>    va_start<span class="op">(</span>va<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb862-10"><a href="wchar.html#cb862-10"></a>    <span class="dt">int</span> count <span class="op">=</span> vwscanf<span class="op">(</span>format<span class="op">,</span> va<span class="op">);</span></span>
<span id="cb862-11"><a href="wchar.html#cb862-11"></a>    va_end<span class="op">(</span>va<span class="op">);</span></span>
<span id="cb862-12"><a href="wchar.html#cb862-12"></a></span>
<span id="cb862-13"><a href="wchar.html#cb862-13"></a>    <span class="co">// This line will crash the program if the condition is false:</span></span>
<span id="cb862-14"><a href="wchar.html#cb862-14"></a>    assert<span class="op">(</span>count <span class="op">==</span> expected_count<span class="op">);</span></span>
<span id="cb862-15"><a href="wchar.html#cb862-15"></a></span>
<span id="cb862-16"><a href="wchar.html#cb862-16"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb862-17"><a href="wchar.html#cb862-17"></a><span class="op">}</span></span>
<span id="cb862-18"><a href="wchar.html#cb862-18"></a></span>
<span id="cb862-19"><a href="wchar.html#cb862-19"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb862-20"><a href="wchar.html#cb862-20"></a><span class="op">{</span></span>
<span id="cb862-21"><a href="wchar.html#cb862-21"></a>    <span class="dt">int</span> a<span class="op">,</span> b<span class="op">;</span></span>
<span id="cb862-22"><a href="wchar.html#cb862-22"></a>    <span class="dt">float</span> c<span class="op">;</span></span>
<span id="cb862-23"><a href="wchar.html#cb862-23"></a></span>
<span id="cb862-24"><a href="wchar.html#cb862-24"></a>    error_check_wscanf<span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="st">L&quot;</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">/</span><span class="sc">%f</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>a<span class="op">,</span> <span class="op">&amp;</span>b<span class="op">,</span> <span class="op">&amp;</span>c<span class="op">);</span></span>
<span id="cb862-25"><a href="wchar.html#cb862-25"></a>    error_check_wscanf<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="st">L&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>a<span class="op">);</span></span>
<span id="cb862-26"><a href="wchar.html#cb862-26"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-241">See Also</h3>
<p><a href="wchar.html#man-wscanf"><code>wscanf()</code></a></p>
<hr />
<h2 data-number="31.6" id="man-getwc"><span class="header-section-number">31.6</span> <code>getwc()</code> <code>fgetwc()</code> <code>getwchar()</code></h2>
<p> </p>
<p>Get a wide character from an input stream</p>
<h3 class="unnumbered unlisted" id="synopsis-256">Synopsis</h3>
<div class="sourceCode" id="cb863"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb863-1"><a href="wchar.html#cb863-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">   </span><span class="co">// For getwc() and fgetwc()</span></span>
<span id="cb863-2"><a href="wchar.html#cb863-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb863-3"><a href="wchar.html#cb863-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-4"><a href="wchar.html#cb863-4" aria-hidden="true" tabindex="-1"></a><span class="dt">wint_t</span> getwchar<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb863-5"><a href="wchar.html#cb863-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-6"><a href="wchar.html#cb863-6" aria-hidden="true" tabindex="-1"></a><span class="dt">wint_t</span> getwc<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span>stream<span class="op">);</span></span>
<span id="cb863-7"><a href="wchar.html#cb863-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-8"><a href="wchar.html#cb863-8" aria-hidden="true" tabindex="-1"></a><span class="dt">wint_t</span> fgetwc<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span>stream<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-256">Description</h3>
<p>These are the wide variants of <a href="stdio.html#man-getc"><code>fgetc()</code></a>.</p>
<p><code>fgetwc()</code> and <code>getwc()</code> are identical except that <code>getwc()</code> might be implemented as a macro and is allowed to evaluate <code>stream</code> multiple times.</p>
<p><code>getwchar()</code> is identical to <code>getwc()</code> with <code>stream</code> set to <code>stdin</code>.</p>
<p>I don’t know why you’d ever use <code>getwc()</code> instead of <code>fgetwc()</code>, but if anyone knows, drop me a line.</p>
<h3 class="unnumbered unlisted" id="return-value-254">Return Value</h3>
<p>Returns the next wide character in the input stream. Return <code>WEOF</code> on end-of-file or error.</p>
<p>If an I/O error occurs, the error flag is also set on the stream.</p>
<p>If an invalid byte sequence is encountered, <code>errno</code> is set to <code>ILSEQ</code>.</p>
<h3 class="unnumbered unlisted" id="example-258">Example</h3>
<p>Reads all the characters from a file, outputting only the letter ’b’s it finds in the file:</p>
<div class="sourceCode" id="cb864"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb864-1"><a href="wchar.html#cb864-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb864-2"><a href="wchar.html#cb864-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb864-3"><a href="wchar.html#cb864-3"></a></span>
<span id="cb864-4"><a href="wchar.html#cb864-4"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb864-5"><a href="wchar.html#cb864-5"></a><span class="op">{</span></span>
<span id="cb864-6"><a href="wchar.html#cb864-6"></a>    <span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">;</span></span>
<span id="cb864-7"><a href="wchar.html#cb864-7"></a>    <span class="dt">wint_t</span> c<span class="op">;</span></span>
<span id="cb864-8"><a href="wchar.html#cb864-8"></a></span>
<span id="cb864-9"><a href="wchar.html#cb864-9"></a>    fp <span class="op">=</span> fopen<span class="op">(</span><span class="st">&quot;datafile.txt&quot;</span><span class="op">,</span> <span class="st">&quot;r&quot;</span><span class="op">);</span> <span class="co">// error check this!</span></span>
<span id="cb864-10"><a href="wchar.html#cb864-10"></a></span>
<span id="cb864-11"><a href="wchar.html#cb864-11"></a>    <span class="co">// this while-statement assigns into c, and then checks against EOF:</span></span>
<span id="cb864-12"><a href="wchar.html#cb864-12"></a></span>
<span id="cb864-13"><a href="wchar.html#cb864-13"></a>    <span class="cf">while</span><span class="op">((</span>c <span class="op">=</span> fgetc<span class="op">(</span>fp<span class="op">))</span> <span class="op">!=</span> WEOF<span class="op">)</span> </span>
<span id="cb864-14"><a href="wchar.html#cb864-14"></a>        <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">L&#39;b&#39;</span><span class="op">)</span></span>
<span id="cb864-15"><a href="wchar.html#cb864-15"></a>            fputwc<span class="op">(</span>c<span class="op">,</span> stdout<span class="op">);</span></span>
<span id="cb864-16"><a href="wchar.html#cb864-16"></a></span>
<span id="cb864-17"><a href="wchar.html#cb864-17"></a>    fclose<span class="op">(</span>fp<span class="op">);</span></span>
<span id="cb864-18"><a href="wchar.html#cb864-18"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-242">See Also</h3>
<p><a href="wchar.html#man-putwc"><code>fputwc</code></a>, <a href="wchar.html#man-fgetws"><code>fgetws</code></a>, <a href="errno.html#errno"><code>errno</code></a></p>
<hr />
<h2 data-number="31.7" id="man-fgetws"><span class="header-section-number">31.7</span> <code>fgetws()</code></h2>
<p></p>
<p>Read a wide string from a file</p>
<h3 class="unnumbered unlisted" id="synopsis-257">Synopsis</h3>
<div class="sourceCode" id="cb865"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb865-1"><a href="wchar.html#cb865-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb865-2"><a href="wchar.html#cb865-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb865-3"><a href="wchar.html#cb865-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb865-4"><a href="wchar.html#cb865-4" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>fgetws<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">FILE</span> <span class="op">*</span> <span class="dt">restrict</span> stream<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-257">Description</h3>
<p>This is the wide version of <a href="stdio.html#man-gets"><code>fgets()</code></a>. See <a href="stdio.html#man-gets">its reference page for details</a>.</p>
<p>A wide <code>NUL</code> character is used to terminate the string.</p>
<h3 class="unnumbered unlisted" id="return-value-255">Return Value</h3>
<p>Returns <code>s</code> on success, or a <code>NULL</code> pointer on end-of-file or error.</p>
<h3 class="unnumbered unlisted" id="example-259">Example</h3>
<p>The following example reads lines from a file and prepends them with numbers:</p>
<div class="sourceCode" id="cb866"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb866-1"><a href="wchar.html#cb866-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb866-2"><a href="wchar.html#cb866-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb866-3"><a href="wchar.html#cb866-3"></a></span>
<span id="cb866-4"><a href="wchar.html#cb866-4"></a><span class="pp">#define BUF_SIZE </span><span class="dv">1024</span></span>
<span id="cb866-5"><a href="wchar.html#cb866-5"></a></span>
<span id="cb866-6"><a href="wchar.html#cb866-6"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb866-7"><a href="wchar.html#cb866-7"></a><span class="op">{</span></span>
<span id="cb866-8"><a href="wchar.html#cb866-8"></a>    <span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">;</span></span>
<span id="cb866-9"><a href="wchar.html#cb866-9"></a>    <span class="dt">wchar_t</span> buf<span class="op">[</span>BUF_SIZE<span class="op">];</span></span>
<span id="cb866-10"><a href="wchar.html#cb866-10"></a></span>
<span id="cb866-11"><a href="wchar.html#cb866-11"></a>    fp <span class="op">=</span> fopen<span class="op">(</span><span class="st">&quot;textfile.txt&quot;</span><span class="op">,</span> <span class="st">&quot;r&quot;</span><span class="op">);</span> <span class="co">// error check this!</span></span>
<span id="cb866-12"><a href="wchar.html#cb866-12"></a></span>
<span id="cb866-13"><a href="wchar.html#cb866-13"></a>    <span class="dt">int</span> line_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb866-14"><a href="wchar.html#cb866-14"></a></span>
<span id="cb866-15"><a href="wchar.html#cb866-15"></a>    <span class="cf">while</span> <span class="op">((</span>fgetws<span class="op">(</span>buf<span class="op">,</span> BUF_SIZE<span class="op">,</span> fp<span class="op">))</span> <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb866-16"><a href="wchar.html#cb866-16"></a>        wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%04d</span><span class="st">: </span><span class="sc">%ls</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">++</span>line_count<span class="op">,</span> buf<span class="op">);</span></span>
<span id="cb866-17"><a href="wchar.html#cb866-17"></a></span>
<span id="cb866-18"><a href="wchar.html#cb866-18"></a>    fclose<span class="op">(</span>fp<span class="op">);</span></span>
<span id="cb866-19"><a href="wchar.html#cb866-19"></a><span class="op">}</span></span></code></pre></div>
<p>Example output for a file with these lines in them (without the prepended numbers):</p>
<div class="sourceCode" id="cb867"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb867-1"><a href="wchar.html#cb867-1" aria-hidden="true" tabindex="-1"></a>0001: line 1</span>
<span id="cb867-2"><a href="wchar.html#cb867-2" aria-hidden="true" tabindex="-1"></a>0002: line 2</span>
<span id="cb867-3"><a href="wchar.html#cb867-3" aria-hidden="true" tabindex="-1"></a>0003: something</span>
<span id="cb867-4"><a href="wchar.html#cb867-4" aria-hidden="true" tabindex="-1"></a>0004: line 4</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-243">See Also</h3>
<p><a href="wchar.html#man-getwc"><code>fgetwc()</code></a>, <a href="stdio.html#man-gets"><code>fgets()</code></a></p>
<hr />
<h2 data-number="31.8" id="man-putwc"><span class="header-section-number">31.8</span> <code>putwchar()</code> <code>putwc()</code> <code>fputwc()</code></h2>
<p> </p>
<p>Write a single wide character to the console or to a file</p>
<h3 class="unnumbered unlisted" id="synopsis-258">Synopsis</h3>
<div class="sourceCode" id="cb868"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb868-1"><a href="wchar.html#cb868-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">   </span><span class="co">// For putwc() and fputwc()</span></span>
<span id="cb868-2"><a href="wchar.html#cb868-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb868-3"><a href="wchar.html#cb868-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb868-4"><a href="wchar.html#cb868-4" aria-hidden="true" tabindex="-1"></a><span class="dt">wint_t</span> putwchar<span class="op">(</span><span class="dt">wchar_t</span> c<span class="op">);</span></span>
<span id="cb868-5"><a href="wchar.html#cb868-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb868-6"><a href="wchar.html#cb868-6" aria-hidden="true" tabindex="-1"></a><span class="dt">wint_t</span> putwc<span class="op">(</span><span class="dt">wchar_t</span> c<span class="op">,</span> <span class="dt">FILE</span> <span class="op">*</span>stream<span class="op">);</span></span>
<span id="cb868-7"><a href="wchar.html#cb868-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb868-8"><a href="wchar.html#cb868-8" aria-hidden="true" tabindex="-1"></a><span class="dt">wint_t</span> fputwc<span class="op">(</span><span class="dt">wchar_t</span> c<span class="op">,</span> <span class="dt">FILE</span> <span class="op">*</span>stream<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-258">Description</h3>
<p>These are the wide character equivalents to the <a href="stdio.html#man-putc">‘fputc()’</a> group of functions. You can find more information <a href="stdio.html#man-putc">‘in that reference section’</a>.</p>
<p><code>fputwc()</code> and <code>putwc()</code> are identical except that <code>putwc()</code> might be implemented as a macro and is allowed to evaluate <code>stream</code> multiple times.</p>
<p><code>putwchar()</code> is identical to <code>putwc()</code> with <code>stream</code> set to <code>stdin</code>.</p>
<p>I don’t know why you’d ever use <code>putwc()</code> instead of <code>fputwc()</code>, but if anyone knows, drop me a line.</p>
<h3 class="unnumbered unlisted" id="return-value-256">Return Value</h3>
<p>Returns the wide character written, or <code>WEOF</code> on error.</p>
<p>If it’s an I/O error, the error flag will be set for the stream.</p>
<p>If it’s an encoding error, <code>errno</code> will be set to <code>EILSEQ</code>.</p>
<h3 class="unnumbered unlisted" id="example-260">Example</h3>
<p>Read all characters from a file, outputting only the letter ’b’s it finds in the file:</p>
<div class="sourceCode" id="cb869"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb869-1"><a href="wchar.html#cb869-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb869-2"><a href="wchar.html#cb869-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb869-3"><a href="wchar.html#cb869-3"></a></span>
<span id="cb869-4"><a href="wchar.html#cb869-4"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb869-5"><a href="wchar.html#cb869-5"></a><span class="op">{</span></span>
<span id="cb869-6"><a href="wchar.html#cb869-6"></a>    <span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">;</span></span>
<span id="cb869-7"><a href="wchar.html#cb869-7"></a>    <span class="dt">wint_t</span> c<span class="op">;</span></span>
<span id="cb869-8"><a href="wchar.html#cb869-8"></a></span>
<span id="cb869-9"><a href="wchar.html#cb869-9"></a>    fp <span class="op">=</span> fopen<span class="op">(</span><span class="st">&quot;datafile.txt&quot;</span><span class="op">,</span> <span class="st">&quot;r&quot;</span><span class="op">);</span> <span class="co">// error check this!</span></span>
<span id="cb869-10"><a href="wchar.html#cb869-10"></a></span>
<span id="cb869-11"><a href="wchar.html#cb869-11"></a>    <span class="co">// this while-statement assigns into c, and then checks against EOF:</span></span>
<span id="cb869-12"><a href="wchar.html#cb869-12"></a></span>
<span id="cb869-13"><a href="wchar.html#cb869-13"></a>    <span class="cf">while</span><span class="op">((</span>c <span class="op">=</span> fgetc<span class="op">(</span>fp<span class="op">))</span> <span class="op">!=</span> WEOF<span class="op">)</span> </span>
<span id="cb869-14"><a href="wchar.html#cb869-14"></a>        <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">L&#39;b&#39;</span><span class="op">)</span></span>
<span id="cb869-15"><a href="wchar.html#cb869-15"></a>            fputwc<span class="op">(</span>c<span class="op">,</span> stdout<span class="op">);</span></span>
<span id="cb869-16"><a href="wchar.html#cb869-16"></a></span>
<span id="cb869-17"><a href="wchar.html#cb869-17"></a>    fclose<span class="op">(</span>fp<span class="op">);</span></span>
<span id="cb869-18"><a href="wchar.html#cb869-18"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-244">See Also</h3>
<p><a href="wchar.html#man-getwc"><code>fgetwc()</code></a>, <a href="stdio.html#man-putc"><code>fputc()</code></a>, <a href="errno.html#errno"><code>errno</code></a></p>
<hr />
<h2 data-number="31.9" id="man-fputws"><span class="header-section-number">31.9</span> <code>fputws()</code></h2>
<p></p>
<p>Write a wide string to a file</p>
<h3 class="unnumbered unlisted" id="synopsis-259">Synopsis</h3>
<div class="sourceCode" id="cb870"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb870-1"><a href="wchar.html#cb870-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb870-2"><a href="wchar.html#cb870-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb870-3"><a href="wchar.html#cb870-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb870-4"><a href="wchar.html#cb870-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fputws<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span> <span class="dt">FILE</span> <span class="op">*</span> <span class="dt">restrict</span> stream<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-259">Description</h3>
<p>This is the wide version of <a href="stdio.html#man-puts"><code>fputs()</code></a>.</p>
<p>Pass in a wide string and an output stream, and it will so be written.</p>
<h3 class="unnumbered unlisted" id="return-value-257">Return Value</h3>
<p>Returns a non-negative value on success, or <code>EOF</code> on error.</p>
<h3 class="unnumbered unlisted" id="example-261">Example</h3>
<div class="sourceCode" id="cb871"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb871-1"><a href="wchar.html#cb871-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb871-2"><a href="wchar.html#cb871-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb871-3"><a href="wchar.html#cb871-3"></a></span>
<span id="cb871-4"><a href="wchar.html#cb871-4"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb871-5"><a href="wchar.html#cb871-5"></a><span class="op">{</span></span>
<span id="cb871-6"><a href="wchar.html#cb871-6"></a>    fputws<span class="op">(</span><span class="st">L&quot;Hello, world!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> stdout<span class="op">);</span></span>
<span id="cb871-7"><a href="wchar.html#cb871-7"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-245">See Also</h3>
<p><a href="wchar.html#man-putwc"><code>fputwc()</code></a> <a href="stdio.html#man-puts"><code>fputs()</code></a></p>
<hr />
<h2 data-number="31.10" id="man-fwide"><span class="header-section-number">31.10</span> <code>fwide()</code></h2>
<p></p>
<p>Get or set the orientation of the stream</p>
<h3 class="unnumbered unlisted" id="synopsis-260">Synopsis</h3>
<div class="sourceCode" id="cb872"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb872-1"><a href="wchar.html#cb872-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb872-2"><a href="wchar.html#cb872-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb872-3"><a href="wchar.html#cb872-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb872-4"><a href="wchar.html#cb872-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fwide<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span>stream<span class="op">,</span> <span class="dt">int</span> mode<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-260">Description</h3>
<p>Streams can be either wide-oriented (meaning the wide functions are in use) or byte-oriented (that the regular multibyte functions are in use). Or, before an orientation is chosen, unoriented.</p>
<p>There are two ways to set the orientation of an unoriented stream:</p>
<ul>
<li><p>Implicitly: just use a function like <code>printf()</code> (byte oriented) or <code>wprintf()</code> (wide oriented), and the orientation will be set.</p></li>
<li><p>Explicitly: use this function to set it.</p></li>
</ul>
<p>You can set the orientation for the stream by passing different numbers to <code>mode</code>:</p>
<table>
<thead>
<tr class="header">
<th><code>mode</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0</code></td>
<td>Do not alter the orientation</td>
</tr>
<tr class="even">
<td><code>-1</code></td>
<td>Set stream to byte-oriented</td>
</tr>
<tr class="odd">
<td><code>1</code></td>
<td>Set stream to wide-oriented</td>
</tr>
</tbody>
</table>
<p>(I said <code>-1</code> and <code>1</code> there, but really it could be any positive or negative number.)</p>
<p>Most people choose the wide or byte functions (<code>printf()</code> or <code>wprintf()</code>) and just start using them and never use <code>fwide()</code> to set the orientation.</p>
<p>And once the orientation is set, you can’t change it. So you can’t use <code>fwide()</code> for that, either.</p>
<p>So what can you use it for?</p>
<p>You can <em>test</em> to see what orientation a stream is in by passing <code>0</code> as the <code>mode</code> and checking the return value.</p>
<h3 class="unnumbered unlisted" id="return-value-258">Return Value</h3>
<p>Returns greater than zero if the stream is wide-oriented.</p>
<p>Returns less than zero if the stream is byte-oriented.</p>
<p>Returns zero if the stream is unoriented.</p>
<h3 class="unnumbered unlisted" id="example-262">Example</h3>
<p>Example setting to byte-oriented:</p>
<div class="sourceCode" id="cb873"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb873-1"><a href="wchar.html#cb873-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb873-2"><a href="wchar.html#cb873-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb873-3"><a href="wchar.html#cb873-3"></a></span>
<span id="cb873-4"><a href="wchar.html#cb873-4"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb873-5"><a href="wchar.html#cb873-5"></a><span class="op">{</span></span>
<span id="cb873-6"><a href="wchar.html#cb873-6"></a>    printf<span class="op">(</span><span class="st">&quot;Hello world!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span>  <span class="co">// Implicitly set to byte</span></span>
<span id="cb873-7"><a href="wchar.html#cb873-7"></a></span>
<span id="cb873-8"><a href="wchar.html#cb873-8"></a>    <span class="dt">int</span> mode <span class="op">=</span> fwide<span class="op">(</span>stdout<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb873-9"><a href="wchar.html#cb873-9"></a></span>
<span id="cb873-10"><a href="wchar.html#cb873-10"></a>    printf<span class="op">(</span><span class="st">&quot;Stream is </span><span class="sc">%s</span><span class="st">-oriented</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> mode <span class="op">&lt;</span> <span class="dv">0</span><span class="op">?</span> <span class="st">&quot;byte&quot;</span><span class="op">:</span> <span class="st">&quot;wide&quot;</span><span class="op">);</span></span>
<span id="cb873-11"><a href="wchar.html#cb873-11"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb874"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb874-1"><a href="wchar.html#cb874-1" aria-hidden="true" tabindex="-1"></a>Hello world!</span>
<span id="cb874-2"><a href="wchar.html#cb874-2" aria-hidden="true" tabindex="-1"></a>Stream is byte-oriented</span></code></pre></div>
<p>Example setting to wide-oriented:</p>
<div class="sourceCode" id="cb875"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb875-1"><a href="wchar.html#cb875-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb875-2"><a href="wchar.html#cb875-2"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb875-3"><a href="wchar.html#cb875-3"></a></span>
<span id="cb875-4"><a href="wchar.html#cb875-4"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb875-5"><a href="wchar.html#cb875-5"></a><span class="op">{</span></span>
<span id="cb875-6"><a href="wchar.html#cb875-6"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Hello world!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span>  <span class="co">// Implicitly set to wide</span></span>
<span id="cb875-7"><a href="wchar.html#cb875-7"></a></span>
<span id="cb875-8"><a href="wchar.html#cb875-8"></a>    <span class="dt">int</span> mode <span class="op">=</span> fwide<span class="op">(</span>stdout<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb875-9"><a href="wchar.html#cb875-9"></a></span>
<span id="cb875-10"><a href="wchar.html#cb875-10"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Stream is </span><span class="sc">%ls</span><span class="st">-oriented</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> mode <span class="op">&lt;</span> <span class="dv">0</span><span class="op">?</span> <span class="st">L&quot;byte&quot;</span><span class="op">:</span> <span class="st">L&quot;wide&quot;</span><span class="op">);</span></span>
<span id="cb875-11"><a href="wchar.html#cb875-11"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb876"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb876-1"><a href="wchar.html#cb876-1" aria-hidden="true" tabindex="-1"></a>Hello world!</span>
<span id="cb876-2"><a href="wchar.html#cb876-2" aria-hidden="true" tabindex="-1"></a>Stream is wide-oriented</span></code></pre></div>
<!--
### See Also {.unnumbered .unlisted}

[`example()`](#man-example),
-->
<hr />
<h2 data-number="31.11" id="man-ungetwc"><span class="header-section-number">31.11</span> <code>ungetwc()</code></h2>
<p></p>
<p>Pushes a wide character back into the input stream</p>
<h3 class="unnumbered unlisted" id="synopsis-261">Synopsis</h3>
<div class="sourceCode" id="cb877"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb877-1"><a href="wchar.html#cb877-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb877-2"><a href="wchar.html#cb877-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb877-3"><a href="wchar.html#cb877-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb877-4"><a href="wchar.html#cb877-4" aria-hidden="true" tabindex="-1"></a><span class="dt">wint_t</span> ungetwc<span class="op">(</span><span class="dt">wint_t</span> c<span class="op">,</span> <span class="dt">FILE</span> <span class="op">*</span>stream<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-261">Description</h3>
<p>This is the wide character variant of <a href="stdio.html#man-ungetc"><code>ungetc()</code></a>.</p>
<p>It performs the reverse operation of <a href="wchar.html#man-getwc"><code>fgetwc()</code></a>, pushing a character back on the input stream.</p>
<p>The spec guarantees you can do this one time in a row. You can probably do it more times, but it’s up to the implementation. If you do too many calls without an intervening read, an error could be returned.</p>
<p>Setting the file position discards any characters pushed by <code>ungetwc()</code> without being subsequently read.</p>
<p>The end-of-file flag is cleared after a successful call.</p>
<h3 class="unnumbered unlisted" id="return-value-259">Return Value</h3>
<p>Returns the value of the pushed character on success, or <code>WEOF</code> on failure.</p>
<h3 class="unnumbered unlisted" id="example-263">Example</h3>
<p>This example reads a piece of punctuation, then everything after it up to the next piece of punctuation. It returns the leading punctuation, and stores the rest in a string.</p>
<div class="sourceCode" id="cb878"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb878-1"><a href="wchar.html#cb878-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb878-2"><a href="wchar.html#cb878-2"></a><span class="pp">#include </span><span class="im">&lt;wctype.h&gt;</span></span>
<span id="cb878-3"><a href="wchar.html#cb878-3"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb878-4"><a href="wchar.html#cb878-4"></a></span>
<span id="cb878-5"><a href="wchar.html#cb878-5"></a><span class="dt">wint_t</span> read_punctstring<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">,</span> <span class="dt">wchar_t</span> <span class="op">*</span>s<span class="op">)</span></span>
<span id="cb878-6"><a href="wchar.html#cb878-6"></a><span class="op">{</span></span>
<span id="cb878-7"><a href="wchar.html#cb878-7"></a>    <span class="dt">wint_t</span> origpunct<span class="op">,</span> c<span class="op">;</span></span>
<span id="cb878-8"><a href="wchar.html#cb878-8"></a>    </span>
<span id="cb878-9"><a href="wchar.html#cb878-9"></a>    origpunct <span class="op">=</span> fgetwc<span class="op">(</span>fp<span class="op">);</span></span>
<span id="cb878-10"><a href="wchar.html#cb878-10"></a></span>
<span id="cb878-11"><a href="wchar.html#cb878-11"></a>    <span class="cf">if</span> <span class="op">(</span>origpunct <span class="op">==</span> WEOF<span class="op">)</span>  <span class="co">// return EOF on end-of-file</span></span>
<span id="cb878-12"><a href="wchar.html#cb878-12"></a>        <span class="cf">return</span> WEOF<span class="op">;</span></span>
<span id="cb878-13"><a href="wchar.html#cb878-13"></a></span>
<span id="cb878-14"><a href="wchar.html#cb878-14"></a>    <span class="cf">while</span> <span class="op">(</span>c <span class="op">=</span> fgetwc<span class="op">(</span>fp<span class="op">),</span> <span class="op">!</span>iswpunct<span class="op">(</span>c<span class="op">)</span> <span class="op">&amp;&amp;</span> c <span class="op">!=</span> WEOF<span class="op">)</span></span>
<span id="cb878-15"><a href="wchar.html#cb878-15"></a>        <span class="op">*</span>s<span class="op">++</span> <span class="op">=</span> c<span class="op">;</span>  <span class="co">// save it in the string</span></span>
<span id="cb878-16"><a href="wchar.html#cb878-16"></a></span>
<span id="cb878-17"><a href="wchar.html#cb878-17"></a>    <span class="op">*</span>s <span class="op">=</span> <span class="ch">L&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> <span class="co">// nul-terminate the string</span></span>
<span id="cb878-18"><a href="wchar.html#cb878-18"></a></span>
<span id="cb878-19"><a href="wchar.html#cb878-19"></a>    <span class="co">// if we read punctuation last, ungetc it so we can fgetc it next</span></span>
<span id="cb878-20"><a href="wchar.html#cb878-20"></a>    <span class="co">// time:</span></span>
<span id="cb878-21"><a href="wchar.html#cb878-21"></a>    <span class="cf">if</span> <span class="op">(</span>iswpunct<span class="op">(</span>c<span class="op">))</span></span>
<span id="cb878-22"><a href="wchar.html#cb878-22"></a>        ungetwc<span class="op">(</span>c<span class="op">,</span> fp<span class="op">);</span></span>
<span id="cb878-23"><a href="wchar.html#cb878-23"></a></span>
<span id="cb878-24"><a href="wchar.html#cb878-24"></a>    <span class="cf">return</span> origpunct<span class="op">;</span></span>
<span id="cb878-25"><a href="wchar.html#cb878-25"></a><span class="op">}</span></span>
<span id="cb878-26"><a href="wchar.html#cb878-26"></a></span>
<span id="cb878-27"><a href="wchar.html#cb878-27"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb878-28"><a href="wchar.html#cb878-28"></a><span class="op">{</span></span>
<span id="cb878-29"><a href="wchar.html#cb878-29"></a>    <span class="dt">wchar_t</span> s<span class="op">[</span><span class="dv">128</span><span class="op">];</span></span>
<span id="cb878-30"><a href="wchar.html#cb878-30"></a>    <span class="dt">wint_t</span> c<span class="op">;</span></span>
<span id="cb878-31"><a href="wchar.html#cb878-31"></a></span>
<span id="cb878-32"><a href="wchar.html#cb878-32"></a>    <span class="cf">while</span> <span class="op">((</span>c <span class="op">=</span> read_punctstring<span class="op">(</span>stdin<span class="op">,</span> s<span class="op">))</span> <span class="op">!=</span> WEOF<span class="op">)</span> <span class="op">{</span></span>
<span id="cb878-33"><a href="wchar.html#cb878-33"></a>        wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%lc</span><span class="st">: </span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> c<span class="op">,</span> s<span class="op">);</span></span>
<span id="cb878-34"><a href="wchar.html#cb878-34"></a>    <span class="op">}</span></span>
<span id="cb878-35"><a href="wchar.html#cb878-35"></a><span class="op">}</span></span></code></pre></div>
<p>Sample Input:</p>
<div class="sourceCode" id="cb879"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb879-1"><a href="wchar.html#cb879-1" aria-hidden="true" tabindex="-1"></a>!foo#bar*baz</span></code></pre></div>
<p>Sample output:</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb880-1"><a href="wchar.html#cb880-1" aria-hidden="true" tabindex="-1"></a>!: foo</span>
<span id="cb880-2"><a href="wchar.html#cb880-2" aria-hidden="true" tabindex="-1"></a>#: bar</span>
<span id="cb880-3"><a href="wchar.html#cb880-3" aria-hidden="true" tabindex="-1"></a>*: baz</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-246">See Also</h3>
<p><a href="wchar.html#man-getwc"><code>fgetwc()</code></a>, <a href="stdio.html#man-ungetc"><code>ungetc()</code></a></p>
<hr />
<h2 data-number="31.12" id="man-wcstod"><span class="header-section-number">31.12</span> <code>wcstod()</code> <code>wcstof()</code> <code>wcstold()</code></h2>
<p> </p>
<p>Convert a wide string to a floating point number</p>
<h3 class="unnumbered unlisted" id="synopsis-262">Synopsis</h3>
<div class="sourceCode" id="cb881"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb881-1"><a href="wchar.html#cb881-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb881-2"><a href="wchar.html#cb881-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb881-3"><a href="wchar.html#cb881-3" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> wcstod<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> nptr<span class="op">,</span> <span class="dt">wchar_t</span> <span class="op">**</span> <span class="dt">restrict</span> endptr<span class="op">);</span></span>
<span id="cb881-4"><a href="wchar.html#cb881-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb881-5"><a href="wchar.html#cb881-5" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> wcstof<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> nptr<span class="op">,</span> <span class="dt">wchar_t</span> <span class="op">**</span> <span class="dt">restrict</span> endptr<span class="op">);</span></span>
<span id="cb881-6"><a href="wchar.html#cb881-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb881-7"><a href="wchar.html#cb881-7" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> <span class="dt">double</span> wcstold<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> nptr<span class="op">,</span> <span class="dt">wchar_t</span> <span class="op">**</span> <span class="dt">restrict</span> endptr<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-262">Description</h3>
<p>These are the wide counterparts to the <a href="stdlib.html#man-strtod"><code>strtod()</code></a> family of functions. See <a href="stdlib.html#man-strtod">their reference pages for details</a>.</p>
<h3 class="unnumbered unlisted" id="return-value-260">Return Value</h3>
<p>Returns the string converted to a floating point value.</p>
<p>Returns <code>0</code> if there’s no valid number in the string.</p>
<p>On overflow, returns an apporpriately-signed <code>HUGE_VAL</code>, <code>HUGE_VALF</code>. or <code>HUGE_VALL</code> depending on the return type, and <code>errno</code> is set to <code>ERANGE</code>.</p>
<p>On underflow, returns a number no greater than the smallest normalized positive number, appropriately signed. The implemention <em>might</em> set <code>errno</code> to <code>ERANGE</code>.</p>
<h3 class="unnumbered unlisted" id="example-264">Example</h3>
<div class="sourceCode" id="cb882"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb882-1"><a href="wchar.html#cb882-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb882-2"><a href="wchar.html#cb882-2"></a></span>
<span id="cb882-3"><a href="wchar.html#cb882-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb882-4"><a href="wchar.html#cb882-4"></a><span class="op">{</span></span>
<span id="cb882-5"><a href="wchar.html#cb882-5"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>inp <span class="op">=</span> <span class="st">L&quot;   123.4567beej&quot;</span><span class="op">;</span></span>
<span id="cb882-6"><a href="wchar.html#cb882-6"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>badchar<span class="op">;</span></span>
<span id="cb882-7"><a href="wchar.html#cb882-7"></a></span>
<span id="cb882-8"><a href="wchar.html#cb882-8"></a>    <span class="dt">double</span> val <span class="op">=</span> wcstod<span class="op">(</span>inp<span class="op">,</span> <span class="op">&amp;</span>badchar<span class="op">);</span></span>
<span id="cb882-9"><a href="wchar.html#cb882-9"></a></span>
<span id="cb882-10"><a href="wchar.html#cb882-10"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Converted string to </span><span class="sc">%f\n</span><span class="st">&quot;</span><span class="op">,</span> val<span class="op">);</span></span>
<span id="cb882-11"><a href="wchar.html#cb882-11"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Encountered bad characters: </span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> badchar<span class="op">);</span></span>
<span id="cb882-12"><a href="wchar.html#cb882-12"></a></span>
<span id="cb882-13"><a href="wchar.html#cb882-13"></a>    val <span class="op">=</span> wcstod<span class="op">(</span><span class="st">L&quot;987.654321beej&quot;</span><span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb882-14"><a href="wchar.html#cb882-14"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Ignoring bad chars: </span><span class="sc">%f\n</span><span class="st">&quot;</span><span class="op">,</span> val<span class="op">);</span></span>
<span id="cb882-15"><a href="wchar.html#cb882-15"></a></span>
<span id="cb882-16"><a href="wchar.html#cb882-16"></a>    val <span class="op">=</span> wcstod<span class="op">(</span><span class="st">L&quot;11.2233&quot;</span><span class="op">,</span> <span class="op">&amp;</span>badchar<span class="op">);</span></span>
<span id="cb882-17"><a href="wchar.html#cb882-17"></a></span>
<span id="cb882-18"><a href="wchar.html#cb882-18"></a>    <span class="cf">if</span> <span class="op">(*</span>badchar <span class="op">==</span> <span class="ch">L&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span></span>
<span id="cb882-19"><a href="wchar.html#cb882-19"></a>        wprintf<span class="op">(</span><span class="st">L&quot;No bad chars: </span><span class="sc">%f\n</span><span class="st">&quot;</span><span class="op">,</span> val<span class="op">);</span></span>
<span id="cb882-20"><a href="wchar.html#cb882-20"></a>    <span class="cf">else</span></span>
<span id="cb882-21"><a href="wchar.html#cb882-21"></a>        wprintf<span class="op">(</span><span class="st">L&quot;Found bad chars: </span><span class="sc">%f</span><span class="st">, </span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> val<span class="op">,</span> badchar<span class="op">);</span></span>
<span id="cb882-22"><a href="wchar.html#cb882-22"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb883"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb883-1"><a href="wchar.html#cb883-1" aria-hidden="true" tabindex="-1"></a>Converted string to 123.456700</span>
<span id="cb883-2"><a href="wchar.html#cb883-2" aria-hidden="true" tabindex="-1"></a>Encountered bad characters: beej</span>
<span id="cb883-3"><a href="wchar.html#cb883-3" aria-hidden="true" tabindex="-1"></a>Ignoring bad chars: 987.654321</span>
<span id="cb883-4"><a href="wchar.html#cb883-4" aria-hidden="true" tabindex="-1"></a>No bad chars: 11.223300</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-247">See Also</h3>
<p><a href="wchar.html#man-wcstol"><code>wcstol()</code></a>, <a href="stdlib.html#man-strtod"><code>strtod()</code></a>, <a href="errno.html#errno"><code>errno</code></a></p>
<hr />
<h2 data-number="31.13" id="man-wcstol"><span class="header-section-number">31.13</span> <code>wcstol()</code> <code>wcstoll()</code> <code>wcstoul()</code> <code>wcstoull()</code></h2>
<p> </p>
<p>Convert a wide string to an integer value</p>
<h3 class="unnumbered unlisted" id="synopsis-263">Synopsis</h3>
<div class="sourceCode" id="cb884"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb884-1"><a href="wchar.html#cb884-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb884-2"><a href="wchar.html#cb884-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb884-3"><a href="wchar.html#cb884-3" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> <span class="dt">int</span> wcstol<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> nptr<span class="op">,</span></span>
<span id="cb884-4"><a href="wchar.html#cb884-4" aria-hidden="true" tabindex="-1"></a>                <span class="dt">wchar_t</span> <span class="op">**</span> <span class="dt">restrict</span> endptr<span class="op">,</span> <span class="dt">int</span> base<span class="op">);</span></span>
<span id="cb884-5"><a href="wchar.html#cb884-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb884-6"><a href="wchar.html#cb884-6" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> <span class="dt">long</span> <span class="dt">int</span> wcstoll<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> nptr<span class="op">,</span></span>
<span id="cb884-7"><a href="wchar.html#cb884-7" aria-hidden="true" tabindex="-1"></a>                      <span class="dt">wchar_t</span> <span class="op">**</span> <span class="dt">restrict</span> endptr<span class="op">,</span> <span class="dt">int</span> base<span class="op">);</span></span>
<span id="cb884-8"><a href="wchar.html#cb884-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb884-9"><a href="wchar.html#cb884-9" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="dt">long</span> <span class="dt">int</span> wcstoul<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> nptr<span class="op">,</span></span>
<span id="cb884-10"><a href="wchar.html#cb884-10" aria-hidden="true" tabindex="-1"></a>                          <span class="dt">wchar_t</span> <span class="op">**</span> <span class="dt">restrict</span> endptr<span class="op">,</span> <span class="dt">int</span> base<span class="op">);</span></span>
<span id="cb884-11"><a href="wchar.html#cb884-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb884-12"><a href="wchar.html#cb884-12" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="dt">long</span> <span class="dt">long</span> <span class="dt">int</span> wcstoull<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> nptr<span class="op">,</span></span>
<span id="cb884-13"><a href="wchar.html#cb884-13" aria-hidden="true" tabindex="-1"></a>                                <span class="dt">wchar_t</span> <span class="op">**</span> <span class="dt">restrict</span> endptr<span class="op">,</span> <span class="dt">int</span> base<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-263">Description</h3>
<p>These are the wide counterparts to the <a href="stdlib.html#man-strtol"><code>strtol()</code></a> family of functions, so see <a href="stdlib.html#man-strtol">their reference pages for the details</a>.</p>
<h3 class="unnumbered unlisted" id="return-value-261">Return Value</h3>
<p>Returns the integer value of the string.</p>
<p>If nothing can be found, <code>0</code> is returned.</p>
<p>If the result is out of range, the value returned is one of <code>LONG_MIN</code>, <code>LONG_MAX</code>, <code>LLONG_MIN</code>, <code>LLONG_MAX</code>, <code>ULONG_MAX</code> or <code>ULLONG_MAX</code>, as appropriate. And <code>errno</code> is set to <code>ERANGE</code>.</p>
<h3 class="unnumbered unlisted" id="example-265">Example</h3>
<div class="sourceCode" id="cb885"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb885-1"><a href="wchar.html#cb885-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb885-2"><a href="wchar.html#cb885-2"></a></span>
<span id="cb885-3"><a href="wchar.html#cb885-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb885-4"><a href="wchar.html#cb885-4"></a><span class="op">{</span></span>
<span id="cb885-5"><a href="wchar.html#cb885-5"></a>    <span class="co">// All output in decimal (base 10)</span></span>
<span id="cb885-6"><a href="wchar.html#cb885-6"></a></span>
<span id="cb885-7"><a href="wchar.html#cb885-7"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> wcstol<span class="op">(</span><span class="st">L&quot;123&quot;</span><span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">));</span>     <span class="co">// 123</span></span>
<span id="cb885-8"><a href="wchar.html#cb885-8"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> wcstol<span class="op">(</span><span class="st">L&quot;123&quot;</span><span class="op">,</span> NULL<span class="op">,</span> <span class="dv">10</span><span class="op">));</span>    <span class="co">// 123</span></span>
<span id="cb885-9"><a href="wchar.html#cb885-9"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> wcstol<span class="op">(</span><span class="st">L&quot;101010&quot;</span><span class="op">,</span> NULL<span class="op">,</span> <span class="dv">2</span><span class="op">));</span>  <span class="co">// binary, 42</span></span>
<span id="cb885-10"><a href="wchar.html#cb885-10"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> wcstol<span class="op">(</span><span class="st">L&quot;123&quot;</span><span class="op">,</span> NULL<span class="op">,</span> <span class="dv">8</span><span class="op">));</span>     <span class="co">// octal, 83</span></span>
<span id="cb885-11"><a href="wchar.html#cb885-11"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> wcstol<span class="op">(</span><span class="st">L&quot;123&quot;</span><span class="op">,</span> NULL<span class="op">,</span> <span class="dv">16</span><span class="op">));</span>    <span class="co">// hex, 291</span></span>
<span id="cb885-12"><a href="wchar.html#cb885-12"></a></span>
<span id="cb885-13"><a href="wchar.html#cb885-13"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> wcstol<span class="op">(</span><span class="st">L&quot;0123&quot;</span><span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">));</span>    <span class="co">// octal, 83</span></span>
<span id="cb885-14"><a href="wchar.html#cb885-14"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> wcstol<span class="op">(</span><span class="st">L&quot;0x123&quot;</span><span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">));</span>   <span class="co">// hex, 291</span></span>
<span id="cb885-15"><a href="wchar.html#cb885-15"></a></span>
<span id="cb885-16"><a href="wchar.html#cb885-16"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>badchar<span class="op">;</span></span>
<span id="cb885-17"><a href="wchar.html#cb885-17"></a>    <span class="dt">long</span> <span class="dt">int</span> x <span class="op">=</span> wcstol<span class="op">(</span><span class="st">L&quot;   1234beej&quot;</span><span class="op">,</span> <span class="op">&amp;</span>badchar<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb885-18"><a href="wchar.html#cb885-18"></a></span>
<span id="cb885-19"><a href="wchar.html#cb885-19"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Value is </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>                  <span class="co">// Value is 1234</span></span>
<span id="cb885-20"><a href="wchar.html#cb885-20"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Bad chars at </span><span class="sc">\&quot;%ls\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> badchar<span class="op">);</span>    <span class="co">// Bad chars at &quot;beej&quot;</span></span>
<span id="cb885-21"><a href="wchar.html#cb885-21"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb886"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb886-1"><a href="wchar.html#cb886-1" aria-hidden="true" tabindex="-1"></a>123</span>
<span id="cb886-2"><a href="wchar.html#cb886-2" aria-hidden="true" tabindex="-1"></a>123</span>
<span id="cb886-3"><a href="wchar.html#cb886-3" aria-hidden="true" tabindex="-1"></a>42</span>
<span id="cb886-4"><a href="wchar.html#cb886-4" aria-hidden="true" tabindex="-1"></a>83</span>
<span id="cb886-5"><a href="wchar.html#cb886-5" aria-hidden="true" tabindex="-1"></a>291</span>
<span id="cb886-6"><a href="wchar.html#cb886-6" aria-hidden="true" tabindex="-1"></a>83</span>
<span id="cb886-7"><a href="wchar.html#cb886-7" aria-hidden="true" tabindex="-1"></a>291</span>
<span id="cb886-8"><a href="wchar.html#cb886-8" aria-hidden="true" tabindex="-1"></a>Value is 1234</span>
<span id="cb886-9"><a href="wchar.html#cb886-9" aria-hidden="true" tabindex="-1"></a>Bad chars at &quot;beej&quot;</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-248">See Also</h3>
<p><a href="wchar.html#man-wcstod"><code>wcstod()</code></a>, <a href="stdlib.html#man-strtol"><code>strtol()</code></a>, <a href="errno.html#errno"><code>errno</code></a>, <a href="inttypes.html#man-wcstoimax"><code>wcstoimax()</code></a>, <a href="inttypes.html#man-wcstoimax"><code>wcstoumax()</code></a></p>
<hr />
<h2 data-number="31.14" id="man-wcscpy"><span class="header-section-number">31.14</span> <code>wcscpy()</code> <code>wcsncpy()</code></h2>
<p> </p>
<p>Copy a wide string</p>
<h3 class="unnumbered unlisted" id="synopsis-264">Synopsis</h3>
<div class="sourceCode" id="cb887"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb887-1"><a href="wchar.html#cb887-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb887-2"><a href="wchar.html#cb887-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb887-3"><a href="wchar.html#cb887-3" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wcscpy<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s2<span class="op">);</span></span>
<span id="cb887-4"><a href="wchar.html#cb887-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb887-5"><a href="wchar.html#cb887-5" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wcsncpy<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s1<span class="op">,</span></span>
<span id="cb887-6"><a href="wchar.html#cb887-6" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s2<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-264">Description</h3>
<p>These are the wide versions of <a href="stringref.html#man-strcpy"><code>strcpy()</code></a> and <a href="stringref.html#man-strcpy"><code>strncpy()</code></a>.</p>
<p>They’ll copy a string up to a wide NUL. Or, in the case of the safer <code>wcsncpy()</code>, until then or until <code>n</code> wide characters are copied.</p>
<p>If the string in <code>s1</code> is shorter than <code>n</code>, <code>wcsncpy()</code> will pad <code>s2</code> with wide NUL characters until the <code>n</code>th wide character is reached.</p>
<p>Even though <code>wcsncpy()</code> is safer because it will never overrun the end of <code>s2</code> (assuming you set <code>n</code> correctly), it’s still unsafe a NUL is not found in <code>s1</code> in the first <code>n</code> characters. In that case, <code>s2</code> will not be NUL-terminated. Always make sure <code>n</code> is greater than the string length of <code>s1</code>!</p>
<h3 class="unnumbered unlisted" id="return-value-262">Return Value</h3>
<p>Returns <code>s1</code>.</p>
<h3 class="unnumbered unlisted" id="example-266">Example</h3>
<div class="sourceCode" id="cb888"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb888-1"><a href="wchar.html#cb888-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb888-2"><a href="wchar.html#cb888-2"></a></span>
<span id="cb888-3"><a href="wchar.html#cb888-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb888-4"><a href="wchar.html#cb888-4"></a><span class="op">{</span></span>
<span id="cb888-5"><a href="wchar.html#cb888-5"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>s1 <span class="op">=</span> <span class="st">L&quot;Hello!&quot;</span><span class="op">;</span></span>
<span id="cb888-6"><a href="wchar.html#cb888-6"></a>    <span class="dt">wchar_t</span> s2<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb888-7"><a href="wchar.html#cb888-7"></a></span>
<span id="cb888-8"><a href="wchar.html#cb888-8"></a>    wcsncpy<span class="op">(</span>s2<span class="op">,</span> s1<span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb888-9"><a href="wchar.html#cb888-9"></a></span>
<span id="cb888-10"><a href="wchar.html#cb888-10"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">\&quot;%ls\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> s2<span class="op">);</span>  <span class="co">// &quot;Hello!&quot;</span></span>
<span id="cb888-11"><a href="wchar.html#cb888-11"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-249">See Also</h3>
<p><a href="wchar.html#man-wmemcpy"><code>wmemcpy()</code></a>, <a href="wchar.html#man-wmemcpy"><code>wmemmove()</code></a> <a href="stringref.html#man-strcpy"><code>strcpy()</code></a>, <a href="stringref.html#man-strcpy"><code>strncpy()</code></a></p>
<hr />
<h2 data-number="31.15" id="man-wmemcpy"><span class="header-section-number">31.15</span> <code>wmemcpy()</code> <code>wmemmove()</code></h2>
<p> </p>
<p>Copy wide characters</p>
<h3 class="unnumbered unlisted" id="synopsis-265">Synopsis</h3>
<div class="sourceCode" id="cb889"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb889-1"><a href="wchar.html#cb889-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb889-2"><a href="wchar.html#cb889-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb889-3"><a href="wchar.html#cb889-3" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wmemcpy<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s1<span class="op">,</span></span>
<span id="cb889-4"><a href="wchar.html#cb889-4" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s2<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">);</span></span>
<span id="cb889-5"><a href="wchar.html#cb889-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb889-6"><a href="wchar.html#cb889-6" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wmemmove<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-265">Description</h3>
<p>These are the wide versions of <a href="stringref.html#man-memcpy"><code>memcpy()</code></a> and <a href="stringref.html#man-memcpy"><code>memmove()</code></a>.</p>
<p>They copy <code>n</code> wide characters from <code>s2</code> to <code>s1</code>.</p>
<p>They’re the same except that <code>wmemmove()</code> is guaranteed to work with overlapping memory regions, and <code>wmemcpy()</code> is not.</p>
<h3 class="unnumbered unlisted" id="return-value-263">Return Value</h3>
<p>Both functions return the pointer <code>s1</code>.</p>
<h3 class="unnumbered unlisted" id="example-267">Example</h3>
<div class="sourceCode" id="cb890"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb890-1"><a href="wchar.html#cb890-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb890-2"><a href="wchar.html#cb890-2"></a></span>
<span id="cb890-3"><a href="wchar.html#cb890-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb890-4"><a href="wchar.html#cb890-4"></a><span class="op">{</span></span>
<span id="cb890-5"><a href="wchar.html#cb890-5"></a>    <span class="dt">wchar_t</span> s<span class="op">[</span><span class="dv">100</span><span class="op">]</span> <span class="op">=</span> <span class="st">L&quot;Goats&quot;</span><span class="op">;</span></span>
<span id="cb890-6"><a href="wchar.html#cb890-6"></a>    <span class="dt">wchar_t</span> t<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb890-7"><a href="wchar.html#cb890-7"></a></span>
<span id="cb890-8"><a href="wchar.html#cb890-8"></a>    wmemcpy<span class="op">(</span>t<span class="op">,</span> s<span class="op">,</span> <span class="dv">6</span><span class="op">);</span>       <span class="co">// Copy non-overlapping memory</span></span>
<span id="cb890-9"><a href="wchar.html#cb890-9"></a></span>
<span id="cb890-10"><a href="wchar.html#cb890-10"></a>    wmemmove<span class="op">(</span>s <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> s<span class="op">,</span> <span class="dv">6</span><span class="op">);</span>  <span class="co">// Copy overlapping memory</span></span>
<span id="cb890-11"><a href="wchar.html#cb890-11"></a></span>
<span id="cb890-12"><a href="wchar.html#cb890-12"></a>    wprintf<span class="op">(</span><span class="st">L&quot;s is </span><span class="sc">\&quot;%ls\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">);</span></span>
<span id="cb890-13"><a href="wchar.html#cb890-13"></a>    wprintf<span class="op">(</span><span class="st">L&quot;t is </span><span class="sc">\&quot;%ls\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> t<span class="op">);</span></span>
<span id="cb890-14"><a href="wchar.html#cb890-14"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb891"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb891-1"><a href="wchar.html#cb891-1" aria-hidden="true" tabindex="-1"></a>s is &quot;GoGoats&quot;</span>
<span id="cb891-2"><a href="wchar.html#cb891-2" aria-hidden="true" tabindex="-1"></a>t is &quot;Goats&quot;</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-250">See Also</h3>
<p><a href="wchar.html#man-wcscpy"><code>wcscpy()</code></a>, <a href="wchar.html#man-wcscpy"><code>wcsncpy()</code></a>, <a href="stringref.html#man-memcpy"><code>memcpy()</code></a>, <a href="stringref.html#man-memcpy"><code>memmove()</code></a></p>
<hr />
<h2 data-number="31.16" id="man-wcscat"><span class="header-section-number">31.16</span> <code>wcscat()</code> <code>wcsncat()</code></h2>
<p> </p>
<p>Concatenate wide strings</p>
<h3 class="unnumbered unlisted" id="synopsis-266">Synopsis</h3>
<div class="sourceCode" id="cb892"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb892-1"><a href="wchar.html#cb892-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb892-2"><a href="wchar.html#cb892-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-3"><a href="wchar.html#cb892-3" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wcscat<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s2<span class="op">);</span></span>
<span id="cb892-4"><a href="wchar.html#cb892-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-5"><a href="wchar.html#cb892-5" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wcsncat<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s1<span class="op">,</span></span>
<span id="cb892-6"><a href="wchar.html#cb892-6" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s2<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-266">Description</h3>
<p>These are the wide variants of <a href="stringref.html#man-strcat"><code>strcat()</code></a> and <a href="stringref.html#man-strcat"><code>strncat()</code></a>.</p>
<p>They concatenate <code>s2</code> onto the end of <code>s1</code>.</p>
<p>They’re the same except <code>wcsncat()</code> gives you the option to limit the number of wide characters appended.</p>
<p>Note that <code>wcsncat()</code> always adds a NUL terminator to the end, even if <code>n</code> characters were appended. So be sure to leave room for that.</p>
<h3 class="unnumbered unlisted" id="return-value-264">Return Value</h3>
<p>Both functions return the pointer <code>s1</code>.</p>
<h3 class="unnumbered unlisted" id="example-268">Example</h3>
<div class="sourceCode" id="cb893"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb893-1"><a href="wchar.html#cb893-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb893-2"><a href="wchar.html#cb893-2"></a></span>
<span id="cb893-3"><a href="wchar.html#cb893-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb893-4"><a href="wchar.html#cb893-4"></a><span class="op">{</span></span>
<span id="cb893-5"><a href="wchar.html#cb893-5"></a>    <span class="dt">wchar_t</span> dest<span class="op">[</span><span class="dv">30</span><span class="op">]</span> <span class="op">=</span> <span class="st">L&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb893-6"><a href="wchar.html#cb893-6"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>src <span class="op">=</span> <span class="st">L&quot;, World!&quot;</span><span class="op">;</span></span>
<span id="cb893-7"><a href="wchar.html#cb893-7"></a>    <span class="dt">wchar_t</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="st">L&quot;12345678&quot;</span><span class="op">;</span></span>
<span id="cb893-8"><a href="wchar.html#cb893-8"></a></span>
<span id="cb893-9"><a href="wchar.html#cb893-9"></a>    wprintf<span class="op">(</span><span class="st">L&quot;dest before strcat: </span><span class="sc">\&quot;%ls\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> dest<span class="op">);</span> <span class="co">// &quot;Hello&quot;</span></span>
<span id="cb893-10"><a href="wchar.html#cb893-10"></a></span>
<span id="cb893-11"><a href="wchar.html#cb893-11"></a>    wcscat<span class="op">(</span>dest<span class="op">,</span> src<span class="op">);</span></span>
<span id="cb893-12"><a href="wchar.html#cb893-12"></a>    wprintf<span class="op">(</span><span class="st">L&quot;dest after strcat:  </span><span class="sc">\&quot;%ls\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> dest<span class="op">);</span> <span class="co">// &quot;Hello, world!&quot;</span></span>
<span id="cb893-13"><a href="wchar.html#cb893-13"></a></span>
<span id="cb893-14"><a href="wchar.html#cb893-14"></a>    wcsncat<span class="op">(</span>dest<span class="op">,</span> numbers<span class="op">,</span> <span class="dv">3</span><span class="op">);</span> <span class="co">// strcat first 3 chars of numbers</span></span>
<span id="cb893-15"><a href="wchar.html#cb893-15"></a>    wprintf<span class="op">(</span><span class="st">L&quot;dest after strncat: </span><span class="sc">\&quot;%ls\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> dest<span class="op">);</span> <span class="co">// &quot;Hello, world!123&quot;</span></span>
<span id="cb893-16"><a href="wchar.html#cb893-16"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-251">See Also</h3>
<p><a href="stringref.html#man-strcat"><code>strcat()</code></a>, <a href="stringref.html#man-strcat"><code>strncat()</code></a></p>
<hr />
<h2 data-number="31.17" id="man-wcscmp"><span class="header-section-number">31.17</span> <code>wcscmp()</code>, <code>wcsncmp()</code>, <code>wmemcmp()</code></h2>
<p> </p>
<p>Compare wide strings or memory</p>
<h3 class="unnumbered unlisted" id="synopsis-267">Synopsis</h3>
<div class="sourceCode" id="cb894"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb894-1"><a href="wchar.html#cb894-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb894-2"><a href="wchar.html#cb894-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb894-3"><a href="wchar.html#cb894-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> wcscmp<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">);</span></span>
<span id="cb894-4"><a href="wchar.html#cb894-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb894-5"><a href="wchar.html#cb894-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> wcsncmp<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">);</span></span>
<span id="cb894-6"><a href="wchar.html#cb894-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb894-7"><a href="wchar.html#cb894-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> wmemcmp<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-267">Description</h3>
<p>These are the wide variants of <a href="stringref.html#man-strcmp"><code>memcmp()</code></a>, <a href="stringref.html#man-strcmp"><code>strcmp()</code></a>, and <a href="stringref.html#man-strcmp"><code>strncmp()</code></a>.</p>
<p><code>wcscmp()</code> and <code>wcsncmp()</code> both compare strings until a NUL character.</p>
<p><code>wcsncmp()</code> also has the additional restriction that it will only compare the first <code>n</code> characters.</p>
<p><code>wmemcmp()</code> is like <code>wcsncmp()</code> except it won’t stop at a NUL.</p>
<p>The comparison is done against the character value (which might (or might not) be its Unicode code point).</p>
<h3 class="unnumbered unlisted" id="return-value-265">Return Value</h3>
<p>Returns zero if both regions are equal.</p>
<p>Returns a negative number if the region pointed to by <code>s1</code> is less than <code>s2</code>.</p>
<p>Returns a positive number if the region pointed to by <code>s1</code> is greater than <code>s2</code>.</p>
<h3 class="unnumbered unlisted" id="example-269">Example</h3>
<div class="sourceCode" id="cb895"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb895-1"><a href="wchar.html#cb895-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb895-2"><a href="wchar.html#cb895-2"></a></span>
<span id="cb895-3"><a href="wchar.html#cb895-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb895-4"><a href="wchar.html#cb895-4"></a><span class="op">{</span></span>
<span id="cb895-5"><a href="wchar.html#cb895-5"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>s1 <span class="op">=</span> <span class="st">L&quot;Muffin&quot;</span><span class="op">;</span></span>
<span id="cb895-6"><a href="wchar.html#cb895-6"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>s2 <span class="op">=</span> <span class="st">L&quot;Muffin Sandwich&quot;</span><span class="op">;</span></span>
<span id="cb895-7"><a href="wchar.html#cb895-7"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>s3 <span class="op">=</span> <span class="st">L&quot;Muffin&quot;</span><span class="op">;</span></span>
<span id="cb895-8"><a href="wchar.html#cb895-8"></a></span>
<span id="cb895-9"><a href="wchar.html#cb895-9"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> wcscmp<span class="op">(</span><span class="st">L&quot;Biscuits&quot;</span><span class="op">,</span> <span class="st">L&quot;Kittens&quot;</span><span class="op">));</span> <span class="co">// &lt;0 since &#39;B&#39; &lt; &#39;K&#39;</span></span>
<span id="cb895-10"><a href="wchar.html#cb895-10"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> wcscmp<span class="op">(</span><span class="st">L&quot;Kittens&quot;</span><span class="op">,</span> <span class="st">L&quot;Biscuits&quot;</span><span class="op">));</span> <span class="co">// &gt;0 since &#39;K&#39; &gt; &#39;B&#39;</span></span>
<span id="cb895-11"><a href="wchar.html#cb895-11"></a></span>
<span id="cb895-12"><a href="wchar.html#cb895-12"></a>    <span class="cf">if</span> <span class="op">(</span>wcscmp<span class="op">(</span>s1<span class="op">,</span> s2<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb895-13"><a href="wchar.html#cb895-13"></a>        wprintf<span class="op">(</span><span class="st">L&quot;This won&#39;t get printed because the strings differ</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb895-14"><a href="wchar.html#cb895-14"></a></span>
<span id="cb895-15"><a href="wchar.html#cb895-15"></a>    <span class="cf">if</span> <span class="op">(</span>wcscmp<span class="op">(</span>s1<span class="op">,</span> s3<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb895-16"><a href="wchar.html#cb895-16"></a>        wprintf<span class="op">(</span><span class="st">L&quot;This will print because s1 and s3 are the same</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb895-17"><a href="wchar.html#cb895-17"></a></span>
<span id="cb895-18"><a href="wchar.html#cb895-18"></a>    <span class="co">// this is a little weird...but if the strings are the same, it&#39;ll</span></span>
<span id="cb895-19"><a href="wchar.html#cb895-19"></a>    <span class="co">// return zero, which can also be thought of as &quot;false&quot;. Not-false</span></span>
<span id="cb895-20"><a href="wchar.html#cb895-20"></a>    <span class="co">// is &quot;true&quot;, so (!wcscmp()) will be true if the strings are the</span></span>
<span id="cb895-21"><a href="wchar.html#cb895-21"></a>    <span class="co">// same. yes, it&#39;s odd, but you see this all the time in the wild</span></span>
<span id="cb895-22"><a href="wchar.html#cb895-22"></a>    <span class="co">// so you might as well get used to it:</span></span>
<span id="cb895-23"><a href="wchar.html#cb895-23"></a></span>
<span id="cb895-24"><a href="wchar.html#cb895-24"></a>    <span class="cf">if</span> <span class="op">(!</span>wcscmp<span class="op">(</span>s1<span class="op">,</span> s3<span class="op">))</span></span>
<span id="cb895-25"><a href="wchar.html#cb895-25"></a>        wprintf<span class="op">(</span><span class="st">L&quot;The strings are the same!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb895-26"><a href="wchar.html#cb895-26"></a></span>
<span id="cb895-27"><a href="wchar.html#cb895-27"></a>    <span class="cf">if</span> <span class="op">(!</span>wcsncmp<span class="op">(</span>s1<span class="op">,</span> s2<span class="op">,</span> <span class="dv">6</span><span class="op">))</span></span>
<span id="cb895-28"><a href="wchar.html#cb895-28"></a>        wprintf<span class="op">(</span><span class="st">L&quot;The first 6 characters of s1 and s2 are the same</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb895-29"><a href="wchar.html#cb895-29"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb896"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb896-1"><a href="wchar.html#cb896-1" aria-hidden="true" tabindex="-1"></a>-1</span>
<span id="cb896-2"><a href="wchar.html#cb896-2" aria-hidden="true" tabindex="-1"></a>1</span>
<span id="cb896-3"><a href="wchar.html#cb896-3" aria-hidden="true" tabindex="-1"></a>This will print because s1 and s3 are the same</span>
<span id="cb896-4"><a href="wchar.html#cb896-4" aria-hidden="true" tabindex="-1"></a>The strings are the same!</span>
<span id="cb896-5"><a href="wchar.html#cb896-5" aria-hidden="true" tabindex="-1"></a>The first 6 characters of s1 and s2 are the same</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-252">See Also</h3>
<p><a href="wchar.html#man-wcscoll"><code>wcscoll()</code></a>, <a href="stringref.html#man-strcmp"><code>memcmp()</code></a>, <a href="stringref.html#man-strcmp"><code>strcmp()</code></a>, <a href="stringref.html#man-strcmp"><code>strncmp()</code></a></p>
<hr />
<h2 data-number="31.18" id="man-wcscoll"><span class="header-section-number">31.18</span> <code>wcscoll()</code></h2>
<p></p>
<p>Compare two wide strings accounting for locale</p>
<h3 class="unnumbered unlisted" id="synopsis-268">Synopsis</h3>
<div class="sourceCode" id="cb897"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb897-1"><a href="wchar.html#cb897-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb897-2"><a href="wchar.html#cb897-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb897-3"><a href="wchar.html#cb897-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> wcscoll<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-268">Description</h3>
<p>This is the wide version of <a href="stringref.html#man-strcoll"><code>strcoll()</code></a>. See <a href="stringref.html#man-strcoll"><code>that reference page</code></a> for details.</p>
<p>This is slower than <code>wcscmp()</code>, so only use it if you need the locale-specific compare.</p>
<h3 class="unnumbered unlisted" id="return-value-266">Return Value</h3>
<p>Returns zero if both regions are equal in this locale.</p>
<p>Returns a negative number if the region pointed to by <code>s1</code> is less than <code>s2</code> in this locale.</p>
<p>Returns a positive number if the region pointed to by <code>s1</code> is greater than <code>s2</code> in this locale.</p>
<h3 class="unnumbered unlisted" id="example-270">Example</h3>
<div class="sourceCode" id="cb898"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb898-1"><a href="wchar.html#cb898-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb898-2"><a href="wchar.html#cb898-2"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span></span>
<span id="cb898-3"><a href="wchar.html#cb898-3"></a></span>
<span id="cb898-4"><a href="wchar.html#cb898-4"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb898-5"><a href="wchar.html#cb898-5"></a><span class="op">{</span></span>
<span id="cb898-6"><a href="wchar.html#cb898-6"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb898-7"><a href="wchar.html#cb898-7"></a></span>
<span id="cb898-8"><a href="wchar.html#cb898-8"></a>    <span class="co">// If your source character set doesn&#39;t support &quot;é&quot; in a string</span></span>
<span id="cb898-9"><a href="wchar.html#cb898-9"></a>    <span class="co">// you can replace it with `\u00e9`, the Unicode code point</span></span>
<span id="cb898-10"><a href="wchar.html#cb898-10"></a>    <span class="co">// for &quot;é&quot;.</span></span>
<span id="cb898-11"><a href="wchar.html#cb898-11"></a></span>
<span id="cb898-12"><a href="wchar.html#cb898-12"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> wcscmp<span class="op">(</span><span class="st">L&quot;é&quot;</span><span class="op">,</span> <span class="st">L&quot;f&quot;</span><span class="op">));</span>   <span class="co">// Reports é &gt; f, yuck.</span></span>
<span id="cb898-13"><a href="wchar.html#cb898-13"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> wcscoll<span class="op">(</span><span class="st">L&quot;é&quot;</span><span class="op">,</span> <span class="st">L&quot;f&quot;</span><span class="op">));</span>  <span class="co">// Reports é &lt; f, yay!</span></span>
<span id="cb898-14"><a href="wchar.html#cb898-14"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-253">See Also</h3>
<p><a href="wchar.html#man-wcscmp"><code>wcscmp()</code></a>, <a href="wchar.html#man-wcsxfrm"><code>wcsxfrm()</code></a>, <a href="stringref.html#man-strcoll"><code>strcoll()</code></a></p>
<hr />
<h2 data-number="31.19" id="man-wcsxfrm"><span class="header-section-number">31.19</span> <code>wcsxfrm()</code></h2>
<p></p>
<p>Transform a wide string for comparing based on locale</p>
<h3 class="unnumbered unlisted" id="synopsis-269">Synopsis</h3>
<div class="sourceCode" id="cb899"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb899-1"><a href="wchar.html#cb899-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb899-2"><a href="wchar.html#cb899-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb899-3"><a href="wchar.html#cb899-3" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> wcsxfrm<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s1<span class="op">,</span></span>
<span id="cb899-4"><a href="wchar.html#cb899-4" aria-hidden="true" tabindex="-1"></a>               <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s2<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-269">Description</h3>
<p>This is the wide variant of <a href="stringref.html#man-strxfrm"><code>strxfrm()</code></a>. See <a href="stringref.html#man-strxfrm">that reference page</a> for details.</p>
<h3 class="unnumbered unlisted" id="return-value-267">Return Value</h3>
<p>Returns the length of the transformed wide string in wide characters.</p>
<p>If the return value is greater than <code>n</code>, all bets are off for the result in <code>s1</code>.</p>
<h3 class="unnumbered unlisted" id="example-271">Example</h3>
<div class="sourceCode" id="cb900"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb900-1"><a href="wchar.html#cb900-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb900-2"><a href="wchar.html#cb900-2"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span></span>
<span id="cb900-3"><a href="wchar.html#cb900-3"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb900-4"><a href="wchar.html#cb900-4"></a></span>
<span id="cb900-5"><a href="wchar.html#cb900-5"></a><span class="co">// Transform a string for comparison, returning a malloc&#39;d</span></span>
<span id="cb900-6"><a href="wchar.html#cb900-6"></a><span class="co">// result</span></span>
<span id="cb900-7"><a href="wchar.html#cb900-7"></a><span class="dt">wchar_t</span> <span class="op">*</span>get_xfrm_str<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span>s<span class="op">)</span></span>
<span id="cb900-8"><a href="wchar.html#cb900-8"></a><span class="op">{</span></span>
<span id="cb900-9"><a href="wchar.html#cb900-9"></a>    <span class="dt">int</span> len <span class="op">=</span> wcsxfrm<span class="op">(</span>NULL<span class="op">,</span> s<span class="op">,</span> <span class="dv">0</span><span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb900-10"><a href="wchar.html#cb900-10"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>d <span class="op">=</span> malloc<span class="op">(</span>len <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">wchar_t</span><span class="op">));</span></span>
<span id="cb900-11"><a href="wchar.html#cb900-11"></a></span>
<span id="cb900-12"><a href="wchar.html#cb900-12"></a>    wcsxfrm<span class="op">(</span>d<span class="op">,</span> s<span class="op">,</span> len<span class="op">);</span></span>
<span id="cb900-13"><a href="wchar.html#cb900-13"></a></span>
<span id="cb900-14"><a href="wchar.html#cb900-14"></a>    <span class="cf">return</span> d<span class="op">;</span></span>
<span id="cb900-15"><a href="wchar.html#cb900-15"></a><span class="op">}</span></span>
<span id="cb900-16"><a href="wchar.html#cb900-16"></a></span>
<span id="cb900-17"><a href="wchar.html#cb900-17"></a><span class="co">// Does half the work of a regular wcscoll() because the second</span></span>
<span id="cb900-18"><a href="wchar.html#cb900-18"></a><span class="co">// string arrives already transformed.</span></span>
<span id="cb900-19"><a href="wchar.html#cb900-19"></a><span class="dt">int</span> half_wcscoll<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2_transformed<span class="op">)</span></span>
<span id="cb900-20"><a href="wchar.html#cb900-20"></a><span class="op">{</span></span>
<span id="cb900-21"><a href="wchar.html#cb900-21"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>s1_transformed <span class="op">=</span> get_xfrm_str<span class="op">(</span>s1<span class="op">);</span></span>
<span id="cb900-22"><a href="wchar.html#cb900-22"></a></span>
<span id="cb900-23"><a href="wchar.html#cb900-23"></a>    <span class="dt">int</span> result <span class="op">=</span> wcscmp<span class="op">(</span>s1_transformed<span class="op">,</span> s2_transformed<span class="op">);</span></span>
<span id="cb900-24"><a href="wchar.html#cb900-24"></a></span>
<span id="cb900-25"><a href="wchar.html#cb900-25"></a>    free<span class="op">(</span>s1_transformed<span class="op">);</span></span>
<span id="cb900-26"><a href="wchar.html#cb900-26"></a></span>
<span id="cb900-27"><a href="wchar.html#cb900-27"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb900-28"><a href="wchar.html#cb900-28"></a><span class="op">}</span></span>
<span id="cb900-29"><a href="wchar.html#cb900-29"></a></span>
<span id="cb900-30"><a href="wchar.html#cb900-30"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb900-31"><a href="wchar.html#cb900-31"></a><span class="op">{</span></span>
<span id="cb900-32"><a href="wchar.html#cb900-32"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb900-33"><a href="wchar.html#cb900-33"></a></span>
<span id="cb900-34"><a href="wchar.html#cb900-34"></a>    <span class="co">// Pre-transform the string to compare against</span></span>
<span id="cb900-35"><a href="wchar.html#cb900-35"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>s <span class="op">=</span> get_xfrm_str<span class="op">(</span><span class="st">L&quot;éfg&quot;</span><span class="op">);</span></span>
<span id="cb900-36"><a href="wchar.html#cb900-36"></a></span>
<span id="cb900-37"><a href="wchar.html#cb900-37"></a>    <span class="co">// Repeatedly compare against &quot;éfg&quot; </span></span>
<span id="cb900-38"><a href="wchar.html#cb900-38"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> half_wcscoll<span class="op">(</span><span class="st">L&quot;fgh&quot;</span><span class="op">,</span> s<span class="op">));</span>  <span class="co">// &quot;fgh&quot; &gt; &quot;éfg&quot;</span></span>
<span id="cb900-39"><a href="wchar.html#cb900-39"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> half_wcscoll<span class="op">(</span><span class="st">L&quot;àbc&quot;</span><span class="op">,</span> s<span class="op">));</span>  <span class="co">// &quot;àbc&quot; &lt; &quot;éfg&quot;</span></span>
<span id="cb900-40"><a href="wchar.html#cb900-40"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> half_wcscoll<span class="op">(</span><span class="st">L&quot;ĥij&quot;</span><span class="op">,</span> s<span class="op">));</span>  <span class="co">// &quot;ĥij&quot; &gt; &quot;éfg&quot;</span></span>
<span id="cb900-41"><a href="wchar.html#cb900-41"></a>    </span>
<span id="cb900-42"><a href="wchar.html#cb900-42"></a>    free<span class="op">(</span>s<span class="op">);</span></span>
<span id="cb900-43"><a href="wchar.html#cb900-43"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb901"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb901-1"><a href="wchar.html#cb901-1" aria-hidden="true" tabindex="-1"></a>1</span>
<span id="cb901-2"><a href="wchar.html#cb901-2" aria-hidden="true" tabindex="-1"></a>-1</span>
<span id="cb901-3"><a href="wchar.html#cb901-3" aria-hidden="true" tabindex="-1"></a>1</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-254">See Also</h3>
<p><a href="wchar.html#man-wcscmp"><code>wcscmp()</code></a>, <a href="wchar.html#man-wcscoll"><code>wcscoll()</code></a>, <a href="stringref.html#man-strxfrm"><code>strxfrm()</code></a></p>
<hr />
<h2 data-number="31.20" id="man-wcschr"><span class="header-section-number">31.20</span> <code>wcschr()</code> <code>wcsrchr()</code></h2>
<p> </p>
<p>Find a wide character in a wide string</p>
<h3 class="unnumbered unlisted" id="synopsis-270">Synopsis</h3>
<div class="sourceCode" id="cb902"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb902-1"><a href="wchar.html#cb902-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb902-2"><a href="wchar.html#cb902-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-3"><a href="wchar.html#cb902-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Pre-C23:</span></span>
<span id="cb902-4"><a href="wchar.html#cb902-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-5"><a href="wchar.html#cb902-5" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wcschr<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s<span class="op">,</span> <span class="dt">wchar_t</span> c<span class="op">);</span></span>
<span id="cb902-6"><a href="wchar.html#cb902-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-7"><a href="wchar.html#cb902-7" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wcsrchr<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s<span class="op">,</span> <span class="dt">wchar_t</span> c<span class="op">);</span></span>
<span id="cb902-8"><a href="wchar.html#cb902-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-9"><a href="wchar.html#cb902-9" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wmemchr<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s<span class="op">,</span> <span class="dt">wchar_t</span> c<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">);</span></span>
<span id="cb902-10"><a href="wchar.html#cb902-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-11"><a href="wchar.html#cb902-11" aria-hidden="true" tabindex="-1"></a><span class="co">// C23:</span></span>
<span id="cb902-12"><a href="wchar.html#cb902-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-13"><a href="wchar.html#cb902-13" aria-hidden="true" tabindex="-1"></a>QWchar_t <span class="op">*</span>wcschr<span class="op">(</span>QWchar_t <span class="op">*</span>s<span class="op">,</span> <span class="dt">wchar_t</span> c<span class="op">);</span></span>
<span id="cb902-14"><a href="wchar.html#cb902-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-15"><a href="wchar.html#cb902-15" aria-hidden="true" tabindex="-1"></a>QWchar_t <span class="op">*</span>wcsrchr<span class="op">(</span>QWchar_t <span class="op">*</span>s<span class="op">,</span> <span class="dt">wchar_t</span> c<span class="op">);</span></span>
<span id="cb902-16"><a href="wchar.html#cb902-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-17"><a href="wchar.html#cb902-17" aria-hidden="true" tabindex="-1"></a>QWchar_t <span class="op">*</span>wmemchr<span class="op">(</span>QWchar_t <span class="op">*</span>s<span class="op">,</span> <span class="dt">wchar_t</span> c<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-270">Description</h3>
<p>These are the wide equivalents to <a href="stringref.html#man-strchr"><code>strchr()</code></a>, <a href="stringref.html#man-strchr"><code>strrchr()</code></a>, and <a href="stringref.html#man-strchr"><code>memchr()</code></a>.</p>
<p>They search for wide characters in a wide string from the front (<code>wcschr()</code>), the end (<code>wcsrchr()</code>) or for an arbitrary number of wide characters (<code>wmemchr()</code>).</p>
<h3 class="unnumbered unlisted" id="return-value-268">Return Value</h3>
<p>All three functions return a pointer to the wide character found, or <code>NULL</code> if the character, sadly, isn’t found.</p>
<h3 class="unnumbered unlisted" id="example-272">Example</h3>
<div class="sourceCode" id="cb903"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb903-1"><a href="wchar.html#cb903-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb903-2"><a href="wchar.html#cb903-2"></a></span>
<span id="cb903-3"><a href="wchar.html#cb903-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb903-4"><a href="wchar.html#cb903-4"></a><span class="op">{</span></span>
<span id="cb903-5"><a href="wchar.html#cb903-5"></a>    <span class="co">// &quot;Hello, world!&quot;</span></span>
<span id="cb903-6"><a href="wchar.html#cb903-6"></a>    <span class="co">//       ^  ^   ^</span></span>
<span id="cb903-7"><a href="wchar.html#cb903-7"></a>    <span class="co">//       A  B   C</span></span>
<span id="cb903-8"><a href="wchar.html#cb903-8"></a></span>
<span id="cb903-9"><a href="wchar.html#cb903-9"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>str <span class="op">=</span> <span class="st">L&quot;Hello, world!&quot;</span><span class="op">;</span></span>
<span id="cb903-10"><a href="wchar.html#cb903-10"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>p<span class="op">;</span></span>
<span id="cb903-11"><a href="wchar.html#cb903-11"></a></span>
<span id="cb903-12"><a href="wchar.html#cb903-12"></a>    p <span class="op">=</span> wcschr<span class="op">(</span>str<span class="op">,</span> <span class="ch">&#39;,&#39;</span><span class="op">);</span>       <span class="co">// p now points at position A</span></span>
<span id="cb903-13"><a href="wchar.html#cb903-13"></a>    p <span class="op">=</span> wcsrchr<span class="op">(</span>str<span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">);</span>      <span class="co">// p now points at position B</span></span>
<span id="cb903-14"><a href="wchar.html#cb903-14"></a></span>
<span id="cb903-15"><a href="wchar.html#cb903-15"></a>    p <span class="op">=</span> wmemchr<span class="op">(</span>str<span class="op">,</span> <span class="ch">&#39;!&#39;</span><span class="op">,</span> <span class="dv">13</span><span class="op">);</span>   <span class="co">// p now points at position C</span></span>
<span id="cb903-16"><a href="wchar.html#cb903-16"></a></span>
<span id="cb903-17"><a href="wchar.html#cb903-17"></a>    <span class="co">// repeatedly find all occurrences of the letter &#39;B&#39;</span></span>
<span id="cb903-18"><a href="wchar.html#cb903-18"></a>    str <span class="op">=</span> <span class="st">L&quot;A BIG BROWN BAT BIT BEEJ&quot;</span><span class="op">;</span></span>
<span id="cb903-19"><a href="wchar.html#cb903-19"></a></span>
<span id="cb903-20"><a href="wchar.html#cb903-20"></a>    <span class="cf">for</span><span class="op">(</span>p <span class="op">=</span> wcschr<span class="op">(</span>str<span class="op">,</span> <span class="ch">&#39;B&#39;</span><span class="op">);</span> p <span class="op">!=</span> NULL<span class="op">;</span> p <span class="op">=</span> wcschr<span class="op">(</span>p <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="ch">&#39;B&#39;</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb903-21"><a href="wchar.html#cb903-21"></a>        wprintf<span class="op">(</span><span class="st">L&quot;Found a &#39;B&#39; here: </span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> p<span class="op">);</span></span>
<span id="cb903-22"><a href="wchar.html#cb903-22"></a>    <span class="op">}</span></span>
<span id="cb903-23"><a href="wchar.html#cb903-23"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb904"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb904-1"><a href="wchar.html#cb904-1" aria-hidden="true" tabindex="-1"></a>Found a &#39;B&#39; here: BIG BROWN BAT BIT BEEJ</span>
<span id="cb904-2"><a href="wchar.html#cb904-2" aria-hidden="true" tabindex="-1"></a>Found a &#39;B&#39; here: BROWN BAT BIT BEEJ</span>
<span id="cb904-3"><a href="wchar.html#cb904-3" aria-hidden="true" tabindex="-1"></a>Found a &#39;B&#39; here: BAT BIT BEEJ</span>
<span id="cb904-4"><a href="wchar.html#cb904-4" aria-hidden="true" tabindex="-1"></a>Found a &#39;B&#39; here: BIT BEEJ</span>
<span id="cb904-5"><a href="wchar.html#cb904-5" aria-hidden="true" tabindex="-1"></a>Found a &#39;B&#39; here: BEEJ</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-255">See Also</h3>
<p><a href="stringref.html#man-strchr"><code>strchr()</code></a>, <a href="stringref.html#man-strchr"><code>strrchr()</code></a>, <a href="stringref.html#man-strchr"><code>memchr()</code></a></p>
<hr />
<h2 data-number="31.21" id="man-wcsspn"><span class="header-section-number">31.21</span> <code>wcsspn()</code> <code>wcscspn()</code></h2>
<p> </p>
<p>Return the length of a wide string consisting entirely of a set of wide characters, or of not a set of wide characters</p>
<h3 class="unnumbered unlisted" id="synopsis-271">Synopsis</h3>
<div class="sourceCode" id="cb905"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb905-1"><a href="wchar.html#cb905-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb905-2"><a href="wchar.html#cb905-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb905-3"><a href="wchar.html#cb905-3" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> wcsspn<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">);</span></span>
<span id="cb905-4"><a href="wchar.html#cb905-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb905-5"><a href="wchar.html#cb905-5" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> wcscspn<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-271">Description</h3>
<p>The are the wide character counterparts to [<code>strspn()</code>] (#man-strspn)and <a href="stringref.html#man-strspn"><code>strcspn()</code></a>.</p>
<p>They compute the length of the string pointed to by <code>s1</code> consisting entirely of the characters found in <code>s2</code>. Or, in the case of <code>wcscspn()</code>, the characters <em>not</em> found in <code>s2</code>.</p>
<h3 class="unnumbered unlisted" id="return-value-269">Return Value</h3>
<p>The length of the string pointed to by <code>s1</code> consisting solely of the characters in <code>s2</code> (in the case of <code>wcsspn()</code>) or of the characters <em>not</em> in <code>s2</code> (in th ecase of <code>wcscspn()</code>).</p>
<h3 class="unnumbered unlisted" id="example-273">Example</h3>
<div class="sourceCode" id="cb906"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb906-1"><a href="wchar.html#cb906-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb906-2"><a href="wchar.html#cb906-2"></a></span>
<span id="cb906-3"><a href="wchar.html#cb906-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb906-4"><a href="wchar.html#cb906-4"></a><span class="op">{</span></span>
<span id="cb906-5"><a href="wchar.html#cb906-5"></a>    <span class="dt">wchar_t</span> str1<span class="op">[]</span> <span class="op">=</span> <span class="st">L&quot;a banana&quot;</span><span class="op">;</span></span>
<span id="cb906-6"><a href="wchar.html#cb906-6"></a>    <span class="dt">wchar_t</span> str2<span class="op">[]</span> <span class="op">=</span> <span class="st">L&quot;the bolivian navy on maneuvers in the south pacific&quot;</span><span class="op">;</span></span>
<span id="cb906-7"><a href="wchar.html#cb906-7"></a>    <span class="dt">int</span> n<span class="op">;</span></span>
<span id="cb906-8"><a href="wchar.html#cb906-8"></a></span>
<span id="cb906-9"><a href="wchar.html#cb906-9"></a>    <span class="co">// how many letters in str1 until we reach something that&#39;s not a vowel?</span></span>
<span id="cb906-10"><a href="wchar.html#cb906-10"></a>    n <span class="op">=</span> wcsspn<span class="op">(</span>str1<span class="op">,</span> <span class="st">L&quot;aeiou&quot;</span><span class="op">);</span></span>
<span id="cb906-11"><a href="wchar.html#cb906-11"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> n<span class="op">);</span>  <span class="co">// n == 1, just &quot;a&quot;</span></span>
<span id="cb906-12"><a href="wchar.html#cb906-12"></a></span>
<span id="cb906-13"><a href="wchar.html#cb906-13"></a>    <span class="co">// how many letters in str1 until we reach something that&#39;s not a, b,</span></span>
<span id="cb906-14"><a href="wchar.html#cb906-14"></a>    <span class="co">// or space?</span></span>
<span id="cb906-15"><a href="wchar.html#cb906-15"></a>    n <span class="op">=</span> wcsspn<span class="op">(</span>str1<span class="op">,</span> <span class="st">L&quot;ab &quot;</span><span class="op">);</span></span>
<span id="cb906-16"><a href="wchar.html#cb906-16"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> n<span class="op">);</span>  <span class="co">// n == 4, &quot;a ba&quot;</span></span>
<span id="cb906-17"><a href="wchar.html#cb906-17"></a></span>
<span id="cb906-18"><a href="wchar.html#cb906-18"></a>    <span class="co">// how many letters in str2 before we get a &quot;y&quot;?</span></span>
<span id="cb906-19"><a href="wchar.html#cb906-19"></a>    n <span class="op">=</span> wcscspn<span class="op">(</span>str2<span class="op">,</span> <span class="st">L&quot;y&quot;</span><span class="op">);</span></span>
<span id="cb906-20"><a href="wchar.html#cb906-20"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> n<span class="op">);</span>  <span class="co">// n = 16, &quot;the bolivian nav&quot;</span></span>
<span id="cb906-21"><a href="wchar.html#cb906-21"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-256">See Also</h3>
<p><a href="wchar.html#man-wcschr"><code>wcschr()</code></a>, <a href="wchar.html#man-wcschr"><code>wcsrchr()</code></a>, <a href="stringref.html#man-strspn"><code>strspn()</code></a></p>
<hr />
<h2 data-number="31.22" id="man-wcspbrk"><span class="header-section-number">31.22</span> <code>wcspbrk()</code></h2>
<p></p>
<p>Search a wide string for one of a set of wide characters</p>
<h3 class="unnumbered unlisted" id="synopsis-272">Synopsis</h3>
<div class="sourceCode" id="cb907"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb907-1"><a href="wchar.html#cb907-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb907-2"><a href="wchar.html#cb907-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb907-3"><a href="wchar.html#cb907-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Pre-C23:</span></span>
<span id="cb907-4"><a href="wchar.html#cb907-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb907-5"><a href="wchar.html#cb907-5" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wcspbrk<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">);</span></span>
<span id="cb907-6"><a href="wchar.html#cb907-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb907-7"><a href="wchar.html#cb907-7" aria-hidden="true" tabindex="-1"></a><span class="co">// C23:</span></span>
<span id="cb907-8"><a href="wchar.html#cb907-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb907-9"><a href="wchar.html#cb907-9" aria-hidden="true" tabindex="-1"></a>QWchar_t <span class="op">*</span>wcspbrk<span class="op">(</span>QWchar_t <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-272">Description</h3>
<p>This is the wide character variant of <a href="stringref.html#man-strpbrk"><code>strpbrk()</code></a>.</p>
<p>It finds the first occurrance of any of a set of wide characters in a wide string.</p>
<h3 class="unnumbered unlisted" id="return-value-270">Return Value</h3>
<p>Returns a pointer to the first character in the string <code>s1</code> that exists in the string <code>s2</code>.</p>
<p>Or <code>NULL</code> if none of the characters in <code>s2</code> can be found in <code>s1</code>.</p>
<h3 class="unnumbered unlisted" id="example-274">Example</h3>
<div class="sourceCode" id="cb908"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb908-1"><a href="wchar.html#cb908-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb908-2"><a href="wchar.html#cb908-2"></a></span>
<span id="cb908-3"><a href="wchar.html#cb908-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb908-4"><a href="wchar.html#cb908-4"></a><span class="op">{</span></span>
<span id="cb908-5"><a href="wchar.html#cb908-5"></a>    <span class="co">//  p points here after wcspbrk</span></span>
<span id="cb908-6"><a href="wchar.html#cb908-6"></a>    <span class="co">//                  v</span></span>
<span id="cb908-7"><a href="wchar.html#cb908-7"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>s1 <span class="op">=</span> <span class="st">L&quot;Hello, world!&quot;</span><span class="op">;</span></span>
<span id="cb908-8"><a href="wchar.html#cb908-8"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>s2 <span class="op">=</span> <span class="st">L&quot;dow!&quot;</span><span class="op">;</span>  <span class="co">// Match any of these chars</span></span>
<span id="cb908-9"><a href="wchar.html#cb908-9"></a></span>
<span id="cb908-10"><a href="wchar.html#cb908-10"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>p <span class="op">=</span> wcspbrk<span class="op">(</span>s1<span class="op">,</span> s2<span class="op">);</span>  <span class="co">// p points to the o</span></span>
<span id="cb908-11"><a href="wchar.html#cb908-11"></a></span>
<span id="cb908-12"><a href="wchar.html#cb908-12"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> p<span class="op">);</span>  <span class="co">// &quot;o, world!&quot;</span></span>
<span id="cb908-13"><a href="wchar.html#cb908-13"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-257">See Also</h3>
<p><a href="wchar.html#man-wcschr"><code>wcschr()</code></a>, <a href="wchar.html#man-wcschr"><code>wmemchr()</code></a>, <a href="stringref.html#man-strpbrk"><code>strpbrk()</code></a></p>
<hr />
<h2 data-number="31.23" id="man-wcsstr"><span class="header-section-number">31.23</span> <code>wcsstr()</code></h2>
<p></p>
<p>Find a wide string in another wide string</p>
<h3 class="unnumbered unlisted" id="synopsis-273">Synopsis</h3>
<div class="sourceCode" id="cb909"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb909-1"><a href="wchar.html#cb909-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb909-2"><a href="wchar.html#cb909-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-3"><a href="wchar.html#cb909-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Pre-C23:</span></span>
<span id="cb909-4"><a href="wchar.html#cb909-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-5"><a href="wchar.html#cb909-5" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wcsstr<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">);</span></span>
<span id="cb909-6"><a href="wchar.html#cb909-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-7"><a href="wchar.html#cb909-7" aria-hidden="true" tabindex="-1"></a><span class="co">// C23:</span></span>
<span id="cb909-8"><a href="wchar.html#cb909-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-9"><a href="wchar.html#cb909-9" aria-hidden="true" tabindex="-1"></a>QWchar_t <span class="op">*</span>wcsstr<span class="op">(</span>QWchar_t <span class="op">*</span>s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s2<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-273">Description</h3>
<p>This is the wide variant of <a href="stringref.html#man-strstr"><code>strstr()</code></a>.</p>
<p>It locates a substring in a string.</p>
<h3 class="unnumbered unlisted" id="return-value-271">Return Value</h3>
<p>Returns a pointer to the location in <code>s1</code> that contains <code>s2</code>.</p>
<p>Or <code>NULL</code> if <code>s2</code> cannot be found in <code>s1</code>.</p>
<h3 class="unnumbered unlisted" id="example-275">Example</h3>
<div class="sourceCode" id="cb910"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb910-1"><a href="wchar.html#cb910-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb910-2"><a href="wchar.html#cb910-2"></a></span>
<span id="cb910-3"><a href="wchar.html#cb910-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb910-4"><a href="wchar.html#cb910-4"></a><span class="op">{</span></span>
<span id="cb910-5"><a href="wchar.html#cb910-5"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>str <span class="op">=</span> <span class="st">L&quot;The quick brown fox jumped over the lazy dogs.&quot;</span><span class="op">;</span></span>
<span id="cb910-6"><a href="wchar.html#cb910-6"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>p<span class="op">;</span></span>
<span id="cb910-7"><a href="wchar.html#cb910-7"></a></span>
<span id="cb910-8"><a href="wchar.html#cb910-8"></a>    p <span class="op">=</span> wcsstr<span class="op">(</span>str<span class="op">,</span> <span class="st">L&quot;lazy&quot;</span><span class="op">);</span></span>
<span id="cb910-9"><a href="wchar.html#cb910-9"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> p <span class="op">==</span> NULL<span class="op">?</span> <span class="st">L&quot;null&quot;</span><span class="op">:</span> p<span class="op">);</span> <span class="co">// &quot;lazy dogs.&quot;</span></span>
<span id="cb910-10"><a href="wchar.html#cb910-10"></a></span>
<span id="cb910-11"><a href="wchar.html#cb910-11"></a>    <span class="co">// p is NULL after this, since the string &quot;wombat&quot; isn&#39;t in str:</span></span>
<span id="cb910-12"><a href="wchar.html#cb910-12"></a>    p <span class="op">=</span> wcsstr<span class="op">(</span>str<span class="op">,</span> <span class="st">L&quot;wombat&quot;</span><span class="op">);</span></span>
<span id="cb910-13"><a href="wchar.html#cb910-13"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> p <span class="op">==</span> NULL<span class="op">?</span> <span class="st">L&quot;null&quot;</span><span class="op">:</span> p<span class="op">);</span> <span class="co">// &quot;null&quot;</span></span>
<span id="cb910-14"><a href="wchar.html#cb910-14"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-258">See Also</h3>
<p><a href="wchar.html#man-wcschr"><code>wcschr()</code></a>, <a href="wchar.html#man-wcschr"><code>wcsrchr()</code></a>, <a href="wchar.html#man-wcsspn"><code>wcsspn()</code></a>, <a href="wchar.html#man-wcsspn"><code>wcscspn()</code></a>, <a href="stringref.html#man-strstr"><code>strstr()</code></a></p>
<hr />
<h2 data-number="31.24" id="man-wcstok"><span class="header-section-number">31.24</span> <code>wcstok()</code></h2>
<p></p>
<p>Tokenize a wide string</p>
<h3 class="unnumbered unlisted" id="synopsis-274">Synopsis</h3>
<div class="sourceCode" id="cb911"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb911-1"><a href="wchar.html#cb911-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb911-2"><a href="wchar.html#cb911-2" aria-hidden="true" tabindex="-1"></a><span class="dt">wchar_t</span> <span class="op">*</span>wcstok<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s1<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s2<span class="op">,</span></span>
<span id="cb911-3"><a href="wchar.html#cb911-3" aria-hidden="true" tabindex="-1"></a>                <span class="dt">wchar_t</span> <span class="op">**</span> <span class="dt">restrict</span> ptr<span class="op">);</span> </span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-274">Description</h3>
<p>This is the wide version of <a href="stringref.html#man-strtok"><code>strtok()</code></a>.</p>
<p>And, like that one, it modifies the string <code>s1</code>. So make a copy of it first if you want to preserve the original.</p>
<p>One key difference is that <code>wcstok()</code> can be threadsafe because you pass in the pointer <code>ptr</code> to the current state of the transformation. This gets initializers for you when <code>s1</code> is initially passed in as non-<code>NULL</code>. (Subsequent calls with a <code>NULL</code> <code>s1</code> cause the state to update.)</p>
<h3 class="unnumbered unlisted" id="return-value-272">Return Value</h3>
<h3 class="unnumbered unlisted" id="example-276">Example</h3>
<div class="sourceCode" id="cb912"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb912-1"><a href="wchar.html#cb912-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb912-2"><a href="wchar.html#cb912-2"></a></span>
<span id="cb912-3"><a href="wchar.html#cb912-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb912-4"><a href="wchar.html#cb912-4"></a><span class="op">{</span></span>
<span id="cb912-5"><a href="wchar.html#cb912-5"></a>    <span class="co">// break up the string into a series of space or</span></span>
<span id="cb912-6"><a href="wchar.html#cb912-6"></a>    <span class="co">// punctuation-separated words</span></span>
<span id="cb912-7"><a href="wchar.html#cb912-7"></a>    <span class="dt">wchar_t</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">L&quot;Where is my bacon, dude?&quot;</span><span class="op">;</span></span>
<span id="cb912-8"><a href="wchar.html#cb912-8"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>token<span class="op">;</span></span>
<span id="cb912-9"><a href="wchar.html#cb912-9"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>state<span class="op">;</span></span>
<span id="cb912-10"><a href="wchar.html#cb912-10"></a></span>
<span id="cb912-11"><a href="wchar.html#cb912-11"></a>    <span class="co">// Note that the following if-do-while construct is very very</span></span>
<span id="cb912-12"><a href="wchar.html#cb912-12"></a>    <span class="co">// very very very common to see when using strtok().</span></span>
<span id="cb912-13"><a href="wchar.html#cb912-13"></a></span>
<span id="cb912-14"><a href="wchar.html#cb912-14"></a>    <span class="co">// grab the first token (making sure there is a first token!)</span></span>
<span id="cb912-15"><a href="wchar.html#cb912-15"></a>    <span class="cf">if</span> <span class="op">((</span>token <span class="op">=</span> wcstok<span class="op">(</span>str<span class="op">,</span> <span class="st">L&quot;.,?! &quot;</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">))</span> <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb912-16"><a href="wchar.html#cb912-16"></a>        <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb912-17"><a href="wchar.html#cb912-17"></a>            wprintf<span class="op">(</span><span class="st">L&quot;Word: </span><span class="sc">\&quot;%ls\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> token<span class="op">);</span></span>
<span id="cb912-18"><a href="wchar.html#cb912-18"></a></span>
<span id="cb912-19"><a href="wchar.html#cb912-19"></a>            <span class="co">// now, the while continuation condition grabs the</span></span>
<span id="cb912-20"><a href="wchar.html#cb912-20"></a>            <span class="co">// next token (by passing NULL as the first param)</span></span>
<span id="cb912-21"><a href="wchar.html#cb912-21"></a>            <span class="co">// and continues if the token&#39;s not NULL:</span></span>
<span id="cb912-22"><a href="wchar.html#cb912-22"></a>        <span class="op">}</span> <span class="cf">while</span> <span class="op">((</span>token <span class="op">=</span> wcstok<span class="op">(</span>NULL<span class="op">,</span> <span class="st">L&quot;.,?! &quot;</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">))</span> <span class="op">!=</span> NULL<span class="op">);</span></span>
<span id="cb912-23"><a href="wchar.html#cb912-23"></a>    <span class="op">}</span></span>
<span id="cb912-24"><a href="wchar.html#cb912-24"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb913"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb913-1"><a href="wchar.html#cb913-1" aria-hidden="true" tabindex="-1"></a>Word: &quot;Where&quot;</span>
<span id="cb913-2"><a href="wchar.html#cb913-2" aria-hidden="true" tabindex="-1"></a>Word: &quot;is&quot;</span>
<span id="cb913-3"><a href="wchar.html#cb913-3" aria-hidden="true" tabindex="-1"></a>Word: &quot;my&quot;</span>
<span id="cb913-4"><a href="wchar.html#cb913-4" aria-hidden="true" tabindex="-1"></a>Word: &quot;bacon&quot;</span>
<span id="cb913-5"><a href="wchar.html#cb913-5" aria-hidden="true" tabindex="-1"></a>Word: &quot;dude&quot;</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-259">See Also</h3>
<p><a href="stringref.html#man-strtok"><code>strtok()</code></a></p>
<hr />
<h2 data-number="31.25" id="man-wcslen"><span class="header-section-number">31.25</span> <code>wcslen()</code></h2>
<p></p>
<p>Returns the length of a wide string</p>
<h3 class="unnumbered unlisted" id="synopsis-275">Synopsis</h3>
<div class="sourceCode" id="cb914"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb914-1"><a href="wchar.html#cb914-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb914-2"><a href="wchar.html#cb914-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb914-3"><a href="wchar.html#cb914-3" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> wcslen<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>s<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-275">Description</h3>
<p>This is the wide counterpart to <a href="stringref.html#man-strlen"><code>strlen()</code></a>.</p>
<h3 class="unnumbered unlisted" id="return-value-273">Return Value</h3>
<p>Returns the number of wide characters before the wide NUL terminator.</p>
<h3 class="unnumbered unlisted" id="example-277">Example</h3>
<div class="sourceCode" id="cb915"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb915-1"><a href="wchar.html#cb915-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb915-2"><a href="wchar.html#cb915-2"></a></span>
<span id="cb915-3"><a href="wchar.html#cb915-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb915-4"><a href="wchar.html#cb915-4"></a><span class="op">{</span></span>
<span id="cb915-5"><a href="wchar.html#cb915-5"></a>    <span class="dt">wchar_t</span> <span class="op">*</span>s <span class="op">=</span> <span class="st">L&quot;Hello, world!&quot;</span><span class="op">;</span> <span class="co">// 13 characters</span></span>
<span id="cb915-6"><a href="wchar.html#cb915-6"></a></span>
<span id="cb915-7"><a href="wchar.html#cb915-7"></a>    <span class="co">// prints &quot;The string is 13 characters long.&quot;:</span></span>
<span id="cb915-8"><a href="wchar.html#cb915-8"></a></span>
<span id="cb915-9"><a href="wchar.html#cb915-9"></a>    wprintf<span class="op">(</span><span class="st">L&quot;The string is </span><span class="sc">%zu</span><span class="st"> characters long.</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> wcslen<span class="op">(</span>s<span class="op">));</span></span>
<span id="cb915-10"><a href="wchar.html#cb915-10"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-260">See Also</h3>
<p><a href="stringref.html#man-strlen"><code>strlen()</code></a></p>
<hr />
<h2 data-number="31.26" id="man-wcsftime"><span class="header-section-number">31.26</span> <code>wcsftime()</code></h2>
<p></p>
<p>Formatted date and time output</p>
<h3 class="unnumbered unlisted" id="synopsis-276">Synopsis</h3>
<div class="sourceCode" id="cb916"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb916-1"><a href="wchar.html#cb916-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb916-2"><a href="wchar.html#cb916-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb916-3"><a href="wchar.html#cb916-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb916-4"><a href="wchar.html#cb916-4" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> wcsftime<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span> <span class="dt">size_t</span> maxsize<span class="op">,</span></span>
<span id="cb916-5"><a href="wchar.html#cb916-5" aria-hidden="true" tabindex="-1"></a>                <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> format<span class="op">,</span></span>
<span id="cb916-6"><a href="wchar.html#cb916-6" aria-hidden="true" tabindex="-1"></a>                <span class="dt">const</span> <span class="kw">struct</span> tm <span class="op">*</span> <span class="dt">restrict</span> timeptr<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-276">Description</h3>
<p>This is the wide equivalent to <a href="time.html#man-strftime"><code>strftime()</code></a>. See that reference page for details.</p>
<p><code>maxsize</code> here refers to the maximum number of wide characters that can be in the result string.</p>
<h3 class="unnumbered unlisted" id="return-value-274">Return Value</h3>
<p>If successful, returns the number of wide characters written.</p>
<p>If not successful because the result couldn’t fit in the space alloted, <code>0</code> is returned and the contents of the string could be anything.</p>
<h3 class="unnumbered unlisted" id="example-278">Example</h3>
<div class="sourceCode" id="cb917"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb917-1"><a href="wchar.html#cb917-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb917-2"><a href="wchar.html#cb917-2"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb917-3"><a href="wchar.html#cb917-3"></a></span>
<span id="cb917-4"><a href="wchar.html#cb917-4"></a><span class="pp">#define BUFSIZE </span><span class="dv">128</span></span>
<span id="cb917-5"><a href="wchar.html#cb917-5"></a></span>
<span id="cb917-6"><a href="wchar.html#cb917-6"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb917-7"><a href="wchar.html#cb917-7"></a><span class="op">{</span></span>
<span id="cb917-8"><a href="wchar.html#cb917-8"></a>    <span class="dt">wchar_t</span> s<span class="op">[</span>BUFSIZE<span class="op">];</span></span>
<span id="cb917-9"><a href="wchar.html#cb917-9"></a>    <span class="dt">time_t</span> now <span class="op">=</span> time<span class="op">(</span>NULL<span class="op">);</span></span>
<span id="cb917-10"><a href="wchar.html#cb917-10"></a></span>
<span id="cb917-11"><a href="wchar.html#cb917-11"></a>    <span class="co">// %c: print date as per current locale</span></span>
<span id="cb917-12"><a href="wchar.html#cb917-12"></a>    wcsftime<span class="op">(</span>s<span class="op">,</span> BUFSIZE<span class="op">,</span> <span class="st">L&quot;</span><span class="sc">%c</span><span class="st">&quot;</span><span class="op">,</span> localtime<span class="op">(&amp;</span>now<span class="op">));</span></span>
<span id="cb917-13"><a href="wchar.html#cb917-13"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">);</span>   <span class="co">// Sun Feb 28 22:29:00 2021</span></span>
<span id="cb917-14"><a href="wchar.html#cb917-14"></a></span>
<span id="cb917-15"><a href="wchar.html#cb917-15"></a>    <span class="co">// %A: full weekday name</span></span>
<span id="cb917-16"><a href="wchar.html#cb917-16"></a>    <span class="co">// %B: full month name</span></span>
<span id="cb917-17"><a href="wchar.html#cb917-17"></a>    <span class="co">// %d: day of the month</span></span>
<span id="cb917-18"><a href="wchar.html#cb917-18"></a>    wcsftime<span class="op">(</span>s<span class="op">,</span> BUFSIZE<span class="op">,</span> <span class="st">L&quot;</span><span class="sc">%A</span><span class="st">, %B </span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> localtime<span class="op">(&amp;</span>now<span class="op">));</span></span>
<span id="cb917-19"><a href="wchar.html#cb917-19"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">);</span>   <span class="co">// Sunday, February 28</span></span>
<span id="cb917-20"><a href="wchar.html#cb917-20"></a></span>
<span id="cb917-21"><a href="wchar.html#cb917-21"></a>    <span class="co">// %I: hour (12 hour clock)</span></span>
<span id="cb917-22"><a href="wchar.html#cb917-22"></a>    <span class="co">// %M: minute</span></span>
<span id="cb917-23"><a href="wchar.html#cb917-23"></a>    <span class="co">// %S: second</span></span>
<span id="cb917-24"><a href="wchar.html#cb917-24"></a>    <span class="co">// %p: AM or PM</span></span>
<span id="cb917-25"><a href="wchar.html#cb917-25"></a>    wcsftime<span class="op">(</span>s<span class="op">,</span> BUFSIZE<span class="op">,</span> <span class="st">L&quot;It&#39;s %I:%M:%S </span><span class="sc">%p</span><span class="st">&quot;</span><span class="op">,</span> localtime<span class="op">(&amp;</span>now<span class="op">));</span></span>
<span id="cb917-26"><a href="wchar.html#cb917-26"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">);</span>   <span class="co">// It&#39;s 10:29:00 PM</span></span>
<span id="cb917-27"><a href="wchar.html#cb917-27"></a></span>
<span id="cb917-28"><a href="wchar.html#cb917-28"></a>    <span class="co">// %F: ISO 8601 yyyy-mm-dd</span></span>
<span id="cb917-29"><a href="wchar.html#cb917-29"></a>    <span class="co">// %T: ISO 8601 hh:mm:ss</span></span>
<span id="cb917-30"><a href="wchar.html#cb917-30"></a>    <span class="co">// %z: ISO 8601 time zone offset</span></span>
<span id="cb917-31"><a href="wchar.html#cb917-31"></a>    wcsftime<span class="op">(</span>s<span class="op">,</span> BUFSIZE<span class="op">,</span> <span class="st">L&quot;ISO 8601: </span><span class="sc">%F</span><span class="st">T%T%z&quot;</span><span class="op">,</span> localtime<span class="op">(&amp;</span>now<span class="op">));</span></span>
<span id="cb917-32"><a href="wchar.html#cb917-32"></a>    wprintf<span class="op">(</span><span class="st">L&quot;</span><span class="sc">%ls\n</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">);</span>   <span class="co">// ISO 8601: 2021-02-28T22:29:00-0800</span></span>
<span id="cb917-33"><a href="wchar.html#cb917-33"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-261">See Also</h3>
<p><a href="time.html#man-strftime"><code>strftime()</code></a></p>
<hr />
<h2 data-number="31.27" id="man-btowc"><span class="header-section-number">31.27</span> <code>btowc()</code> <code>wctob()</code></h2>
<p> </p>
<p>Convert a single byte character to a wide character</p>
<h3 class="unnumbered unlisted" id="synopsis-277">Synopsis</h3>
<div class="sourceCode" id="cb918"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb918-1"><a href="wchar.html#cb918-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb918-2"><a href="wchar.html#cb918-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb918-3"><a href="wchar.html#cb918-3" aria-hidden="true" tabindex="-1"></a><span class="dt">wint_t</span> btowc<span class="op">(</span><span class="dt">int</span> c<span class="op">);</span></span>
<span id="cb918-4"><a href="wchar.html#cb918-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb918-5"><a href="wchar.html#cb918-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> wctob<span class="op">(</span><span class="dt">wint_t</span> c<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-277">Description</h3>
<p>These functions convert between single byte characters and wide characters, and vice-versa.</p>
<p>Even though <code>int</code>s are involved, don’t let this mislead you; they’re effectively converted to <code>unsigned char</code>s internally.</p>
<p>The characters in the basic character set are guaranteed to be a single byte.</p>
<h3 class="unnumbered unlisted" id="return-value-275">Return Value</h3>
<p><code>btowc()</code> returns the single-byte character as a wide character. Returns <code>WEOF</code> if <code>EOF</code> is passed in, or if the byte doesn’t correspond to a valid wide character.</p>
<p><code>wctob()</code> returns the wide character as a single-byte character. Returns <code>EOF</code> if <code>WEOF</code> is passed in, or if the wide character doesn’t correspond to a value single-byte character.</p>
<p>See <a href="stdlib.html#man-mbtowc"><code>mbtowc()</code></a> and <a href="stdlib.html#man-wctomb"><code>wctomb()</code></a> for multibyte to wide character conversion.</p>
<h3 class="unnumbered unlisted" id="example-279">Example</h3>
<div class="sourceCode" id="cb919"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb919-1"><a href="wchar.html#cb919-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb919-2"><a href="wchar.html#cb919-2"></a></span>
<span id="cb919-3"><a href="wchar.html#cb919-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb919-4"><a href="wchar.html#cb919-4"></a><span class="op">{</span></span>
<span id="cb919-5"><a href="wchar.html#cb919-5"></a>    <span class="dt">wint_t</span> wc <span class="op">=</span> btowc<span class="op">(</span><span class="ch">&#39;B&#39;</span><span class="op">);</span>    <span class="co">// Convert single byte to wide char</span></span>
<span id="cb919-6"><a href="wchar.html#cb919-6"></a></span>
<span id="cb919-7"><a href="wchar.html#cb919-7"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Wide character: </span><span class="sc">%lc\n</span><span class="st">&quot;</span><span class="op">,</span> wc<span class="op">);</span></span>
<span id="cb919-8"><a href="wchar.html#cb919-8"></a></span>
<span id="cb919-9"><a href="wchar.html#cb919-9"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> c <span class="op">=</span> wctob<span class="op">(</span>wc<span class="op">);</span>  <span class="co">// Convert back to single byte</span></span>
<span id="cb919-10"><a href="wchar.html#cb919-10"></a></span>
<span id="cb919-11"><a href="wchar.html#cb919-11"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Single-byte character: </span><span class="sc">%c\n</span><span class="st">&quot;</span><span class="op">,</span> c<span class="op">);</span></span>
<span id="cb919-12"><a href="wchar.html#cb919-12"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb920"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb920-1"><a href="wchar.html#cb920-1" aria-hidden="true" tabindex="-1"></a>Wide character: B</span>
<span id="cb920-2"><a href="wchar.html#cb920-2" aria-hidden="true" tabindex="-1"></a>Single-byte character: B</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-262">See Also</h3>
<p><a href="stdlib.html#man-mbtowc"><code>mbtowc()</code></a>, <a href="stdlib.html#man-wctomb"><code>wctomb()</code></a></p>
<hr />
<h2 data-number="31.28" id="man-mbsinit"><span class="header-section-number">31.28</span> <code>mbsinit()</code></h2>
<p></p>
<p>Test if an <code>mbstate_t</code> is in the initial conversion state</p>
<h3 class="unnumbered unlisted" id="synopsis-278">Synopsis</h3>
<div class="sourceCode" id="cb921"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb921-1"><a href="wchar.html#cb921-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb921-2"><a href="wchar.html#cb921-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-3"><a href="wchar.html#cb921-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> mbsinit<span class="op">(</span><span class="dt">const</span> mbstate_t <span class="op">*</span>ps<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-278">Description</h3>
<p>For a given conversion state in a <code>mbstate_t</code> variable, this function determines if it’s in the initial conversion state.</p>
<h3 class="unnumbered unlisted" id="return-value-276">Return Value</h3>
<p>Returns non-zero if the value pointed to by <code>ps</code> is in the initial conversion state, or if <code>ps</code> is <code>NULL</code>.</p>
<p>Returns <code>0</code> if the value pointed to by <code>ps</code> is <strong>not</strong> in the initial conversion state.</p>
<h3 class="unnumbered unlisted" id="example-280">Example</h3>
<p>For me, this example doesn’t do anything exciting, saying that the <code>mbstate_t</code> variable is always in the initial state. Yay.</p>
<p>But if have a stateful encoding like 2022-JP, try messing around with this to see if you can get into an intermediate state.</p>
<p>This program has a bit of code at the top that reports if your locale’s encoding requires any state.</p>
<div class="sourceCode" id="cb922"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb922-1"><a href="wchar.html#cb922-1"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span><span class="pp">   </span><span class="co">// For setlocale()</span></span>
<span id="cb922-2"><a href="wchar.html#cb922-2"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span><span class="pp">   </span><span class="co">// For memset()</span></span>
<span id="cb922-3"><a href="wchar.html#cb922-3"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span><span class="pp">   </span><span class="co">// For mbtowc()</span></span>
<span id="cb922-4"><a href="wchar.html#cb922-4"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb922-5"><a href="wchar.html#cb922-5"></a></span>
<span id="cb922-6"><a href="wchar.html#cb922-6"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb922-7"><a href="wchar.html#cb922-7"></a><span class="op">{</span></span>
<span id="cb922-8"><a href="wchar.html#cb922-8"></a>    mbstate_t state<span class="op">;</span></span>
<span id="cb922-9"><a href="wchar.html#cb922-9"></a>    <span class="dt">wchar_t</span> wc<span class="op">[</span><span class="dv">128</span><span class="op">];</span></span>
<span id="cb922-10"><a href="wchar.html#cb922-10"></a></span>
<span id="cb922-11"><a href="wchar.html#cb922-11"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb922-12"><a href="wchar.html#cb922-12"></a></span>
<span id="cb922-13"><a href="wchar.html#cb922-13"></a>    <span class="dt">int</span> is_state_dependent <span class="op">=</span> mbtowc<span class="op">(</span>NULL<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb922-14"><a href="wchar.html#cb922-14"></a></span>
<span id="cb922-15"><a href="wchar.html#cb922-15"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Is encoding state dependent? </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> is_state_dependent<span class="op">);</span></span>
<span id="cb922-16"><a href="wchar.html#cb922-16"></a></span>
<span id="cb922-17"><a href="wchar.html#cb922-17"></a>    memset<span class="op">(&amp;</span>state<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span> state<span class="op">);</span>  <span class="co">// Set to initial state</span></span>
<span id="cb922-18"><a href="wchar.html#cb922-18"></a></span>
<span id="cb922-19"><a href="wchar.html#cb922-19"></a>    wprintf<span class="op">(</span><span class="st">L&quot;In initial conversion state? </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> mbsinit<span class="op">(&amp;</span>state<span class="op">));</span></span>
<span id="cb922-20"><a href="wchar.html#cb922-20"></a></span>
<span id="cb922-21"><a href="wchar.html#cb922-21"></a>    mbrtowc<span class="op">(</span>wc<span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb922-22"><a href="wchar.html#cb922-22"></a></span>
<span id="cb922-23"><a href="wchar.html#cb922-23"></a>    wprintf<span class="op">(</span><span class="st">L&quot;In initial conversion state? </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> mbsinit<span class="op">(&amp;</span>state<span class="op">));</span></span>
<span id="cb922-24"><a href="wchar.html#cb922-24"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-263">See Also</h3>
<p><a href="stdlib.html#man-mbtowc"><code>mbtowc()</code></a>, <a href="stdlib.html#man-wctomb"><code>wctomb()</code></a>, <a href="wchar.html#man-mbrtowc"><code>mbrtowc()</code></a>, <a href="wchar.html#man-wcrtomb"><code>wcrtomb()</code></a></p>
<hr />
<h2 data-number="31.29" id="man-mbrlen"><span class="header-section-number">31.29</span> <code>mbrlen()</code></h2>
<p></p>
<p>Compute the number of bytes in a multibyte character, restartably</p>
<h3 class="unnumbered unlisted" id="synopsis-279">Synopsis</h3>
<div class="sourceCode" id="cb923"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb923-1"><a href="wchar.html#cb923-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb923-2"><a href="wchar.html#cb923-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-3"><a href="wchar.html#cb923-3" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> mbrlen<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span> <span class="dt">size_t</span> n<span class="op">,</span> mbstate_t <span class="op">*</span> <span class="dt">restrict</span> ps<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-279">Description</h3>
<p>This is the restartable version of <a href="stdlib.html#man-mblen"><code>mblen()</code></a>.</p>
<p>It inspects at most <code>n</code> bytes of the string <code>s</code> to see how many bytes in this character.</p>
<p>The conversion state is stored in <code>ps</code>.</p>
<p>This function doesn’t have the functionality of <code>mblen()</code> that allowed you to query if this character encoding was stateful and to reset the internal state.</p>
<h3 class="unnumbered unlisted" id="return-value-277">Return Value</h3>
<p>Returns the number of bytes required for this multibyte character.</p>
<p>Returns <code>(size_t)(-1)</code> if the data in <code>s</code> is not a valid multibyte character.</p>
<p>Returns <code>(size_t)(-2)</code> if the data is <code>s</code> is a valid but not complete multibyte character.</p>
<h3 class="unnumbered unlisted" id="example-281">Example</h3>
<p>If your character set doesn’t support the Euro symbol “€”, substitute the Unicode escape sequence <code>\u20ac</code>, below.</p>
<div class="sourceCode" id="cb924"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb924-1"><a href="wchar.html#cb924-1"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span><span class="pp">   </span><span class="co">// For setlocale()</span></span>
<span id="cb924-2"><a href="wchar.html#cb924-2"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span><span class="pp">   </span><span class="co">// For memset()</span></span>
<span id="cb924-3"><a href="wchar.html#cb924-3"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb924-4"><a href="wchar.html#cb924-4"></a></span>
<span id="cb924-5"><a href="wchar.html#cb924-5"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb924-6"><a href="wchar.html#cb924-6"></a><span class="op">{</span></span>
<span id="cb924-7"><a href="wchar.html#cb924-7"></a>    mbstate_t state<span class="op">;</span></span>
<span id="cb924-8"><a href="wchar.html#cb924-8"></a>    <span class="dt">int</span> len<span class="op">;</span></span>
<span id="cb924-9"><a href="wchar.html#cb924-9"></a></span>
<span id="cb924-10"><a href="wchar.html#cb924-10"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb924-11"><a href="wchar.html#cb924-11"></a></span>
<span id="cb924-12"><a href="wchar.html#cb924-12"></a>    memset<span class="op">(&amp;</span>state<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span> state<span class="op">);</span>  <span class="co">// Set to initial state</span></span>
<span id="cb924-13"><a href="wchar.html#cb924-13"></a></span>
<span id="cb924-14"><a href="wchar.html#cb924-14"></a>    len <span class="op">=</span> mbrlen<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb924-15"><a href="wchar.html#cb924-15"></a></span>
<span id="cb924-16"><a href="wchar.html#cb924-16"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Length of &#39;B&#39; is </span><span class="sc">%d</span><span class="st"> byte(s)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> len<span class="op">);</span></span>
<span id="cb924-17"><a href="wchar.html#cb924-17"></a></span>
<span id="cb924-18"><a href="wchar.html#cb924-18"></a>    len <span class="op">=</span> mbrlen<span class="op">(</span><span class="st">&quot;€&quot;</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb924-19"><a href="wchar.html#cb924-19"></a></span>
<span id="cb924-20"><a href="wchar.html#cb924-20"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Length of &#39;€&#39; is </span><span class="sc">%d</span><span class="st"> byte(s)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> len<span class="op">);</span></span>
<span id="cb924-21"><a href="wchar.html#cb924-21"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb925"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb925-1"><a href="wchar.html#cb925-1" aria-hidden="true" tabindex="-1"></a>Length of &#39;B&#39; is 1 byte(s)</span>
<span id="cb925-2"><a href="wchar.html#cb925-2" aria-hidden="true" tabindex="-1"></a>Length of &#39;€&#39; is 3 byte(s)</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-264">See Also</h3>
<p><a href="stdlib.html#man-mblen"><code>mblen()</code></a></p>
<hr />
<h2 data-number="31.30" id="man-mbrtowc"><span class="header-section-number">31.30</span> <code>mbrtowc()</code></h2>
<p></p>
<p>Convert multibyte to wide characters restartably</p>
<h3 class="unnumbered unlisted" id="synopsis-280">Synopsis</h3>
<div class="sourceCode" id="cb926"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb926-1"><a href="wchar.html#cb926-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb926-2"><a href="wchar.html#cb926-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-3"><a href="wchar.html#cb926-3" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> mbrtowc<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> pwc<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span></span>
<span id="cb926-4"><a href="wchar.html#cb926-4" aria-hidden="true" tabindex="-1"></a>               <span class="dt">size_t</span> n<span class="op">,</span> mbstate_t <span class="op">*</span> <span class="dt">restrict</span> ps<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-280">Description</h3>
<p>This is the restartable counterpart to <a href="stdlib.html#man-mbtowc"><code>mbtowc()</code></a>.</p>
<p>It converts individual characters from multibyte to wide, tracking the conversion state in the variable pointed to by <code>ps</code>.</p>
<p>At most <code>n</code> bytes are inspected for conversion to a wide character.</p>
<p>These two variants are identical and cause the state pointed to by <code>ps</code> to be set to the initial conversion state:</p>
<div class="sourceCode" id="cb927"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb927-1"><a href="wchar.html#cb927-1" aria-hidden="true" tabindex="-1"></a>mbrtowc<span class="op">(</span>NULL<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb927-2"><a href="wchar.html#cb927-2" aria-hidden="true" tabindex="-1"></a>mbrtowc<span class="op">(</span>NULL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span></code></pre></div>
<p>Also, if you’re just interested in the length in bytes of the multibyte character, you can pass <code>NULL</code> for <code>pwc</code> and nothing will be stored for the wide character:</p>
<div class="sourceCode" id="cb928"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb928-1"><a href="wchar.html#cb928-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> len <span class="op">=</span> mbrtowc<span class="op">(</span>NULL<span class="op">,</span> <span class="st">&quot;€&quot;</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span></code></pre></div>
<p>This function doesn’t have the functionality of <code>mbtowc()</code> that allowed you to query if this character encoding was stateful and to reset the internal state.</p>
<h3 class="unnumbered unlisted" id="return-value-278">Return Value</h3>
<p>On success, returns a positive number corresponding to the number of bytes in the multibyte character.</p>
<p>Returns <code>0</code> if the character encoded is a wide NUL character.</p>
<p>Returns <code>(size_t)(-1)</code> if the data in <code>s</code> is not a valid multibyte character.</p>
<p>Returns <code>(size_t)(-2)</code> if the data is <code>s</code> is a valid but not complete multibyte character.</p>
<h3 class="unnumbered unlisted" id="example-282">Example</h3>
<p>If your character set doesn’t support the Euro symbol “€”, substitute the Unicode escape sequence <code>\u20ac</code>, below.</p>
<div class="sourceCode" id="cb929"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb929-1"><a href="wchar.html#cb929-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span><span class="pp">  </span><span class="co">// For memset()</span></span>
<span id="cb929-2"><a href="wchar.html#cb929-2"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span><span class="pp">  </span><span class="co">// For mbtowc()</span></span>
<span id="cb929-3"><a href="wchar.html#cb929-3"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span><span class="pp">  </span><span class="co">// For setlocale()</span></span>
<span id="cb929-4"><a href="wchar.html#cb929-4"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb929-5"><a href="wchar.html#cb929-5"></a></span>
<span id="cb929-6"><a href="wchar.html#cb929-6"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb929-7"><a href="wchar.html#cb929-7"></a><span class="op">{</span></span>
<span id="cb929-8"><a href="wchar.html#cb929-8"></a>    mbstate_t state<span class="op">;</span></span>
<span id="cb929-9"><a href="wchar.html#cb929-9"></a></span>
<span id="cb929-10"><a href="wchar.html#cb929-10"></a>    memset<span class="op">(&amp;</span>state<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span> state<span class="op">);</span></span>
<span id="cb929-11"><a href="wchar.html#cb929-11"></a></span>
<span id="cb929-12"><a href="wchar.html#cb929-12"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb929-13"><a href="wchar.html#cb929-13"></a></span>
<span id="cb929-14"><a href="wchar.html#cb929-14"></a>    wprintf<span class="op">(</span><span class="st">L&quot;State dependency: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> mbtowc<span class="op">(</span>NULL<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">));</span></span>
<span id="cb929-15"><a href="wchar.html#cb929-15"></a></span>
<span id="cb929-16"><a href="wchar.html#cb929-16"></a>    <span class="dt">wchar_t</span> wc<span class="op">;</span></span>
<span id="cb929-17"><a href="wchar.html#cb929-17"></a>    <span class="dt">int</span> bytes<span class="op">;</span></span>
<span id="cb929-18"><a href="wchar.html#cb929-18"></a></span>
<span id="cb929-19"><a href="wchar.html#cb929-19"></a>    bytes <span class="op">=</span> mbrtowc<span class="op">(&amp;</span>wc<span class="op">,</span> <span class="st">&quot;€&quot;</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb929-20"><a href="wchar.html#cb929-20"></a></span>
<span id="cb929-21"><a href="wchar.html#cb929-21"></a>    wprintf<span class="op">(</span><span class="st">L&quot;L&#39;</span><span class="sc">%lc</span><span class="st">&#39; takes </span><span class="sc">%d</span><span class="st"> bytes as multibyte char &#39;€&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> wc<span class="op">,</span> bytes<span class="op">);</span></span>
<span id="cb929-22"><a href="wchar.html#cb929-22"></a><span class="op">}</span></span></code></pre></div>
<p>Output on my system:</p>
<div class="sourceCode" id="cb930"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb930-1"><a href="wchar.html#cb930-1" aria-hidden="true" tabindex="-1"></a>State dependency: 0</span>
<span id="cb930-2"><a href="wchar.html#cb930-2" aria-hidden="true" tabindex="-1"></a>L&#39;€&#39; takes 3 bytes as multibyte char &#39;€&#39;</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-265">See Also</h3>
<p><a href="stdlib.html#man-mbtowc"><code>mbtowc()</code></a>, <a href="wchar.html#man-wcrtomb"><code>wcrtomb()</code></a></p>
<hr />
<h2 data-number="31.31" id="man-wcrtomb"><span class="header-section-number">31.31</span> <code>wcrtomb()</code></h2>
<p></p>
<p>Convert wide to multibyte characters restartably</p>
<h3 class="unnumbered unlisted" id="synopsis-281">Synopsis</h3>
<div class="sourceCode" id="cb931"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb931-1"><a href="wchar.html#cb931-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb931-2"><a href="wchar.html#cb931-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb931-3"><a href="wchar.html#cb931-3" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> wcrtomb<span class="op">(</span><span class="dt">char</span> <span class="op">*</span> <span class="dt">restrict</span> s<span class="op">,</span> <span class="dt">wchar_t</span> wc<span class="op">,</span> mbstate_t <span class="op">*</span> <span class="dt">restrict</span> ps<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-281">Description</h3>
<p>This is the restartable counterpart to <a href="stdlib.html#man-wctomb"><code>wctomb()</code></a>.</p>
<p>It converts individual characters from wide to multibyte, tracking the conversion state in the variable pointed to by <code>ps</code>.</p>
<p>The destination array <code>s</code> should be at least <code>MB_CUR_MAX</code><a href="wctype.html#fn80" class="footnote-ref" id="fnref80" role="doc-noteref"><sup>80</sup></a> bytes in size—you won’t get anything bigger back from this function.</p>
<p>Note that the values in this result array won’t be NUL-terminated.</p>
<p>If you pass a wide NUL character in, the result will contain any bytes needed to restore the conversion state to its initial state followed by a NUL character, and the state pointed to by <code>ps</code> will be reset to its initial state:</p>
<div class="sourceCode" id="cb932"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb932-1"><a href="wchar.html#cb932-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Reset state</span></span>
<span id="cb932-2"><a href="wchar.html#cb932-2" aria-hidden="true" tabindex="-1"></a>wcrtomb<span class="op">(</span>mb<span class="op">,</span> <span class="ch">L&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">)</span></span></code></pre></div>
<p>If you don’t care about the results (i.e. you’re just interested in resetting the state or getting the return value), you can do this by passing <code>NULL</code> for <code>s</code>:</p>
<div class="sourceCode" id="cb933"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb933-1"><a href="wchar.html#cb933-1" aria-hidden="true" tabindex="-1"></a>wcrtomb<span class="op">(</span>NULL<span class="op">,</span> <span class="ch">L&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span>                <span class="co">// Reset state</span></span>
<span id="cb933-2"><a href="wchar.html#cb933-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb933-3"><a href="wchar.html#cb933-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> byte_count <span class="op">=</span> wctomb<span class="op">(</span>NULL<span class="op">,</span> <span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span>  <span class="co">// Count bytes in &#39;X&#39;</span></span></code></pre></div>
<p>This function doesn’t have the functionality of <code>wctomb()</code> that allowed you to query if this character encoding was stateful and to reset the internal state.</p>
<h3 class="unnumbered unlisted" id="return-value-279">Return Value</h3>
<p>On success, returns the number of bytes needed to encode this wide character in the current locale.</p>
<p>If the input is an invalid wide character, <code>errno</code> will be set to <code>EILSEQ</code> and the function returns <code>(size_t)(-1)</code>. If this happens, all bets are off for the conversion state, so you might as well reset it.</p>
<h3 class="unnumbered unlisted" id="example-283">Example</h3>
<p>If your character set doesn’t support the Euro symbol “€”, substitute the Unicode escape sequence <code>\u20ac</code>, below.</p>
<div class="sourceCode" id="cb934"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb934-1"><a href="wchar.html#cb934-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span><span class="pp">  </span><span class="co">// For memset()</span></span>
<span id="cb934-2"><a href="wchar.html#cb934-2"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span><span class="pp">  </span><span class="co">// For mbtowc()</span></span>
<span id="cb934-3"><a href="wchar.html#cb934-3"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span><span class="pp">  </span><span class="co">// For setlocale()</span></span>
<span id="cb934-4"><a href="wchar.html#cb934-4"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb934-5"><a href="wchar.html#cb934-5"></a></span>
<span id="cb934-6"><a href="wchar.html#cb934-6"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb934-7"><a href="wchar.html#cb934-7"></a><span class="op">{</span></span>
<span id="cb934-8"><a href="wchar.html#cb934-8"></a>    mbstate_t state<span class="op">;</span></span>
<span id="cb934-9"><a href="wchar.html#cb934-9"></a></span>
<span id="cb934-10"><a href="wchar.html#cb934-10"></a>    memset<span class="op">(&amp;</span>state<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span> state<span class="op">);</span></span>
<span id="cb934-11"><a href="wchar.html#cb934-11"></a></span>
<span id="cb934-12"><a href="wchar.html#cb934-12"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb934-13"><a href="wchar.html#cb934-13"></a></span>
<span id="cb934-14"><a href="wchar.html#cb934-14"></a>    wprintf<span class="op">(</span><span class="st">L&quot;State dependency: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> mbtowc<span class="op">(</span>NULL<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">));</span></span>
<span id="cb934-15"><a href="wchar.html#cb934-15"></a></span>
<span id="cb934-16"><a href="wchar.html#cb934-16"></a>    <span class="dt">char</span> mb<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">0</span><span class="op">};</span></span>
<span id="cb934-17"><a href="wchar.html#cb934-17"></a>    <span class="dt">int</span> bytes <span class="op">=</span> wcrtomb<span class="op">(</span>mb<span class="op">,</span> <span class="ch">L&#39;€&#39;</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb934-18"><a href="wchar.html#cb934-18"></a></span>
<span id="cb934-19"><a href="wchar.html#cb934-19"></a>    wprintf<span class="op">(</span><span class="st">L&quot;L&#39;€&#39; takes </span><span class="sc">%d</span><span class="st"> bytes as multibyte char &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> bytes<span class="op">,</span> mb<span class="op">);</span></span>
<span id="cb934-20"><a href="wchar.html#cb934-20"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-266">See Also</h3>
<p><a href="wchar.html#man-mbrtowc"><code>mbrtowc()</code></a>, <a href="stdlib.html#man-wctomb"><code>wctomb()</code></a>, <a href="errno.html#errno"><code>errno</code></a></p>
<hr />
<h2 data-number="31.32" id="man-mbsrtowcs"><span class="header-section-number">31.32</span> <code>mbsrtowcs()</code></h2>
<p></p>
<p>Convert a multibyte string to a wide character string restartably</p>
<h3 class="unnumbered unlisted" id="synopsis-282">Synopsis</h3>
<div class="sourceCode" id="cb935"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb935-1"><a href="wchar.html#cb935-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb935-2"><a href="wchar.html#cb935-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb935-3"><a href="wchar.html#cb935-3" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> mbsrtowcs<span class="op">(</span><span class="dt">wchar_t</span> <span class="op">*</span> <span class="dt">restrict</span> dst<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">**</span> <span class="dt">restrict</span> src<span class="op">,</span></span>
<span id="cb935-4"><a href="wchar.html#cb935-4" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">size_t</span> len<span class="op">,</span> mbstate_t <span class="op">*</span> <span class="dt">restrict</span> ps<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-282">Description</h3>
<p>This is the restartable version of <a href="stdlib.html#man-mbstowcs"><code>mbstowcs()</code></a>.</p>
<p>It converts a multibyte string to a wide character string.</p>
<p>The result is put in the buffer pointed to by <code>dst</code>, and the pointer <code>src</code> is updated to indicate how much of the string was consumed (unless <code>dst</code> is <code>NULL</code>).</p>
<p>At most <code>len</code> wide characters will be stored.</p>
<p>This also takes a pointer to its own <code>mbstate_t</code> variable in <code>ps</code> for holding the conversion state.</p>
<p>You can set <code>dst</code> to <code>NULL</code> if you only care about the return value. This could be useful for getting the number of characters in a multibyte string.</p>
<p>In the normal case, the <code>src</code> string will be consumed up to the NUL character, and the results will be stored in the <code>dst</code> buffer, including the wide NUL character. In this case, the pointer pointed to by <code>src</code> will be set to <code>NULL</code>. And the conversion state will be set to the initial conversion state.</p>
<p>If things go wrong because the source string isn’t a valid sequence of characters, conversion will stop and the pointer pointed to by <code>src</code> will be set to the address just after the last successfully-translated multibyte character.</p>
<h3 class="unnumbered unlisted" id="return-value-280">Return Value</h3>
<p>If successful, returns the number of characters converted, not including any NUL terminator.</p>
<p>If the multibyte sequence is invalid, the function returns <code>(size_t)(-1)</code> and <code>errno</code> is set to <code>EILSEQ</code>.</p>
<h3 class="unnumbered unlisted" id="example-284">Example</h3>
<p>Here we’ll convert the string “€5 ± π” into a wide character string:</p>
<div class="sourceCode" id="cb936"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb936-1"><a href="wchar.html#cb936-1"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span><span class="pp">  </span><span class="co">// For setlocale()</span></span>
<span id="cb936-2"><a href="wchar.html#cb936-2"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span><span class="pp">  </span><span class="co">// For memset()</span></span>
<span id="cb936-3"><a href="wchar.html#cb936-3"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb936-4"><a href="wchar.html#cb936-4"></a></span>
<span id="cb936-5"><a href="wchar.html#cb936-5"></a><span class="pp">#define WIDE_STR_SIZE </span><span class="dv">10</span></span>
<span id="cb936-6"><a href="wchar.html#cb936-6"></a></span>
<span id="cb936-7"><a href="wchar.html#cb936-7"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb936-8"><a href="wchar.html#cb936-8"></a><span class="op">{</span></span>
<span id="cb936-9"><a href="wchar.html#cb936-9"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>mbs <span class="op">=</span> <span class="st">&quot;€5 ± π&quot;</span><span class="op">;</span>  <span class="co">// That&#39;s the exact price range</span></span>
<span id="cb936-10"><a href="wchar.html#cb936-10"></a></span>
<span id="cb936-11"><a href="wchar.html#cb936-11"></a>    <span class="dt">wchar_t</span> wcs<span class="op">[</span>WIDE_STR_SIZE<span class="op">];</span></span>
<span id="cb936-12"><a href="wchar.html#cb936-12"></a></span>
<span id="cb936-13"><a href="wchar.html#cb936-13"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb936-14"><a href="wchar.html#cb936-14"></a>    </span>
<span id="cb936-15"><a href="wchar.html#cb936-15"></a>    mbstate_t state<span class="op">;</span></span>
<span id="cb936-16"><a href="wchar.html#cb936-16"></a>    memset<span class="op">(&amp;</span>state<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span> state<span class="op">);</span></span>
<span id="cb936-17"><a href="wchar.html#cb936-17"></a></span>
<span id="cb936-18"><a href="wchar.html#cb936-18"></a>    <span class="dt">size_t</span> count <span class="op">=</span> mbsrtowcs<span class="op">(</span>wcs<span class="op">,</span> <span class="op">&amp;</span>mbs<span class="op">,</span> WIDE_STR_SIZE<span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb936-19"><a href="wchar.html#cb936-19"></a></span>
<span id="cb936-20"><a href="wchar.html#cb936-20"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Wide string L</span><span class="sc">\&quot;%ls\&quot;</span><span class="st"> is </span><span class="sc">%d</span><span class="st"> characters</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> wcs<span class="op">,</span> count<span class="op">);</span></span>
<span id="cb936-21"><a href="wchar.html#cb936-21"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb937"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb937-1"><a href="wchar.html#cb937-1" aria-hidden="true" tabindex="-1"></a>Wide string L&quot;€5 ± π&quot; is 6 characters</span></code></pre></div>
<p>Here’s another example of using <code>mbsrtowcs()</code> to get the length in characters of a multibyte string even if the string is full of multibyte characters. This is in contrast to <code>strlen()</code>, which returns the total number of bytes in the string.</p>
<div class="sourceCode" id="cb938"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb938-1"><a href="wchar.html#cb938-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">   </span><span class="co">// For printf()</span></span>
<span id="cb938-2"><a href="wchar.html#cb938-2"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span><span class="pp">  </span><span class="co">// For setlocale()</span></span>
<span id="cb938-3"><a href="wchar.html#cb938-3"></a></span>
<span id="cb938-4"><a href="wchar.html#cb938-4"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span><span class="pp">  </span><span class="co">// For memset()</span></span>
<span id="cb938-5"><a href="wchar.html#cb938-5"></a><span class="pp">#include </span><span class="im">&lt;stdint.h&gt;</span><span class="pp">  </span><span class="co">// For SIZE_MAX</span></span>
<span id="cb938-6"><a href="wchar.html#cb938-6"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb938-7"><a href="wchar.html#cb938-7"></a></span>
<span id="cb938-8"><a href="wchar.html#cb938-8"></a><span class="dt">size_t</span> mbstrlen<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>mbs<span class="op">)</span></span>
<span id="cb938-9"><a href="wchar.html#cb938-9"></a><span class="op">{</span></span>
<span id="cb938-10"><a href="wchar.html#cb938-10"></a>    mbstate_t state<span class="op">;</span></span>
<span id="cb938-11"><a href="wchar.html#cb938-11"></a></span>
<span id="cb938-12"><a href="wchar.html#cb938-12"></a>    memset<span class="op">(&amp;</span>state<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span> state<span class="op">);</span></span>
<span id="cb938-13"><a href="wchar.html#cb938-13"></a></span>
<span id="cb938-14"><a href="wchar.html#cb938-14"></a>    <span class="cf">return</span> mbsrtowcs<span class="op">(</span>NULL<span class="op">,</span> <span class="op">&amp;</span>mbs<span class="op">,</span> SIZE_MAX<span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb938-15"><a href="wchar.html#cb938-15"></a><span class="op">}</span></span>
<span id="cb938-16"><a href="wchar.html#cb938-16"></a></span>
<span id="cb938-17"><a href="wchar.html#cb938-17"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb938-18"><a href="wchar.html#cb938-18"></a><span class="op">{</span></span>
<span id="cb938-19"><a href="wchar.html#cb938-19"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb938-20"><a href="wchar.html#cb938-20"></a>    </span>
<span id="cb938-21"><a href="wchar.html#cb938-21"></a>    <span class="dt">char</span> <span class="op">*</span>mbs <span class="op">=</span> <span class="st">&quot;€5 ± π&quot;</span><span class="op">;</span>  <span class="co">// That&#39;s the exact price range</span></span>
<span id="cb938-22"><a href="wchar.html#cb938-22"></a></span>
<span id="cb938-23"><a href="wchar.html#cb938-23"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;%s\&quot;</span><span class="st"> is </span><span class="sc">%zu</span><span class="st"> characters...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> mbs<span class="op">,</span> mbstrlen<span class="op">(</span>mbs<span class="op">));</span> </span>
<span id="cb938-24"><a href="wchar.html#cb938-24"></a>    printf<span class="op">(</span><span class="st">&quot;but it&#39;s </span><span class="sc">%zu</span><span class="st"> bytes!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> strlen<span class="op">(</span>mbs<span class="op">));</span></span>
<span id="cb938-25"><a href="wchar.html#cb938-25"></a><span class="op">}</span></span></code></pre></div>
<p>Output on my system:</p>
<div class="sourceCode" id="cb939"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb939-1"><a href="wchar.html#cb939-1" aria-hidden="true" tabindex="-1"></a>&quot;€5 ± π&quot; is 6 characters...</span>
<span id="cb939-2"><a href="wchar.html#cb939-2" aria-hidden="true" tabindex="-1"></a>but it&#39;s 10 bytes!</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-267">See Also</h3>
<p><a href="wchar.html#man-mbrtowc"><code>mbrtowc()</code></a>, <a href="stdlib.html#man-mbstowcs"><code>mbstowcs()</code></a>, <a href="wchar.html#man-wcsrtombs"><code>wcsrtombs()</code></a>, <a href="stringref.html#man-strlen"><code>strlen()</code></a>, <a href="errno.html#errno"><code>errno</code></a></p>
<hr />
<h2 data-number="31.33" id="man-wcsrtombs"><span class="header-section-number">31.33</span> <code>wcsrtombs()</code></h2>
<p></p>
<p>Convert a wide character string to a multibyte string restartably</p>
<h3 class="unnumbered unlisted" id="synopsis-283">Synopsis</h3>
<div class="sourceCode" id="cb940"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb940-1"><a href="wchar.html#cb940-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb940-2"><a href="wchar.html#cb940-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb940-3"><a href="wchar.html#cb940-3" aria-hidden="true" tabindex="-1"></a><span class="dt">size_t</span> wcsrtombs<span class="op">(</span><span class="dt">char</span> <span class="op">*</span> <span class="dt">restrict</span> dst<span class="op">,</span> <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">**</span> <span class="dt">restrict</span> src<span class="op">,</span></span>
<span id="cb940-4"><a href="wchar.html#cb940-4" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">size_t</span> len<span class="op">,</span> mbstate_t <span class="op">*</span> <span class="dt">restrict</span> ps<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-283">Description</h3>
<p>If you have a wide character string, you can convert it to a multibyte character string in the current locale using this function.</p>
<p>At most <code>len</code> bytes of data will be stored in the buffer pointed to by <code>dst</code>. Conversion will stop just after the NUL terminator is copied, or <code>len</code> bytes get copied, or some other error occurs.</p>
<p>If <code>dst</code> is a <code>NULL</code> pointer, no result is stored. You might do this if you’re just interested in the return value (nominally the number of bytes this would use in a multibyte string, not including the NUL terminator).</p>
<p>If <code>dst</code> is not a <code>NULL</code> pointer, the pointer pointed to by <code>src</code> will get modified to indicate how much of the data was copied. If it contains <code>NULL</code> at the end, it means everything went well. In this case, the state <code>ps</code> will be set to the initial conversion state.</p>
<p>If <code>len</code> was reached or an error occurred, it’ll point one address past <code>dst+len</code>.</p>
<h3 class="unnumbered unlisted" id="return-value-281">Return Value</h3>
<p>If everything goes well, returns the number of bytes needed for the multibyte string, not counting the NUL terminator.</p>
<p>If any character in the string doesn’t correspond to a valid multibyte character in the currently locale, it returns <code>(size_t)(-1)</code> and <code>EILSEQ</code> is stored in <code>errno</code>.</p>
<h3 class="unnumbered unlisted" id="example-285">Example</h3>
<p>Here we’ll convert the wide string “€5 ± π” into a multibyte character string:</p>
<div class="sourceCode" id="cb941"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb941-1"><a href="wchar.html#cb941-1"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span><span class="pp">  </span><span class="co">// For setlocale()</span></span>
<span id="cb941-2"><a href="wchar.html#cb941-2"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span><span class="pp">  </span><span class="co">// For memset()</span></span>
<span id="cb941-3"><a href="wchar.html#cb941-3"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb941-4"><a href="wchar.html#cb941-4"></a></span>
<span id="cb941-5"><a href="wchar.html#cb941-5"></a><span class="pp">#define MB_STR_SIZE </span><span class="dv">20</span></span>
<span id="cb941-6"><a href="wchar.html#cb941-6"></a></span>
<span id="cb941-7"><a href="wchar.html#cb941-7"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb941-8"><a href="wchar.html#cb941-8"></a><span class="op">{</span></span>
<span id="cb941-9"><a href="wchar.html#cb941-9"></a>    <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>wcs <span class="op">=</span> <span class="st">L&quot;€5 ± π&quot;</span><span class="op">;</span>  <span class="co">// That&#39;s the exact price range</span></span>
<span id="cb941-10"><a href="wchar.html#cb941-10"></a></span>
<span id="cb941-11"><a href="wchar.html#cb941-11"></a>    <span class="dt">char</span> mbs<span class="op">[</span>MB_STR_SIZE<span class="op">];</span></span>
<span id="cb941-12"><a href="wchar.html#cb941-12"></a></span>
<span id="cb941-13"><a href="wchar.html#cb941-13"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb941-14"><a href="wchar.html#cb941-14"></a>    </span>
<span id="cb941-15"><a href="wchar.html#cb941-15"></a>    mbstate_t state<span class="op">;</span></span>
<span id="cb941-16"><a href="wchar.html#cb941-16"></a>    memset<span class="op">(&amp;</span>state<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span> state<span class="op">);</span></span>
<span id="cb941-17"><a href="wchar.html#cb941-17"></a></span>
<span id="cb941-18"><a href="wchar.html#cb941-18"></a>    <span class="dt">size_t</span> count <span class="op">=</span> wcsrtombs<span class="op">(</span>mbs<span class="op">,</span> <span class="op">&amp;</span>wcs<span class="op">,</span> MB_STR_SIZE<span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb941-19"><a href="wchar.html#cb941-19"></a></span>
<span id="cb941-20"><a href="wchar.html#cb941-20"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Multibyte string </span><span class="sc">\&quot;%s\&quot;</span><span class="st"> is </span><span class="sc">%d</span><span class="st"> bytes</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> mbs<span class="op">,</span> count<span class="op">);</span></span>
<span id="cb941-21"><a href="wchar.html#cb941-21"></a><span class="op">}</span></span></code></pre></div>
<p>Here’s another example helper function that <code>malloc()</code>s just enough memory to hold the converted string, then returns the result. (Which must later be freed, of course, to prevent leaking memory.)</p>
<div class="sourceCode" id="cb942"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb942-1"><a href="wchar.html#cb942-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span><span class="pp">  </span><span class="co">// For malloc()</span></span>
<span id="cb942-2"><a href="wchar.html#cb942-2"></a><span class="pp">#include </span><span class="im">&lt;locale.h&gt;</span><span class="pp">  </span><span class="co">// For setlocale()</span></span>
<span id="cb942-3"><a href="wchar.html#cb942-3"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span><span class="pp">  </span><span class="co">// For memset()</span></span>
<span id="cb942-4"><a href="wchar.html#cb942-4"></a><span class="pp">#include </span><span class="im">&lt;stdint.h&gt;</span><span class="pp">  </span><span class="co">// For SIZE_MAX</span></span>
<span id="cb942-5"><a href="wchar.html#cb942-5"></a><span class="pp">#include </span><span class="im">&lt;wchar.h&gt;</span></span>
<span id="cb942-6"><a href="wchar.html#cb942-6"></a></span>
<span id="cb942-7"><a href="wchar.html#cb942-7"></a><span class="dt">char</span> <span class="op">*</span>get_mb_string<span class="op">(</span><span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>wcs<span class="op">)</span></span>
<span id="cb942-8"><a href="wchar.html#cb942-8"></a><span class="op">{</span></span>
<span id="cb942-9"><a href="wchar.html#cb942-9"></a>    setlocale<span class="op">(</span>LC_ALL<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb942-10"><a href="wchar.html#cb942-10"></a></span>
<span id="cb942-11"><a href="wchar.html#cb942-11"></a>    mbstate_t state<span class="op">;</span></span>
<span id="cb942-12"><a href="wchar.html#cb942-12"></a>    memset<span class="op">(&amp;</span>state<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span> state<span class="op">);</span></span>
<span id="cb942-13"><a href="wchar.html#cb942-13"></a></span>
<span id="cb942-14"><a href="wchar.html#cb942-14"></a>    <span class="co">// Need a copy of this because wcsrtombs changes it</span></span>
<span id="cb942-15"><a href="wchar.html#cb942-15"></a>    <span class="dt">const</span> <span class="dt">wchar_t</span> <span class="op">*</span>p <span class="op">=</span> wcs<span class="op">;</span></span>
<span id="cb942-16"><a href="wchar.html#cb942-16"></a></span>
<span id="cb942-17"><a href="wchar.html#cb942-17"></a>    <span class="co">// Compute the number of bytes needed to hold the result</span></span>
<span id="cb942-18"><a href="wchar.html#cb942-18"></a>    <span class="dt">size_t</span> bytes_needed <span class="op">=</span> wcsrtombs<span class="op">(</span>NULL<span class="op">,</span> <span class="op">&amp;</span>p<span class="op">,</span> SIZE_MAX<span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb942-19"><a href="wchar.html#cb942-19"></a></span>
<span id="cb942-20"><a href="wchar.html#cb942-20"></a>    <span class="co">// If we didn&#39;t get a good full conversion, forget it</span></span>
<span id="cb942-21"><a href="wchar.html#cb942-21"></a>    <span class="cf">if</span> <span class="op">(</span>bytes_needed <span class="op">==</span> <span class="op">(</span><span class="dt">size_t</span><span class="op">)(-</span><span class="dv">1</span><span class="op">))</span></span>
<span id="cb942-22"><a href="wchar.html#cb942-22"></a>        <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb942-23"><a href="wchar.html#cb942-23"></a></span>
<span id="cb942-24"><a href="wchar.html#cb942-24"></a>    <span class="co">// Allocate space for result</span></span>
<span id="cb942-25"><a href="wchar.html#cb942-25"></a>    <span class="dt">char</span> <span class="op">*</span>mbs <span class="op">=</span> malloc<span class="op">(</span>bytes_needed <span class="op">+</span> <span class="dv">1</span><span class="op">);</span>  <span class="co">// +1 for NUL terminator</span></span>
<span id="cb942-26"><a href="wchar.html#cb942-26"></a></span>
<span id="cb942-27"><a href="wchar.html#cb942-27"></a>    <span class="co">// Set conversion state to initial state</span></span>
<span id="cb942-28"><a href="wchar.html#cb942-28"></a>    memset<span class="op">(&amp;</span>state<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span> state<span class="op">);</span></span>
<span id="cb942-29"><a href="wchar.html#cb942-29"></a></span>
<span id="cb942-30"><a href="wchar.html#cb942-30"></a>    <span class="co">// Convert and store result</span></span>
<span id="cb942-31"><a href="wchar.html#cb942-31"></a>    wcsrtombs<span class="op">(</span>mbs<span class="op">,</span> <span class="op">&amp;</span>wcs<span class="op">,</span> bytes_needed <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="op">&amp;</span>state<span class="op">);</span></span>
<span id="cb942-32"><a href="wchar.html#cb942-32"></a></span>
<span id="cb942-33"><a href="wchar.html#cb942-33"></a>    <span class="co">// Make sure things went well</span></span>
<span id="cb942-34"><a href="wchar.html#cb942-34"></a>    <span class="cf">if</span> <span class="op">(</span>wcs <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb942-35"><a href="wchar.html#cb942-35"></a>        free<span class="op">(</span>mbs<span class="op">);</span></span>
<span id="cb942-36"><a href="wchar.html#cb942-36"></a>        <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb942-37"><a href="wchar.html#cb942-37"></a>    <span class="op">}</span></span>
<span id="cb942-38"><a href="wchar.html#cb942-38"></a></span>
<span id="cb942-39"><a href="wchar.html#cb942-39"></a>    <span class="co">// Success!</span></span>
<span id="cb942-40"><a href="wchar.html#cb942-40"></a>    <span class="cf">return</span> mbs<span class="op">;</span></span>
<span id="cb942-41"><a href="wchar.html#cb942-41"></a><span class="op">}</span></span>
<span id="cb942-42"><a href="wchar.html#cb942-42"></a></span>
<span id="cb942-43"><a href="wchar.html#cb942-43"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb942-44"><a href="wchar.html#cb942-44"></a><span class="op">{</span></span>
<span id="cb942-45"><a href="wchar.html#cb942-45"></a>    <span class="dt">char</span> <span class="op">*</span>mbs <span class="op">=</span> get_mb_string<span class="op">(</span><span class="st">L&quot;€5 ± π&quot;</span><span class="op">);</span></span>
<span id="cb942-46"><a href="wchar.html#cb942-46"></a></span>
<span id="cb942-47"><a href="wchar.html#cb942-47"></a>    wprintf<span class="op">(</span><span class="st">L&quot;Multibyte result: </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> mbs<span class="op">);</span></span>
<span id="cb942-48"><a href="wchar.html#cb942-48"></a></span>
<span id="cb942-49"><a href="wchar.html#cb942-49"></a>    free<span class="op">(</span>mbs<span class="op">);</span></span>
<span id="cb942-50"><a href="wchar.html#cb942-50"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-268">See Also</h3>
<p><a href="wchar.html#man-wcrtomb"><code>wcrtomb()</code></a>, <a href="stdlib.html#man-wcstombs"><code>wcstombs()</code></a>, <a href="wchar.html#man-mbsrtowcs"><code>mbsrtowcs()</code></a>, <a href="errno.html#errno"><code>errno</code></a></p>
<!--
***
## `example()` {#man-example}

### Synopsis {.unnumbered .unlisted}

``` {.c}
```

### Description {.unnumbered .unlisted}

### Return Value {.unnumbered .unlisted}

### Example {.unnumbered .unlisted}

``` {.c .numberLines}
```

### See Also {.unnumbered .unlisted}

[`example()`](#man-example),
-->
<!-- BG_NEW_CHAPTER -->
<!-- Beej's guide to C

# vim: ts=4:sw=4:nosi:et:tw=72
-->
<hr><div style="text-align:center"><span><a href="uchar.html" rel="prev">Prev</a> | </span><a href="index.html">Contents</a><span> | <a href="wctype.html" rel="next">Next</a></span></div></body>
</html>
