<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Beej's Guide to C Programming</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!-- BG custom styling -->
  <style type="text/css">
  /* Fix for line numbers not visible */
  pre.numberSource code > span {
      left: -1em;
  }
  pre.numberSource {
      margin-left: initial;
  }

  /* Put some space after the section numbers */
  span.toc-section-number::after {
      content: "\a0\a0\a0";  /* non-breaking whitespace */
  }

  /* Hide underlines on code number links */
  pre > code.sourceCode > span > a:first-child::before {
      text-decoration: none;
  }

  /* Color the source blocks */
  div.sourceCode {
      background-color: #f0f0f0;
  }

  /* Fix iOS big text rendering issue */
  pre > code.sourceCode > span {
      display: initial;
  }


  /* Color the inline code */
  code:not(.sourceCode) {
      background: #f0f0f0;
      padding-left: 0.2em;
      padding-right: 0.2em;
      border-radius: 0.2em;
  }

  pre.sourceCode {
      border: 1px solid #ccc;
      padding: 0.5em;
      border-radius: 0.2em;
  }

  /* Keep code tags from wrapping in tables */
  tbody code {
      white-space: nowrap;
  }

  /* Prevent hyphenation and hyphen breaks in code*/
  code {
      word-break: keep-all;
  }

  td {
      vertical-align: top;
  }

  body {
      font-size: 12pt;
      max-width: 43em;
      font-family: sans-serif;
  }

  html {
      background: #f9f9f9;
  }

  figure > embed {
      max-width: 100%;
  }

  figure {
      text-align: center;
      margin-top: 2em;
      margin-bottom: 2em;
  }

  figcaption {
      font-size: 0.9em;
      font-style: italic;
      margin-top: 0.6em;
  }

  body {
      counter-reset: figure-counter-major;
      counter-reset: figure-counter-minor;
  }

  figure {
      counter-increment: figure-counter-minor;
  }

  figcaption::before {
      content: "Figure " counter(figure-counter-major) "." counter(figure-counter-minor) ": ";
  }

  blockquote {
      border-left: 2px solid #bbb;
      color: #444;
  }

  /* Contents */

  nav[role="doc-toc"] > ul > li {
    font-weight: bold;
    margin-top: 1.2em;
  }

  nav[role="doc-toc"] > ul > li:first {
    font-weight: bold;
    margin-top: initial;
  }

  nav[role="doc-toc"] > ul > li > ul {
    font-weight: normal;
    margin-top: 0.3em;
  }

  /*
  In multipage, we need to reset the figure counter to the chapter
  number. Luckily, this is in the <h1 data-number> attribute. Unluckily,
  there is no way to get this in a general way.

  This doesn't work:

    h1[data-number] {
      counter-set: figure-counter-major attr(data-number);
    }

  Nor this:

    h1[data-number] {
      --figure-counter-major-value: attr(data-number);
      counter-set: figure-counter-major var(--figure-counter-major-value);
    }

  So, dumbly, we have a bunch of rules for all these sections, up to the
  maximum possible section.

  Here's a program to generate them:

    for (let i = 1; i < 100; i++)
        console.log(`h1[data-number="${i}"]{counter-set:figure-counter-major ${i};counter-reset:figure-counter-minor;}`);

  Note to self: never write a book with more than 99 frickin' chapters.
  */

  h1[data-number="1"]{counter-set:figure-counter-major 1;counter-reset:figure-counter-minor;}
  h1[data-number="2"]{counter-set:figure-counter-major 2;counter-reset:figure-counter-minor;}
  h1[data-number="3"]{counter-set:figure-counter-major 3;counter-reset:figure-counter-minor;}
  h1[data-number="4"]{counter-set:figure-counter-major 4;counter-reset:figure-counter-minor;}
  h1[data-number="5"]{counter-set:figure-counter-major 5;counter-reset:figure-counter-minor;}
  h1[data-number="6"]{counter-set:figure-counter-major 6;counter-reset:figure-counter-minor;}
  h1[data-number="7"]{counter-set:figure-counter-major 7;counter-reset:figure-counter-minor;}
  h1[data-number="8"]{counter-set:figure-counter-major 8;counter-reset:figure-counter-minor;}
  h1[data-number="9"]{counter-set:figure-counter-major 9;counter-reset:figure-counter-minor;}
  h1[data-number="10"]{counter-set:figure-counter-major 10;counter-reset:figure-counter-minor;}
  h1[data-number="11"]{counter-set:figure-counter-major 11;counter-reset:figure-counter-minor;}
  h1[data-number="12"]{counter-set:figure-counter-major 12;counter-reset:figure-counter-minor;}
  h1[data-number="13"]{counter-set:figure-counter-major 13;counter-reset:figure-counter-minor;}
  h1[data-number="14"]{counter-set:figure-counter-major 14;counter-reset:figure-counter-minor;}
  h1[data-number="15"]{counter-set:figure-counter-major 15;counter-reset:figure-counter-minor;}
  h1[data-number="16"]{counter-set:figure-counter-major 16;counter-reset:figure-counter-minor;}
  h1[data-number="17"]{counter-set:figure-counter-major 17;counter-reset:figure-counter-minor;}
  h1[data-number="18"]{counter-set:figure-counter-major 18;counter-reset:figure-counter-minor;}
  h1[data-number="19"]{counter-set:figure-counter-major 19;counter-reset:figure-counter-minor;}
  h1[data-number="20"]{counter-set:figure-counter-major 20;counter-reset:figure-counter-minor;}
  h1[data-number="21"]{counter-set:figure-counter-major 21;counter-reset:figure-counter-minor;}
  h1[data-number="22"]{counter-set:figure-counter-major 22;counter-reset:figure-counter-minor;}
  h1[data-number="23"]{counter-set:figure-counter-major 23;counter-reset:figure-counter-minor;}
  h1[data-number="24"]{counter-set:figure-counter-major 24;counter-reset:figure-counter-minor;}
  h1[data-number="25"]{counter-set:figure-counter-major 25;counter-reset:figure-counter-minor;}
  h1[data-number="26"]{counter-set:figure-counter-major 26;counter-reset:figure-counter-minor;}
  h1[data-number="27"]{counter-set:figure-counter-major 27;counter-reset:figure-counter-minor;}
  h1[data-number="28"]{counter-set:figure-counter-major 28;counter-reset:figure-counter-minor;}
  h1[data-number="29"]{counter-set:figure-counter-major 29;counter-reset:figure-counter-minor;}
  h1[data-number="30"]{counter-set:figure-counter-major 30;counter-reset:figure-counter-minor;}
  h1[data-number="31"]{counter-set:figure-counter-major 31;counter-reset:figure-counter-minor;}
  h1[data-number="32"]{counter-set:figure-counter-major 32;counter-reset:figure-counter-minor;}
  h1[data-number="33"]{counter-set:figure-counter-major 33;counter-reset:figure-counter-minor;}
  h1[data-number="34"]{counter-set:figure-counter-major 34;counter-reset:figure-counter-minor;}
  h1[data-number="35"]{counter-set:figure-counter-major 35;counter-reset:figure-counter-minor;}
  h1[data-number="36"]{counter-set:figure-counter-major 36;counter-reset:figure-counter-minor;}
  h1[data-number="37"]{counter-set:figure-counter-major 37;counter-reset:figure-counter-minor;}
  h1[data-number="38"]{counter-set:figure-counter-major 38;counter-reset:figure-counter-minor;}
  h1[data-number="39"]{counter-set:figure-counter-major 39;counter-reset:figure-counter-minor;}
  h1[data-number="40"]{counter-set:figure-counter-major 40;counter-reset:figure-counter-minor;}
  h1[data-number="41"]{counter-set:figure-counter-major 41;counter-reset:figure-counter-minor;}
  h1[data-number="42"]{counter-set:figure-counter-major 42;counter-reset:figure-counter-minor;}
  h1[data-number="43"]{counter-set:figure-counter-major 43;counter-reset:figure-counter-minor;}
  h1[data-number="44"]{counter-set:figure-counter-major 44;counter-reset:figure-counter-minor;}
  h1[data-number="45"]{counter-set:figure-counter-major 45;counter-reset:figure-counter-minor;}
  h1[data-number="46"]{counter-set:figure-counter-major 46;counter-reset:figure-counter-minor;}
  h1[data-number="47"]{counter-set:figure-counter-major 47;counter-reset:figure-counter-minor;}
  h1[data-number="48"]{counter-set:figure-counter-major 48;counter-reset:figure-counter-minor;}
  h1[data-number="49"]{counter-set:figure-counter-major 49;counter-reset:figure-counter-minor;}
  h1[data-number="50"]{counter-set:figure-counter-major 50;counter-reset:figure-counter-minor;}
  h1[data-number="51"]{counter-set:figure-counter-major 51;counter-reset:figure-counter-minor;}
  h1[data-number="52"]{counter-set:figure-counter-major 52;counter-reset:figure-counter-minor;}
  h1[data-number="53"]{counter-set:figure-counter-major 53;counter-reset:figure-counter-minor;}
  h1[data-number="54"]{counter-set:figure-counter-major 54;counter-reset:figure-counter-minor;}
  h1[data-number="55"]{counter-set:figure-counter-major 55;counter-reset:figure-counter-minor;}
  h1[data-number="56"]{counter-set:figure-counter-major 56;counter-reset:figure-counter-minor;}
  h1[data-number="57"]{counter-set:figure-counter-major 57;counter-reset:figure-counter-minor;}
  h1[data-number="58"]{counter-set:figure-counter-major 58;counter-reset:figure-counter-minor;}
  h1[data-number="59"]{counter-set:figure-counter-major 59;counter-reset:figure-counter-minor;}
  h1[data-number="60"]{counter-set:figure-counter-major 60;counter-reset:figure-counter-minor;}
  h1[data-number="61"]{counter-set:figure-counter-major 61;counter-reset:figure-counter-minor;}
  h1[data-number="62"]{counter-set:figure-counter-major 62;counter-reset:figure-counter-minor;}
  h1[data-number="63"]{counter-set:figure-counter-major 63;counter-reset:figure-counter-minor;}
  h1[data-number="64"]{counter-set:figure-counter-major 64;counter-reset:figure-counter-minor;}
  h1[data-number="65"]{counter-set:figure-counter-major 65;counter-reset:figure-counter-minor;}
  h1[data-number="66"]{counter-set:figure-counter-major 66;counter-reset:figure-counter-minor;}
  h1[data-number="67"]{counter-set:figure-counter-major 67;counter-reset:figure-counter-minor;}
  h1[data-number="68"]{counter-set:figure-counter-major 68;counter-reset:figure-counter-minor;}
  h1[data-number="69"]{counter-set:figure-counter-major 69;counter-reset:figure-counter-minor;}
  h1[data-number="70"]{counter-set:figure-counter-major 70;counter-reset:figure-counter-minor;}
  h1[data-number="71"]{counter-set:figure-counter-major 71;counter-reset:figure-counter-minor;}
  h1[data-number="72"]{counter-set:figure-counter-major 72;counter-reset:figure-counter-minor;}
  h1[data-number="73"]{counter-set:figure-counter-major 73;counter-reset:figure-counter-minor;}
  h1[data-number="74"]{counter-set:figure-counter-major 74;counter-reset:figure-counter-minor;}
  h1[data-number="75"]{counter-set:figure-counter-major 75;counter-reset:figure-counter-minor;}
  h1[data-number="76"]{counter-set:figure-counter-major 76;counter-reset:figure-counter-minor;}
  h1[data-number="77"]{counter-set:figure-counter-major 77;counter-reset:figure-counter-minor;}
  h1[data-number="78"]{counter-set:figure-counter-major 78;counter-reset:figure-counter-minor;}
  h1[data-number="79"]{counter-set:figure-counter-major 79;counter-reset:figure-counter-minor;}
  h1[data-number="80"]{counter-set:figure-counter-major 80;counter-reset:figure-counter-minor;}
  h1[data-number="81"]{counter-set:figure-counter-major 81;counter-reset:figure-counter-minor;}
  h1[data-number="82"]{counter-set:figure-counter-major 82;counter-reset:figure-counter-minor;}
  h1[data-number="83"]{counter-set:figure-counter-major 83;counter-reset:figure-counter-minor;}
  h1[data-number="84"]{counter-set:figure-counter-major 84;counter-reset:figure-counter-minor;}
  h1[data-number="85"]{counter-set:figure-counter-major 85;counter-reset:figure-counter-minor;}
  h1[data-number="86"]{counter-set:figure-counter-major 86;counter-reset:figure-counter-minor;}
  h1[data-number="87"]{counter-set:figure-counter-major 87;counter-reset:figure-counter-minor;}
  h1[data-number="88"]{counter-set:figure-counter-major 88;counter-reset:figure-counter-minor;}
  h1[data-number="89"]{counter-set:figure-counter-major 89;counter-reset:figure-counter-minor;}
  h1[data-number="90"]{counter-set:figure-counter-major 90;counter-reset:figure-counter-minor;}
  h1[data-number="91"]{counter-set:figure-counter-major 91;counter-reset:figure-counter-minor;}
  h1[data-number="92"]{counter-set:figure-counter-major 92;counter-reset:figure-counter-minor;}
  h1[data-number="93"]{counter-set:figure-counter-major 93;counter-reset:figure-counter-minor;}
  h1[data-number="94"]{counter-set:figure-counter-major 94;counter-reset:figure-counter-minor;}
  h1[data-number="95"]{counter-set:figure-counter-major 95;counter-reset:figure-counter-minor;}
  h1[data-number="96"]{counter-set:figure-counter-major 96;counter-reset:figure-counter-minor;}
  h1[data-number="97"]{counter-set:figure-counter-major 97;counter-reset:figure-counter-minor;}
  h1[data-number="98"]{counter-set:figure-counter-major 98;counter-reset:figure-counter-minor;}
  h1[data-number="99"]{counter-set:figure-counter-major 99;counter-reset:figure-counter-minor;}


  </style>
  <!-- BG custom styling for the wide body variant -->
  <!-- Gets appended after bg-css.html -->

  <style type="text/css">
  body {
      max-width: inherit;
  }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>
<div style="text-align:center"><span><a href="stdalign.html" rel="prev">Prev</a> | </span><a href="index.html">Contents</a><span> | <a href="stdatomic.html" rel="next">Next</a></span></div><hr>
<h1 data-number="17" id="stdarg"><span class="header-section-number">17</span> <code>&lt;stdarg.h&gt;</code> Variable Arguments</h1>
<p></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="stdarg.html#man-va_arg"><code>va_arg()</code></a></td>
<td>Get the next variable argument</td>
</tr>
<tr class="even">
<td><a href="stdarg.html#man-va_copy"><code>va_copy()</code></a></td>
<td>Copy a <code>va_list</code> and the work done so far</td>
</tr>
<tr class="odd">
<td><a href="stdarg.html#man-va_end"><code>va_end()</code></a></td>
<td>Signify we’re done processing variable arguments</td>
</tr>
<tr class="even">
<td><a href="stdarg.html#man-va_start"><code>va_start()</code></a></td>
<td>Initialize a <code>va_list</code> to start variable argument processing</td>
</tr>
</tbody>
</table>
<p>This header file is what allows you to write functions that take a variable number of arguments.</p>
<p>In addition to the macros, you get a new type that helps C keep track of where it is in the variable-number-of-arguments-processing: <code>va_list</code>. This type is opaque, and you’ll be passing it around to the various macros to help get at the arguments.</p>
<p>Note that every variadic function requires at least one non-variable parameter. You need this to kick off processing with <code>va_start()</code>.</p>
<hr />
<h2 data-number="17.1" id="man-va_arg"><span class="header-section-number">17.1</span> <code>va_arg()</code></h2>
<p></p>
<p>Get the next variable argument</p>
<h3 class="unnumbered unlisted" id="synopsis-118">Synopsis</h3>
<div class="sourceCode" id="cb424"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb424-1"><a href="stdarg.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb424-2"><a href="stdarg.html#cb424-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-3"><a href="stdarg.html#cb424-3" aria-hidden="true" tabindex="-1"></a>type va_arg<span class="op">(</span><span class="dt">va_list</span> ap<span class="op">,</span> type<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-118">Description</h3>
<p>If you have a variable argument list you’ve initialized with <code>va_start()</code>, pass it to this one along with the type of argument you’re trying to get, e.g.</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb425-1"><a href="stdarg.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span>   x <span class="op">=</span> va_arg<span class="op">(</span>args<span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb425-2"><a href="stdarg.html#cb425-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> y <span class="op">=</span> va_arg<span class="op">(</span>args<span class="op">,</span> <span class="dt">float</span><span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="return-value-116">Return Value</h3>
<p>Evaluates to the value and type of the next variable argument.</p>
<h3 class="unnumbered unlisted" id="example-118">Example</h3>
<p>Here’s a demo that adds together an arbitrary number of integers. The first argument is the number of integers to add together. We’ll make use of that to figure out how many times we have to call <code>va_arg()</code>.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb426-1"><a href="stdarg.html#cb426-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb426-2"><a href="stdarg.html#cb426-2"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb426-3"><a href="stdarg.html#cb426-3"></a></span>
<span id="cb426-4"><a href="stdarg.html#cb426-4"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> count<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb426-5"><a href="stdarg.html#cb426-5"></a><span class="op">{</span></span>
<span id="cb426-6"><a href="stdarg.html#cb426-6"></a>    <span class="dt">int</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb426-7"><a href="stdarg.html#cb426-7"></a>    <span class="dt">va_list</span> va<span class="op">;</span></span>
<span id="cb426-8"><a href="stdarg.html#cb426-8"></a></span>
<span id="cb426-9"><a href="stdarg.html#cb426-9"></a>    va_start<span class="op">(</span>va<span class="op">,</span> count<span class="op">);</span>   <span class="co">// Start with arguments after &quot;count&quot;</span></span>
<span id="cb426-10"><a href="stdarg.html#cb426-10"></a></span>
<span id="cb426-11"><a href="stdarg.html#cb426-11"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb426-12"><a href="stdarg.html#cb426-12"></a>        <span class="dt">int</span> n <span class="op">=</span> va_arg<span class="op">(</span>va<span class="op">,</span> <span class="dt">int</span><span class="op">);</span>   <span class="co">// Get the next int</span></span>
<span id="cb426-13"><a href="stdarg.html#cb426-13"></a></span>
<span id="cb426-14"><a href="stdarg.html#cb426-14"></a>        total <span class="op">+=</span> n<span class="op">;</span></span>
<span id="cb426-15"><a href="stdarg.html#cb426-15"></a>    <span class="op">}</span></span>
<span id="cb426-16"><a href="stdarg.html#cb426-16"></a></span>
<span id="cb426-17"><a href="stdarg.html#cb426-17"></a>    va_end<span class="op">(</span>va<span class="op">);</span>  <span class="co">// All done</span></span>
<span id="cb426-18"><a href="stdarg.html#cb426-18"></a></span>
<span id="cb426-19"><a href="stdarg.html#cb426-19"></a>    <span class="cf">return</span> total<span class="op">;</span></span>
<span id="cb426-20"><a href="stdarg.html#cb426-20"></a><span class="op">}</span></span>
<span id="cb426-21"><a href="stdarg.html#cb426-21"></a></span>
<span id="cb426-22"><a href="stdarg.html#cb426-22"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb426-23"><a href="stdarg.html#cb426-23"></a><span class="op">{</span></span>
<span id="cb426-24"><a href="stdarg.html#cb426-24"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span><span class="dv">4</span><span class="op">,</span> <span class="dv">17</span><span class="op">));</span>  <span class="co">// 6 + 2 - 4 + 17 = 21</span></span>
<span id="cb426-25"><a href="stdarg.html#cb426-25"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">44</span><span class="op">));</span>        <span class="co">// 22 + 44 = 66</span></span>
<span id="cb426-26"><a href="stdarg.html#cb426-26"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-111">See Also</h3>
<p><a href="stdarg.html#man-va_start"><code>va_start()</code></a>, <a href="stdarg.html#man-va_end"><code>va_end()</code></a></p>
<hr />
<h2 data-number="17.2" id="man-va_copy"><span class="header-section-number">17.2</span> <code>va_copy()</code></h2>
<p></p>
<p>Copy a <code>va_list</code> and the work done so far</p>
<h3 class="unnumbered unlisted" id="synopsis-119">Synopsis</h3>
<div class="sourceCode" id="cb427"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb427-1"><a href="stdarg.html#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb427-2"><a href="stdarg.html#cb427-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb427-3"><a href="stdarg.html#cb427-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> va_copy<span class="op">(</span><span class="dt">va_list</span> dest<span class="op">,</span> <span class="dt">va_list</span> src<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-119">Description</h3>
<p>The main intended use of this is to save your state partway through processing variable arguments so you can scan ahead and then rewind back to the save point.</p>
<p>You pass in a <code>src</code> <code>va_list</code> and it copies it to <code>dest</code>.</p>
<p>If you’ve already called this once for a particular <code>dest</code>, you can’t call it (or <code>va_start()</code>) again with the same <code>dest</code> unless you call <code>va_end()</code> on that <code>dest</code> first.</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb428-1"><a href="stdarg.html#cb428-1" aria-hidden="true" tabindex="-1"></a>va_copy<span class="op">(</span>dest<span class="op">,</span> src<span class="op">);</span></span>
<span id="cb428-2"><a href="stdarg.html#cb428-2" aria-hidden="true" tabindex="-1"></a>va_copy<span class="op">(</span>dest<span class="op">,</span> src2<span class="op">);</span>  <span class="co">// BAD!</span></span>
<span id="cb428-3"><a href="stdarg.html#cb428-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-4"><a href="stdarg.html#cb428-4" aria-hidden="true" tabindex="-1"></a>va_copy<span class="op">(</span>dest<span class="op">,</span> src<span class="op">);</span></span>
<span id="cb428-5"><a href="stdarg.html#cb428-5" aria-hidden="true" tabindex="-1"></a>va_start<span class="op">(</span>dest<span class="op">,</span> var<span class="op">);</span>  <span class="co">// BAD!</span></span>
<span id="cb428-6"><a href="stdarg.html#cb428-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-7"><a href="stdarg.html#cb428-7" aria-hidden="true" tabindex="-1"></a>va_copy<span class="op">(</span>dest<span class="op">,</span> src<span class="op">);</span></span>
<span id="cb428-8"><a href="stdarg.html#cb428-8" aria-hidden="true" tabindex="-1"></a>va_end<span class="op">(</span>dest<span class="op">);</span></span>
<span id="cb428-9"><a href="stdarg.html#cb428-9" aria-hidden="true" tabindex="-1"></a>va_copy<span class="op">(</span>dest<span class="op">,</span> src2<span class="op">);</span>  <span class="co">// OK!</span></span>
<span id="cb428-10"><a href="stdarg.html#cb428-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-11"><a href="stdarg.html#cb428-11" aria-hidden="true" tabindex="-1"></a>va_copy<span class="op">(</span>dest<span class="op">,</span> src<span class="op">);</span></span>
<span id="cb428-12"><a href="stdarg.html#cb428-12" aria-hidden="true" tabindex="-1"></a>va_end<span class="op">(</span>dest<span class="op">);</span></span>
<span id="cb428-13"><a href="stdarg.html#cb428-13" aria-hidden="true" tabindex="-1"></a>va_start<span class="op">(</span>dest<span class="op">,</span> var<span class="op">);</span>  <span class="co">// OK!</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="return-value-117">Return Value</h3>
<p>Returns nothing.</p>
<h3 class="unnumbered unlisted" id="example-119">Example</h3>
<p>Here’s an example where we’re adding together all the variable arguments, but then we want to go back and add on all the numbers past the first two, for example if the arguments are:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb429-1"><a href="stdarg.html#cb429-1" aria-hidden="true" tabindex="-1"></a>10 20 30 40</span></code></pre></div>
<p>First we add them all for <code>100</code>, and then we add on everything from the third number on, so add on <code>30+40</code> for a total of <code>170</code>.</p>
<p>We’ll do this by saving our place in the variable argument processing with <code>va_copy</code> and then using that later to reprocess the trailing arguments.</p>
<p>(And yes, I know there’s a mathematical way to do this without all the rewinding, but I’m having an heck of a time coming up with a good example!)</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb430-1"><a href="stdarg.html#cb430-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb430-2"><a href="stdarg.html#cb430-2"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb430-3"><a href="stdarg.html#cb430-3"></a></span>
<span id="cb430-4"><a href="stdarg.html#cb430-4"></a><span class="co">// Add all the numbers together, but then add on all the numbers</span></span>
<span id="cb430-5"><a href="stdarg.html#cb430-5"></a><span class="co">// past the second one again.</span></span>
<span id="cb430-6"><a href="stdarg.html#cb430-6"></a><span class="dt">int</span> contrived_adder<span class="op">(</span><span class="dt">int</span> count<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb430-7"><a href="stdarg.html#cb430-7"></a><span class="op">{</span></span>
<span id="cb430-8"><a href="stdarg.html#cb430-8"></a>    <span class="cf">if</span> <span class="op">(</span>count <span class="op">&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// OK, I&#39;m being lazy. You got me.</span></span>
<span id="cb430-9"><a href="stdarg.html#cb430-9"></a></span>
<span id="cb430-10"><a href="stdarg.html#cb430-10"></a>    <span class="dt">int</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb430-11"><a href="stdarg.html#cb430-11"></a></span>
<span id="cb430-12"><a href="stdarg.html#cb430-12"></a>    <span class="dt">va_list</span> args<span class="op">,</span> mid_args<span class="op">;</span></span>
<span id="cb430-13"><a href="stdarg.html#cb430-13"></a></span>
<span id="cb430-14"><a href="stdarg.html#cb430-14"></a>    va_start<span class="op">(</span>args<span class="op">,</span> count<span class="op">);</span></span>
<span id="cb430-15"><a href="stdarg.html#cb430-15"></a></span>
<span id="cb430-16"><a href="stdarg.html#cb430-16"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb430-17"><a href="stdarg.html#cb430-17"></a></span>
<span id="cb430-18"><a href="stdarg.html#cb430-18"></a>        <span class="co">// If we&#39;re at the second number, save our place in</span></span>
<span id="cb430-19"><a href="stdarg.html#cb430-19"></a>        <span class="co">// mid_args:</span></span>
<span id="cb430-20"><a href="stdarg.html#cb430-20"></a></span>
<span id="cb430-21"><a href="stdarg.html#cb430-21"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> <span class="dv">2</span><span class="op">)</span></span>
<span id="cb430-22"><a href="stdarg.html#cb430-22"></a>            va_copy<span class="op">(</span>mid_args<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb430-23"><a href="stdarg.html#cb430-23"></a></span>
<span id="cb430-24"><a href="stdarg.html#cb430-24"></a>        total <span class="op">+=</span> va_arg<span class="op">(</span>args<span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb430-25"><a href="stdarg.html#cb430-25"></a>    <span class="op">}</span></span>
<span id="cb430-26"><a href="stdarg.html#cb430-26"></a></span>
<span id="cb430-27"><a href="stdarg.html#cb430-27"></a>    va_end<span class="op">(</span>args<span class="op">);</span> <span class="co">// Done with this</span></span>
<span id="cb430-28"><a href="stdarg.html#cb430-28"></a></span>
<span id="cb430-29"><a href="stdarg.html#cb430-29"></a>    <span class="co">// But now let&#39;s start with mid_args and add all those on:</span></span>
<span id="cb430-30"><a href="stdarg.html#cb430-30"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count <span class="op">-</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb430-31"><a href="stdarg.html#cb430-31"></a>        total <span class="op">+=</span> va_arg<span class="op">(</span>mid_args<span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb430-32"><a href="stdarg.html#cb430-32"></a></span>
<span id="cb430-33"><a href="stdarg.html#cb430-33"></a>    va_end<span class="op">(</span>mid_args<span class="op">);</span> <span class="co">// Done with this, too</span></span>
<span id="cb430-34"><a href="stdarg.html#cb430-34"></a></span>
<span id="cb430-35"><a href="stdarg.html#cb430-35"></a>    <span class="cf">return</span> total<span class="op">;</span></span>
<span id="cb430-36"><a href="stdarg.html#cb430-36"></a><span class="op">}</span></span>
<span id="cb430-37"><a href="stdarg.html#cb430-37"></a></span>
<span id="cb430-38"><a href="stdarg.html#cb430-38"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb430-39"><a href="stdarg.html#cb430-39"></a><span class="op">{</span></span>
<span id="cb430-40"><a href="stdarg.html#cb430-40"></a>    <span class="co">// 10+20+30 + 30 == 90</span></span>
<span id="cb430-41"><a href="stdarg.html#cb430-41"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> contrived_adder<span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">));</span></span>
<span id="cb430-42"><a href="stdarg.html#cb430-42"></a></span>
<span id="cb430-43"><a href="stdarg.html#cb430-43"></a>    <span class="co">// 10+20+30+40+50 + 30+40+50 == 270</span></span>
<span id="cb430-44"><a href="stdarg.html#cb430-44"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> contrived_adder<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">));</span></span>
<span id="cb430-45"><a href="stdarg.html#cb430-45"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-112">See Also</h3>
<p><a href="stdarg.html#man-va_start"><code>va_start()</code></a>, <a href="stdarg.html#man-va_arg"><code>va_arg()</code></a>, <a href="stdarg.html#man-va_end"><code>va_end()</code></a></p>
<hr />
<h2 data-number="17.3" id="man-va_end"><span class="header-section-number">17.3</span> <code>va_end()</code></h2>
<p></p>
<p>Signify we’re done processing variable arguments</p>
<h3 class="unnumbered unlisted" id="synopsis-120">Synopsis</h3>
<div class="sourceCode" id="cb431"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb431-1"><a href="stdarg.html#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb431-2"><a href="stdarg.html#cb431-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-3"><a href="stdarg.html#cb431-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> va_end<span class="op">(</span><span class="dt">va_list</span> ap<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-120">Description</h3>
<p>After you’ve <code>va_start()</code>ed or <code>va_copy</code>’d a new <code>va_list</code>, you <strong>must</strong> call <code>va_end()</code> with it before it goes out of scope.</p>
<p>You also have to do this if you’re going to call <code>va_start()</code> or <code>va_copy()</code> <em>again</em> on a variable you’ve already done that to.</p>
<p>Them’s the rules if you want to avoid undefined behavior.</p>
<p>But just think of it as cleanup. You called <code>va_start()</code>, so you’ll call <code>va_end()</code> when you’re done.</p>
<h3 class="unnumbered unlisted" id="return-value-118">Return Value</h3>
<p>Returns nothing.</p>
<h3 class="unnumbered unlisted" id="example-120">Example</h3>
<p>Here’s a demo that adds together an arbitrary number of integers. The first argument is the number of integers to add together. We’ll make use of that to figure out how many times we have to call <code>va_arg()</code>.</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb432-1"><a href="stdarg.html#cb432-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb432-2"><a href="stdarg.html#cb432-2"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb432-3"><a href="stdarg.html#cb432-3"></a></span>
<span id="cb432-4"><a href="stdarg.html#cb432-4"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> count<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb432-5"><a href="stdarg.html#cb432-5"></a><span class="op">{</span></span>
<span id="cb432-6"><a href="stdarg.html#cb432-6"></a>    <span class="dt">int</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb432-7"><a href="stdarg.html#cb432-7"></a>    <span class="dt">va_list</span> va<span class="op">;</span></span>
<span id="cb432-8"><a href="stdarg.html#cb432-8"></a></span>
<span id="cb432-9"><a href="stdarg.html#cb432-9"></a>    va_start<span class="op">(</span>va<span class="op">,</span> count<span class="op">);</span>   <span class="co">// Start with arguments after &quot;count&quot;</span></span>
<span id="cb432-10"><a href="stdarg.html#cb432-10"></a></span>
<span id="cb432-11"><a href="stdarg.html#cb432-11"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb432-12"><a href="stdarg.html#cb432-12"></a>        <span class="dt">int</span> n <span class="op">=</span> va_arg<span class="op">(</span>va<span class="op">,</span> <span class="dt">int</span><span class="op">);</span>   <span class="co">// Get the next int</span></span>
<span id="cb432-13"><a href="stdarg.html#cb432-13"></a></span>
<span id="cb432-14"><a href="stdarg.html#cb432-14"></a>        total <span class="op">+=</span> n<span class="op">;</span></span>
<span id="cb432-15"><a href="stdarg.html#cb432-15"></a>    <span class="op">}</span></span>
<span id="cb432-16"><a href="stdarg.html#cb432-16"></a></span>
<span id="cb432-17"><a href="stdarg.html#cb432-17"></a>    va_end<span class="op">(</span>va<span class="op">);</span>  <span class="co">// All done</span></span>
<span id="cb432-18"><a href="stdarg.html#cb432-18"></a></span>
<span id="cb432-19"><a href="stdarg.html#cb432-19"></a>    <span class="cf">return</span> total<span class="op">;</span></span>
<span id="cb432-20"><a href="stdarg.html#cb432-20"></a><span class="op">}</span></span>
<span id="cb432-21"><a href="stdarg.html#cb432-21"></a></span>
<span id="cb432-22"><a href="stdarg.html#cb432-22"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb432-23"><a href="stdarg.html#cb432-23"></a><span class="op">{</span></span>
<span id="cb432-24"><a href="stdarg.html#cb432-24"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span><span class="dv">4</span><span class="op">,</span> <span class="dv">17</span><span class="op">));</span>  <span class="co">// 6 + 2 - 4 + 17 = 21</span></span>
<span id="cb432-25"><a href="stdarg.html#cb432-25"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">44</span><span class="op">));</span>        <span class="co">// 22 + 44 = 66</span></span>
<span id="cb432-26"><a href="stdarg.html#cb432-26"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-113">See Also</h3>
<p><a href="stdarg.html#man-va_start"><code>va_start()</code></a>, <a href="stdarg.html#man-va_copy"><code>va_copy()</code></a></p>
<hr />
<h2 data-number="17.4" id="man-va_start"><span class="header-section-number">17.4</span> <code>va_start()</code></h2>
<p></p>
<p>Initialize a <code>va_list</code> to start variable argument processing</p>
<h3 class="unnumbered unlisted" id="synopsis-121">Synopsis</h3>
<div class="sourceCode" id="cb433"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb433-1"><a href="stdarg.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb433-2"><a href="stdarg.html#cb433-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb433-3"><a href="stdarg.html#cb433-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> va_start<span class="op">(</span><span class="dt">va_list</span> ap<span class="op">,</span> parmN<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-121">Description</h3>
<p>You’ve declared a variable of type <code>va_list</code> to keep track of the variable argument processing… now how to initialize it so you can start calling <code>va_arg()</code> to get those arguments?</p>
<p><code>va_start()</code> to the rescue!</p>
<p>What you do is pass in your <code>va_list</code>, here shown as parameter <code>ap</code>. Just pass the list, not a pointer to it.</p>
<p>Then for the second argument to <code>va_start()</code>, you give the name of the parameter that you want to start processing arguments <em>after</em>. This must be the parameter right before the <code>...</code> in the argument list.</p>
<p>If you’ve already called <code>va_start()</code> on a particular <code>va_list</code> and you want to call <code>va_start()</code> on it again, you <strong>must</strong> call <code>va_end()</code> first!</p>
<h3 class="unnumbered unlisted" id="return-value-119">Return Value</h3>
<p>Returns nothing!</p>
<h3 class="unnumbered unlisted" id="example-121">Example</h3>
<p>Here’s a demo that adds together an arbitrary number of integers. The first argument is the number of integers to add together. We’ll make use of that to figure out how many times we have to call <code>va_arg()</code>.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb434-1"><a href="stdarg.html#cb434-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb434-2"><a href="stdarg.html#cb434-2"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb434-3"><a href="stdarg.html#cb434-3"></a></span>
<span id="cb434-4"><a href="stdarg.html#cb434-4"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> count<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb434-5"><a href="stdarg.html#cb434-5"></a><span class="op">{</span></span>
<span id="cb434-6"><a href="stdarg.html#cb434-6"></a>    <span class="dt">int</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb434-7"><a href="stdarg.html#cb434-7"></a>    <span class="dt">va_list</span> va<span class="op">;</span></span>
<span id="cb434-8"><a href="stdarg.html#cb434-8"></a></span>
<span id="cb434-9"><a href="stdarg.html#cb434-9"></a>    va_start<span class="op">(</span>va<span class="op">,</span> count<span class="op">);</span>   <span class="co">// Start with arguments after &quot;count&quot;</span></span>
<span id="cb434-10"><a href="stdarg.html#cb434-10"></a></span>
<span id="cb434-11"><a href="stdarg.html#cb434-11"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb434-12"><a href="stdarg.html#cb434-12"></a>        <span class="dt">int</span> n <span class="op">=</span> va_arg<span class="op">(</span>va<span class="op">,</span> <span class="dt">int</span><span class="op">);</span>   <span class="co">// Get the next int</span></span>
<span id="cb434-13"><a href="stdarg.html#cb434-13"></a></span>
<span id="cb434-14"><a href="stdarg.html#cb434-14"></a>        total <span class="op">+=</span> n<span class="op">;</span></span>
<span id="cb434-15"><a href="stdarg.html#cb434-15"></a>    <span class="op">}</span></span>
<span id="cb434-16"><a href="stdarg.html#cb434-16"></a></span>
<span id="cb434-17"><a href="stdarg.html#cb434-17"></a>    va_end<span class="op">(</span>va<span class="op">);</span>  <span class="co">// All done</span></span>
<span id="cb434-18"><a href="stdarg.html#cb434-18"></a></span>
<span id="cb434-19"><a href="stdarg.html#cb434-19"></a>    <span class="cf">return</span> total<span class="op">;</span></span>
<span id="cb434-20"><a href="stdarg.html#cb434-20"></a><span class="op">}</span></span>
<span id="cb434-21"><a href="stdarg.html#cb434-21"></a></span>
<span id="cb434-22"><a href="stdarg.html#cb434-22"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb434-23"><a href="stdarg.html#cb434-23"></a><span class="op">{</span></span>
<span id="cb434-24"><a href="stdarg.html#cb434-24"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span><span class="dv">4</span><span class="op">,</span> <span class="dv">17</span><span class="op">));</span>  <span class="co">// 6 + 2 - 4 + 17 = 21</span></span>
<span id="cb434-25"><a href="stdarg.html#cb434-25"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">44</span><span class="op">));</span>        <span class="co">// 22 + 44 = 66</span></span>
<span id="cb434-26"><a href="stdarg.html#cb434-26"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-114">See Also</h3>
<p><a href="stdarg.html#man-va_arg"><code>va_arg()</code></a>, <a href="stdarg.html#man-va_end"><code>va_end()</code></a></p>
<!--
***
## `example()` `example()` `example()` {#man-example}

### Synopsis {.unnumbered .unlisted}

``` {.c}
```

### Description {.unnumbered .unlisted}

### Return Value {.unnumbered .unlisted}

### Example {.unnumbered .unlisted}

``` {.c .numberLines}
```

### See Also {.unnumbered .unlisted}

[`example()`](#man-example),
-->
<!-- BG_NEW_CHAPTER -->
<!-- Beej's guide to C

# vim: ts=4:sw=4:nosi:et:tw=72
-->
<hr><div style="text-align:center"><span><a href="stdalign.html" rel="prev">Prev</a> | </span><a href="index.html">Contents</a><span> | <a href="stdatomic.html" rel="next">Next</a></span></div></body>
</html>
