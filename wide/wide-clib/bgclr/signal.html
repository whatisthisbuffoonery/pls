<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Beej's Guide to C Programming</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!-- BG custom styling -->
  <style type="text/css">
  /* Fix for line numbers not visible */
  pre.numberSource code > span {
      left: -1em;
  }
  pre.numberSource {
      margin-left: initial;
  }

  /* Put some space after the section numbers */
  span.toc-section-number::after {
      content: "\a0\a0\a0";  /* non-breaking whitespace */
  }

  /* Hide underlines on code number links */
  pre > code.sourceCode > span > a:first-child::before {
      text-decoration: none;
  }

  /* Color the source blocks */
  div.sourceCode {
      background-color: #f0f0f0;
  }

  /* Fix iOS big text rendering issue */
  pre > code.sourceCode > span {
      display: initial;
  }


  /* Color the inline code */
  code:not(.sourceCode) {
      background: #f0f0f0;
      padding-left: 0.2em;
      padding-right: 0.2em;
      border-radius: 0.2em;
  }

  pre.sourceCode {
      border: 1px solid #ccc;
      padding: 0.5em;
      border-radius: 0.2em;
  }

  /* Keep code tags from wrapping in tables */
  tbody code {
      white-space: nowrap;
  }

  /* Prevent hyphenation and hyphen breaks in code*/
  code {
      word-break: keep-all;
  }

  td {
      vertical-align: top;
  }

  body {
      font-size: 12pt;
      max-width: 43em;
      font-family: sans-serif;
  }

  html {
      background: #f9f9f9;
  }

  figure > embed {
      max-width: 100%;
  }

  figure {
      text-align: center;
      margin-top: 2em;
      margin-bottom: 2em;
  }

  figcaption {
      font-size: 0.9em;
      font-style: italic;
      margin-top: 0.6em;
  }

  body {
      counter-reset: figure-counter-major;
      counter-reset: figure-counter-minor;
  }

  figure {
      counter-increment: figure-counter-minor;
  }

  figcaption::before {
      content: "Figure " counter(figure-counter-major) "." counter(figure-counter-minor) ": ";
  }

  blockquote {
      border-left: 2px solid #bbb;
      color: #444;
  }

  /* Contents */

  nav[role="doc-toc"] > ul > li {
    font-weight: bold;
    margin-top: 1.2em;
  }

  nav[role="doc-toc"] > ul > li:first {
    font-weight: bold;
    margin-top: initial;
  }

  nav[role="doc-toc"] > ul > li > ul {
    font-weight: normal;
    margin-top: 0.3em;
  }

  /*
  In multipage, we need to reset the figure counter to the chapter
  number. Luckily, this is in the <h1 data-number> attribute. Unluckily,
  there is no way to get this in a general way.

  This doesn't work:

    h1[data-number] {
      counter-set: figure-counter-major attr(data-number);
    }

  Nor this:

    h1[data-number] {
      --figure-counter-major-value: attr(data-number);
      counter-set: figure-counter-major var(--figure-counter-major-value);
    }

  So, dumbly, we have a bunch of rules for all these sections, up to the
  maximum possible section.

  Here's a program to generate them:

    for (let i = 1; i < 100; i++)
        console.log(`h1[data-number="${i}"]{counter-set:figure-counter-major ${i};counter-reset:figure-counter-minor;}`);

  Note to self: never write a book with more than 99 frickin' chapters.
  */

  h1[data-number="1"]{counter-set:figure-counter-major 1;counter-reset:figure-counter-minor;}
  h1[data-number="2"]{counter-set:figure-counter-major 2;counter-reset:figure-counter-minor;}
  h1[data-number="3"]{counter-set:figure-counter-major 3;counter-reset:figure-counter-minor;}
  h1[data-number="4"]{counter-set:figure-counter-major 4;counter-reset:figure-counter-minor;}
  h1[data-number="5"]{counter-set:figure-counter-major 5;counter-reset:figure-counter-minor;}
  h1[data-number="6"]{counter-set:figure-counter-major 6;counter-reset:figure-counter-minor;}
  h1[data-number="7"]{counter-set:figure-counter-major 7;counter-reset:figure-counter-minor;}
  h1[data-number="8"]{counter-set:figure-counter-major 8;counter-reset:figure-counter-minor;}
  h1[data-number="9"]{counter-set:figure-counter-major 9;counter-reset:figure-counter-minor;}
  h1[data-number="10"]{counter-set:figure-counter-major 10;counter-reset:figure-counter-minor;}
  h1[data-number="11"]{counter-set:figure-counter-major 11;counter-reset:figure-counter-minor;}
  h1[data-number="12"]{counter-set:figure-counter-major 12;counter-reset:figure-counter-minor;}
  h1[data-number="13"]{counter-set:figure-counter-major 13;counter-reset:figure-counter-minor;}
  h1[data-number="14"]{counter-set:figure-counter-major 14;counter-reset:figure-counter-minor;}
  h1[data-number="15"]{counter-set:figure-counter-major 15;counter-reset:figure-counter-minor;}
  h1[data-number="16"]{counter-set:figure-counter-major 16;counter-reset:figure-counter-minor;}
  h1[data-number="17"]{counter-set:figure-counter-major 17;counter-reset:figure-counter-minor;}
  h1[data-number="18"]{counter-set:figure-counter-major 18;counter-reset:figure-counter-minor;}
  h1[data-number="19"]{counter-set:figure-counter-major 19;counter-reset:figure-counter-minor;}
  h1[data-number="20"]{counter-set:figure-counter-major 20;counter-reset:figure-counter-minor;}
  h1[data-number="21"]{counter-set:figure-counter-major 21;counter-reset:figure-counter-minor;}
  h1[data-number="22"]{counter-set:figure-counter-major 22;counter-reset:figure-counter-minor;}
  h1[data-number="23"]{counter-set:figure-counter-major 23;counter-reset:figure-counter-minor;}
  h1[data-number="24"]{counter-set:figure-counter-major 24;counter-reset:figure-counter-minor;}
  h1[data-number="25"]{counter-set:figure-counter-major 25;counter-reset:figure-counter-minor;}
  h1[data-number="26"]{counter-set:figure-counter-major 26;counter-reset:figure-counter-minor;}
  h1[data-number="27"]{counter-set:figure-counter-major 27;counter-reset:figure-counter-minor;}
  h1[data-number="28"]{counter-set:figure-counter-major 28;counter-reset:figure-counter-minor;}
  h1[data-number="29"]{counter-set:figure-counter-major 29;counter-reset:figure-counter-minor;}
  h1[data-number="30"]{counter-set:figure-counter-major 30;counter-reset:figure-counter-minor;}
  h1[data-number="31"]{counter-set:figure-counter-major 31;counter-reset:figure-counter-minor;}
  h1[data-number="32"]{counter-set:figure-counter-major 32;counter-reset:figure-counter-minor;}
  h1[data-number="33"]{counter-set:figure-counter-major 33;counter-reset:figure-counter-minor;}
  h1[data-number="34"]{counter-set:figure-counter-major 34;counter-reset:figure-counter-minor;}
  h1[data-number="35"]{counter-set:figure-counter-major 35;counter-reset:figure-counter-minor;}
  h1[data-number="36"]{counter-set:figure-counter-major 36;counter-reset:figure-counter-minor;}
  h1[data-number="37"]{counter-set:figure-counter-major 37;counter-reset:figure-counter-minor;}
  h1[data-number="38"]{counter-set:figure-counter-major 38;counter-reset:figure-counter-minor;}
  h1[data-number="39"]{counter-set:figure-counter-major 39;counter-reset:figure-counter-minor;}
  h1[data-number="40"]{counter-set:figure-counter-major 40;counter-reset:figure-counter-minor;}
  h1[data-number="41"]{counter-set:figure-counter-major 41;counter-reset:figure-counter-minor;}
  h1[data-number="42"]{counter-set:figure-counter-major 42;counter-reset:figure-counter-minor;}
  h1[data-number="43"]{counter-set:figure-counter-major 43;counter-reset:figure-counter-minor;}
  h1[data-number="44"]{counter-set:figure-counter-major 44;counter-reset:figure-counter-minor;}
  h1[data-number="45"]{counter-set:figure-counter-major 45;counter-reset:figure-counter-minor;}
  h1[data-number="46"]{counter-set:figure-counter-major 46;counter-reset:figure-counter-minor;}
  h1[data-number="47"]{counter-set:figure-counter-major 47;counter-reset:figure-counter-minor;}
  h1[data-number="48"]{counter-set:figure-counter-major 48;counter-reset:figure-counter-minor;}
  h1[data-number="49"]{counter-set:figure-counter-major 49;counter-reset:figure-counter-minor;}
  h1[data-number="50"]{counter-set:figure-counter-major 50;counter-reset:figure-counter-minor;}
  h1[data-number="51"]{counter-set:figure-counter-major 51;counter-reset:figure-counter-minor;}
  h1[data-number="52"]{counter-set:figure-counter-major 52;counter-reset:figure-counter-minor;}
  h1[data-number="53"]{counter-set:figure-counter-major 53;counter-reset:figure-counter-minor;}
  h1[data-number="54"]{counter-set:figure-counter-major 54;counter-reset:figure-counter-minor;}
  h1[data-number="55"]{counter-set:figure-counter-major 55;counter-reset:figure-counter-minor;}
  h1[data-number="56"]{counter-set:figure-counter-major 56;counter-reset:figure-counter-minor;}
  h1[data-number="57"]{counter-set:figure-counter-major 57;counter-reset:figure-counter-minor;}
  h1[data-number="58"]{counter-set:figure-counter-major 58;counter-reset:figure-counter-minor;}
  h1[data-number="59"]{counter-set:figure-counter-major 59;counter-reset:figure-counter-minor;}
  h1[data-number="60"]{counter-set:figure-counter-major 60;counter-reset:figure-counter-minor;}
  h1[data-number="61"]{counter-set:figure-counter-major 61;counter-reset:figure-counter-minor;}
  h1[data-number="62"]{counter-set:figure-counter-major 62;counter-reset:figure-counter-minor;}
  h1[data-number="63"]{counter-set:figure-counter-major 63;counter-reset:figure-counter-minor;}
  h1[data-number="64"]{counter-set:figure-counter-major 64;counter-reset:figure-counter-minor;}
  h1[data-number="65"]{counter-set:figure-counter-major 65;counter-reset:figure-counter-minor;}
  h1[data-number="66"]{counter-set:figure-counter-major 66;counter-reset:figure-counter-minor;}
  h1[data-number="67"]{counter-set:figure-counter-major 67;counter-reset:figure-counter-minor;}
  h1[data-number="68"]{counter-set:figure-counter-major 68;counter-reset:figure-counter-minor;}
  h1[data-number="69"]{counter-set:figure-counter-major 69;counter-reset:figure-counter-minor;}
  h1[data-number="70"]{counter-set:figure-counter-major 70;counter-reset:figure-counter-minor;}
  h1[data-number="71"]{counter-set:figure-counter-major 71;counter-reset:figure-counter-minor;}
  h1[data-number="72"]{counter-set:figure-counter-major 72;counter-reset:figure-counter-minor;}
  h1[data-number="73"]{counter-set:figure-counter-major 73;counter-reset:figure-counter-minor;}
  h1[data-number="74"]{counter-set:figure-counter-major 74;counter-reset:figure-counter-minor;}
  h1[data-number="75"]{counter-set:figure-counter-major 75;counter-reset:figure-counter-minor;}
  h1[data-number="76"]{counter-set:figure-counter-major 76;counter-reset:figure-counter-minor;}
  h1[data-number="77"]{counter-set:figure-counter-major 77;counter-reset:figure-counter-minor;}
  h1[data-number="78"]{counter-set:figure-counter-major 78;counter-reset:figure-counter-minor;}
  h1[data-number="79"]{counter-set:figure-counter-major 79;counter-reset:figure-counter-minor;}
  h1[data-number="80"]{counter-set:figure-counter-major 80;counter-reset:figure-counter-minor;}
  h1[data-number="81"]{counter-set:figure-counter-major 81;counter-reset:figure-counter-minor;}
  h1[data-number="82"]{counter-set:figure-counter-major 82;counter-reset:figure-counter-minor;}
  h1[data-number="83"]{counter-set:figure-counter-major 83;counter-reset:figure-counter-minor;}
  h1[data-number="84"]{counter-set:figure-counter-major 84;counter-reset:figure-counter-minor;}
  h1[data-number="85"]{counter-set:figure-counter-major 85;counter-reset:figure-counter-minor;}
  h1[data-number="86"]{counter-set:figure-counter-major 86;counter-reset:figure-counter-minor;}
  h1[data-number="87"]{counter-set:figure-counter-major 87;counter-reset:figure-counter-minor;}
  h1[data-number="88"]{counter-set:figure-counter-major 88;counter-reset:figure-counter-minor;}
  h1[data-number="89"]{counter-set:figure-counter-major 89;counter-reset:figure-counter-minor;}
  h1[data-number="90"]{counter-set:figure-counter-major 90;counter-reset:figure-counter-minor;}
  h1[data-number="91"]{counter-set:figure-counter-major 91;counter-reset:figure-counter-minor;}
  h1[data-number="92"]{counter-set:figure-counter-major 92;counter-reset:figure-counter-minor;}
  h1[data-number="93"]{counter-set:figure-counter-major 93;counter-reset:figure-counter-minor;}
  h1[data-number="94"]{counter-set:figure-counter-major 94;counter-reset:figure-counter-minor;}
  h1[data-number="95"]{counter-set:figure-counter-major 95;counter-reset:figure-counter-minor;}
  h1[data-number="96"]{counter-set:figure-counter-major 96;counter-reset:figure-counter-minor;}
  h1[data-number="97"]{counter-set:figure-counter-major 97;counter-reset:figure-counter-minor;}
  h1[data-number="98"]{counter-set:figure-counter-major 98;counter-reset:figure-counter-minor;}
  h1[data-number="99"]{counter-set:figure-counter-major 99;counter-reset:figure-counter-minor;}


  </style>
  <!-- BG custom styling for the wide body variant -->
  <!-- Gets appended after bg-css.html -->

  <style type="text/css">
  body {
      max-width: inherit;
  }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>
<div style="text-align:center"><span><a href="setjmp.html" rel="prev">Prev</a> | </span><a href="index.html">Contents</a><span> | <a href="stdalign.html" rel="next">Next</a></span></div><hr>
<h1 data-number="15" id="signal"><span class="header-section-number">15</span> <code>&lt;signal.h&gt;</code> signal handling</h1>
<p></p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="signal.html#man-signal"><code>signal()</code></a></td>
<td>Set a signal handler for a given signal</td>
</tr>
<tr class="even">
<td><a href="signal.html#man-raise"><code>raise()</code></a></td>
<td>Cause a signal to be raised</td>
</tr>
</tbody>
</table>
<p>Handle signals in a portable way, kind of!</p>
<p>These signals get raised for a variety of reasons such as CTRL-C being hit, requests to terminate for external programs, memory access violations, and so on.</p>
<p>Your OS likely defines a plethora of other signals, as well.</p>
<p>This system is pretty limited, as seen below. If you’re on Unix, it’s almost certain your OS has far superior signal handling capabilities than the C standard library. Check out <a href="https://man.archlinux.org/man/sigaction.2.en"><code>sigaction</code></a><a href="wctype.html#fn35" class="footnote-ref" id="fnref35" role="doc-noteref"><sup>35</sup></a>.</p>
<hr />
<h2 data-number="15.1" id="man-signal"><span class="header-section-number">15.1</span> <code>signal()</code></h2>
<p></p>
<p>Set a signal handler for a given signal</p>
<h3 class="unnumbered unlisted" id="synopsis-114">Synopsis</h3>
<div class="sourceCode" id="cb400"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb400-1"><a href="signal.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;signal.h&gt;</span></span>
<span id="cb400-2"><a href="signal.html#cb400-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-3"><a href="signal.html#cb400-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="op">(*</span>signal<span class="op">(</span><span class="dt">int</span> sig<span class="op">,</span> <span class="dt">void</span> <span class="op">(*</span>func<span class="op">)(</span><span class="dt">int</span><span class="op">)))(</span><span class="dt">int</span><span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-114">Description</h3>
<p>How’s <em>that</em> for a function declaration?</p>
<p>Let’s ignore it for a moment and just talk about what this function does.</p>
<p>When a signal is raised, <em>something</em> is going to happen. This function lets you decide to do one of these things when the signal is raised:</p>
<ul>
<li>Ignore the signal</li>
<li>Perform the default action</li>
<li>Have a specific function called</li>
</ul>
<p>The <code>signal()</code> function takes two arguments. The first, <code>sig</code>, is the name of the signal to handle.</p>
<table>
<thead>
<tr class="header">
<th>Signal</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>SIGABRT</code></td>
<td>Raised when <code>abort()</code> is called</td>
</tr>
<tr class="even">
<td><code>SIGFPE</code></td>
<td>Floating-point arithmetic exception</td>
</tr>
<tr class="odd">
<td><code>SIGILL</code></td>
<td>CPU tried to execute an illegal instruction</td>
</tr>
<tr class="even">
<td><code>SIGINT</code></td>
<td>Interrupt signal, as if <code>CTRL-C</code> were pressed</td>
</tr>
<tr class="odd">
<td><code>SIGSEGV</code></td>
<td>Segmention Violation: attempted to access restricted memory</td>
</tr>
<tr class="even">
<td><code>SIGTERM</code></td>
<td>Termination request<a href="wctype.html#fn36" class="footnote-ref" id="fnref36" role="doc-noteref"><sup>36</sup></a></td>
</tr>
</tbody>
</table>
<p>So that’s the first bit when you call <code>signal()</code>—tell it the signal in question:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb401-1"><a href="signal.html#cb401-1" aria-hidden="true" tabindex="-1"></a>signal<span class="op">(</span>SIGINT<span class="op">,</span> <span class="op">...</span></span></code></pre></div>
<p>But what’s that <code>func</code> parameter?</p>
<p>For spoilers, it’s a pointer to a function that takes an <code>int</code> argument and returns <code>void</code>. We can use this to call an arbitrary function when the signal occurs.</p>
<p>Before we do that, though, let’s look at the easy ones: telling the system to ignore the signal or perform the default action (which it does by default if you never call <code>signal()</code>).</p>
<p>You can set <code>func</code> to one of two special values to make this happen:</p>
<table>
<thead>
<tr class="header">
<th><code>func</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>SIG_DFL</code></td>
<td>Perform the default action on this signal</td>
</tr>
<tr class="even">
<td><code>SIG_IGN</code></td>
<td>Ignore this signal</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb402-1"><a href="signal.html#cb402-1" aria-hidden="true" tabindex="-1"></a>signal<span class="op">(</span>SIGTERM<span class="op">,</span> SIG_DFL<span class="op">);</span>  <span class="co">// Default action on SIGTERM</span></span>
<span id="cb402-2"><a href="signal.html#cb402-2" aria-hidden="true" tabindex="-1"></a>signal<span class="op">(</span>SIGINT<span class="op">,</span> SIG_IGN<span class="op">);</span>   <span class="co">// Ignore SIGINT</span></span></code></pre></div>
<p>But what if you want to have your own handler do something instead of the default or ignoring it? You can pass in your own function to be called. That’s what the crazy function signature is partially about. It’s saying that the argument can be a pointer to a function that takes an <code>int</code> argument and returns <code>void</code>.</p>
<p>So if you wanted to call your handler, you could have code like this:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb403-1"><a href="signal.html#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> handler<span class="op">(</span><span class="dt">int</span> sig<span class="op">)</span></span>
<span id="cb403-2"><a href="signal.html#cb403-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb403-3"><a href="signal.html#cb403-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Handle the signal</span></span>
<span id="cb403-4"><a href="signal.html#cb403-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb403-5"><a href="signal.html#cb403-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb403-6"><a href="signal.html#cb403-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb403-7"><a href="signal.html#cb403-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb403-8"><a href="signal.html#cb403-8" aria-hidden="true" tabindex="-1"></a>    signal<span class="op">(</span>SIGINT<span class="op">,</span> handler<span class="op">);</span></span></code></pre></div>
<p>What can you do in the signal handler? Not much.</p>
<p>If the signal is due to <code>abort()</code> or <code>raise()</code>, the handler can’t call <code>raise()</code>.</p>
<p>If the signal is <strong>not</strong> due to <code>abort()</code> or <code>raise()</code>, you’re only allowed to call these functions from the standard library (though the spec doesn’t prohibit calling other non-library functions):</p>
<ul>
<li><a href="stdlib.html#man-abort"><code>abort()</code></a></li>
<li><a href="stdlib.html#man-exit"><code>_Exit()</code></a></li>
<li><a href="stdlib.html#man-exit"><code>quick_exit()</code></a></li>
<li>Functions in <a href="stdatomic.html#stdatomic"><code>&lt;stdatomic.h&gt;</code></a> when the atomic arguments are lock-free</li>
<li><code>signal()</code> with a first argument equivalent to the argument that was passed into the handler</li>
</ul>
<p>In addition, if the signal was <strong>not</strong> due to <code>abort()</code> or <code>raise()</code>, the handler can’t access any object with static or thread-storage duration unless it’s lock-free.</p>
<p>An exception is that you can assign to (but not read from!) a variable of type <code>volatile sig_atomic_t</code>.</p>
<p>It’s up to the implementation, but the signal handler might be reset to <code>SIG_DFL</code> just before the handler is called.</p>
<p>It’s undefined behavior to call <code>signal()</code> in a multithreaded program.</p>
<p>It’s undefined behavior to return from the handler for <code>SIGFPE</code>, <code>SIGILL</code>, <code>SIGSEGV</code>, or any implementation-defined value. You must exit.</p>
<p>The implementation might or might not prevent other signals from arising while in the signal handler.</p>
<h3 class="unnumbered unlisted" id="return-value-113">Return Value</h3>
<p>On success, <code>signal()</code> returns a pointer to the previous signal handler set by a call to <code>signal()</code> for that particular signal number. If you haven’t called it set, returns <code>SIG_DFL</code>.</p>
<p>On failure, <code>SIG_ERR</code> is returned and <code>errno</code> is set to a positive value.</p>
<h3 class="unnumbered unlisted" id="example-114">Example</h3>
<p>Here’s a program that causes <code>SIGINT</code> to be ignored. Commonly you trigger this signal by hitting <code>CTRL-C</code>.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb404-1"><a href="signal.html#cb404-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb404-2"><a href="signal.html#cb404-2"></a><span class="pp">#include </span><span class="im">&lt;signal.h&gt;</span></span>
<span id="cb404-3"><a href="signal.html#cb404-3"></a></span>
<span id="cb404-4"><a href="signal.html#cb404-4"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb404-5"><a href="signal.html#cb404-5"></a><span class="op">{</span></span>
<span id="cb404-6"><a href="signal.html#cb404-6"></a>    signal<span class="op">(</span>SIGINT<span class="op">,</span> SIG_IGN<span class="op">);</span></span>
<span id="cb404-7"><a href="signal.html#cb404-7"></a></span>
<span id="cb404-8"><a href="signal.html#cb404-8"></a>    printf<span class="op">(</span><span class="st">&quot;You can&#39;t hit CTRL-C to exit this program. Try it!</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb404-9"><a href="signal.html#cb404-9"></a>    printf<span class="op">(</span><span class="st">&quot;Press return to exit, instead.&quot;</span><span class="op">);</span></span>
<span id="cb404-10"><a href="signal.html#cb404-10"></a>    fflush<span class="op">(</span>stdout<span class="op">);</span></span>
<span id="cb404-11"><a href="signal.html#cb404-11"></a>    getchar<span class="op">();</span></span>
<span id="cb404-12"><a href="signal.html#cb404-12"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb405-1"><a href="signal.html#cb405-1" aria-hidden="true" tabindex="-1"></a>You can&#39;t hit CTRL-C to exit this program. Try it!</span>
<span id="cb405-2"><a href="signal.html#cb405-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb405-3"><a href="signal.html#cb405-3" aria-hidden="true" tabindex="-1"></a>Press return to exit, instead.^C^C^C^C^C^C^C^C^C^C^C</span></code></pre></div>
<p>This program sets the signal handler, then raises the signal. The signal handler fires.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb406-1"><a href="signal.html#cb406-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb406-2"><a href="signal.html#cb406-2"></a><span class="pp">#include </span><span class="im">&lt;signal.h&gt;</span></span>
<span id="cb406-3"><a href="signal.html#cb406-3"></a></span>
<span id="cb406-4"><a href="signal.html#cb406-4"></a><span class="dt">void</span> handler<span class="op">(</span><span class="dt">int</span> sig<span class="op">)</span></span>
<span id="cb406-5"><a href="signal.html#cb406-5"></a><span class="op">{</span></span>
<span id="cb406-6"><a href="signal.html#cb406-6"></a>    <span class="co">// Undefined behavior to call printf() if this handler was not</span></span>
<span id="cb406-7"><a href="signal.html#cb406-7"></a>    <span class="co">// as the result of a raise(), i.e. if you hit CTRL-C.</span></span>
<span id="cb406-8"><a href="signal.html#cb406-8"></a></span>
<span id="cb406-9"><a href="signal.html#cb406-9"></a>    printf<span class="op">(</span><span class="st">&quot;Got signal </span><span class="sc">%d</span><span class="st">!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> sig<span class="op">);</span></span>
<span id="cb406-10"><a href="signal.html#cb406-10"></a></span>
<span id="cb406-11"><a href="signal.html#cb406-11"></a>    <span class="co">// Common to reset the handler just in case the implementation set</span></span>
<span id="cb406-12"><a href="signal.html#cb406-12"></a>    <span class="co">// it to SIG_DFL when the signal occurred.</span></span>
<span id="cb406-13"><a href="signal.html#cb406-13"></a></span>
<span id="cb406-14"><a href="signal.html#cb406-14"></a>    signal<span class="op">(</span>sig<span class="op">,</span> handler<span class="op">);</span></span>
<span id="cb406-15"><a href="signal.html#cb406-15"></a><span class="op">}</span></span>
<span id="cb406-16"><a href="signal.html#cb406-16"></a></span>
<span id="cb406-17"><a href="signal.html#cb406-17"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb406-18"><a href="signal.html#cb406-18"></a><span class="op">{</span></span>
<span id="cb406-19"><a href="signal.html#cb406-19"></a>    signal<span class="op">(</span>SIGINT<span class="op">,</span> handler<span class="op">);</span></span>
<span id="cb406-20"><a href="signal.html#cb406-20"></a></span>
<span id="cb406-21"><a href="signal.html#cb406-21"></a>    raise<span class="op">(</span>SIGINT<span class="op">);</span></span>
<span id="cb406-22"><a href="signal.html#cb406-22"></a>    raise<span class="op">(</span>SIGINT<span class="op">);</span></span>
<span id="cb406-23"><a href="signal.html#cb406-23"></a>    raise<span class="op">(</span>SIGINT<span class="op">);</span></span>
<span id="cb406-24"><a href="signal.html#cb406-24"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb407-1"><a href="signal.html#cb407-1" aria-hidden="true" tabindex="-1"></a>Got signal 2!</span>
<span id="cb407-2"><a href="signal.html#cb407-2" aria-hidden="true" tabindex="-1"></a>Got signal 2!</span>
<span id="cb407-3"><a href="signal.html#cb407-3" aria-hidden="true" tabindex="-1"></a>Got signal 2!</span></code></pre></div>
<p>This example catches <code>SIGINT</code> but then sets a flag to <code>1</code>. Then the main loop sees the flag and exits.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb408-1"><a href="signal.html#cb408-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb408-2"><a href="signal.html#cb408-2"></a><span class="pp">#include </span><span class="im">&lt;signal.h&gt;</span></span>
<span id="cb408-3"><a href="signal.html#cb408-3"></a></span>
<span id="cb408-4"><a href="signal.html#cb408-4"></a><span class="dt">volatile</span> <span class="dt">sig_atomic_t</span> x<span class="op">;</span></span>
<span id="cb408-5"><a href="signal.html#cb408-5"></a></span>
<span id="cb408-6"><a href="signal.html#cb408-6"></a><span class="dt">void</span> handler<span class="op">(</span><span class="dt">int</span> sig<span class="op">)</span></span>
<span id="cb408-7"><a href="signal.html#cb408-7"></a><span class="op">{</span></span>
<span id="cb408-8"><a href="signal.html#cb408-8"></a>    x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb408-9"><a href="signal.html#cb408-9"></a><span class="op">}</span></span>
<span id="cb408-10"><a href="signal.html#cb408-10"></a></span>
<span id="cb408-11"><a href="signal.html#cb408-11"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb408-12"><a href="signal.html#cb408-12"></a><span class="op">{</span></span>
<span id="cb408-13"><a href="signal.html#cb408-13"></a>    signal<span class="op">(</span>SIGINT<span class="op">,</span> handler<span class="op">);</span></span>
<span id="cb408-14"><a href="signal.html#cb408-14"></a></span>
<span id="cb408-15"><a href="signal.html#cb408-15"></a>    printf<span class="op">(</span><span class="st">&quot;Hit CTRL-C to exit</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb408-16"><a href="signal.html#cb408-16"></a>    <span class="cf">while</span> <span class="op">(</span>x <span class="op">!=</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb408-17"><a href="signal.html#cb408-17"></a><span class="op">}</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-107">See Also</h3>
<p><a href="signal.html#man-raise"><code>raise()</code></a>, <a href="stdlib.html#man-abort"><code>abort()</code></a></p>
<hr />
<h2 data-number="15.2" id="man-raise"><span class="header-section-number">15.2</span> <code>raise()</code></h2>
<p></p>
<p>Cause a signal to be raised</p>
<h3 class="unnumbered unlisted" id="synopsis-115">Synopsis</h3>
<div class="sourceCode" id="cb409"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb409-1"><a href="signal.html#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;signal.h&gt;</span></span>
<span id="cb409-2"><a href="signal.html#cb409-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb409-3"><a href="signal.html#cb409-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> raise<span class="op">(</span><span class="dt">int</span> sig<span class="op">);</span></span></code></pre></div>
<h3 class="unnumbered unlisted" id="description-115">Description</h3>
<p>Causes the signal handler for the signal <code>sig</code> to be called. If the handler is <code>SIG_DFL</code> or <code>SIG_IGN</code>, then the default action or no action happens.</p>
<p><code>raise()</code> returns after the signal handler has finished running.</p>
<p>Interestingly, if you cause a signal to happen with <code>raise()</code>, you can call library functions from within the signal handler without causing undefined behavior. I’m not sure how this fact is practically useful, though.</p>
<h3 class="unnumbered unlisted" id="return-value-114">Return Value</h3>
<p>Returns <code>0</code> on success. Nonzero otherwise.</p>
<h3 class="unnumbered unlisted" id="example-115">Example</h3>
<p>This program sets the signal handler, then raises the signal. The signal handler fires.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb410-1"><a href="signal.html#cb410-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb410-2"><a href="signal.html#cb410-2"></a><span class="pp">#include </span><span class="im">&lt;signal.h&gt;</span></span>
<span id="cb410-3"><a href="signal.html#cb410-3"></a></span>
<span id="cb410-4"><a href="signal.html#cb410-4"></a><span class="dt">void</span> handler<span class="op">(</span><span class="dt">int</span> sig<span class="op">)</span></span>
<span id="cb410-5"><a href="signal.html#cb410-5"></a><span class="op">{</span></span>
<span id="cb410-6"><a href="signal.html#cb410-6"></a>    <span class="co">// Undefined behavior to call printf() if this handler was not</span></span>
<span id="cb410-7"><a href="signal.html#cb410-7"></a>    <span class="co">// as the result of a raise(), i.e. if you hit CTRL-C.</span></span>
<span id="cb410-8"><a href="signal.html#cb410-8"></a></span>
<span id="cb410-9"><a href="signal.html#cb410-9"></a>    printf<span class="op">(</span><span class="st">&quot;Got signal </span><span class="sc">%d</span><span class="st">!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> sig<span class="op">);</span></span>
<span id="cb410-10"><a href="signal.html#cb410-10"></a></span>
<span id="cb410-11"><a href="signal.html#cb410-11"></a>    <span class="co">// Common to reset the handler just in case the implementation set</span></span>
<span id="cb410-12"><a href="signal.html#cb410-12"></a>    <span class="co">// it to SIG_DFL when the signal occurred.</span></span>
<span id="cb410-13"><a href="signal.html#cb410-13"></a></span>
<span id="cb410-14"><a href="signal.html#cb410-14"></a>    signal<span class="op">(</span>sig<span class="op">,</span> handler<span class="op">);</span></span>
<span id="cb410-15"><a href="signal.html#cb410-15"></a><span class="op">}</span></span>
<span id="cb410-16"><a href="signal.html#cb410-16"></a></span>
<span id="cb410-17"><a href="signal.html#cb410-17"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb410-18"><a href="signal.html#cb410-18"></a><span class="op">{</span></span>
<span id="cb410-19"><a href="signal.html#cb410-19"></a>    signal<span class="op">(</span>SIGINT<span class="op">,</span> handler<span class="op">);</span></span>
<span id="cb410-20"><a href="signal.html#cb410-20"></a></span>
<span id="cb410-21"><a href="signal.html#cb410-21"></a>    raise<span class="op">(</span>SIGINT<span class="op">);</span></span>
<span id="cb410-22"><a href="signal.html#cb410-22"></a>    raise<span class="op">(</span>SIGINT<span class="op">);</span></span>
<span id="cb410-23"><a href="signal.html#cb410-23"></a>    raise<span class="op">(</span>SIGINT<span class="op">);</span></span>
<span id="cb410-24"><a href="signal.html#cb410-24"></a><span class="op">}</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb411-1"><a href="signal.html#cb411-1" aria-hidden="true" tabindex="-1"></a>Got signal 2!</span>
<span id="cb411-2"><a href="signal.html#cb411-2" aria-hidden="true" tabindex="-1"></a>Got signal 2!</span>
<span id="cb411-3"><a href="signal.html#cb411-3" aria-hidden="true" tabindex="-1"></a>Got signal 2!</span></code></pre></div>
<h3 class="unnumbered unlisted" id="see-also-108">See Also</h3>
<p><a href="signal.html#man-signal"><code>signal()</code></a></p>
<!--
***
## `example()` {#man-example}

### Synopsis {.unnumbered .unlisted}

``` {.c}
```

### Description {.unnumbered .unlisted}

### Return Value {.unnumbered .unlisted}

### Example {.unnumbered .unlisted}

``` {.c .numberLines}
```

### See Also {.unnumbered .unlisted}

[`example()`](#man-example),
-->
<!-- BG_NEW_CHAPTER -->
<!-- Beej's guide to C

# vim: ts=4:sw=4:nosi:et:tw=72
-->
<hr><div style="text-align:center"><span><a href="setjmp.html" rel="prev">Prev</a> | </span><a href="index.html">Contents</a><span> | <a href="stdalign.html" rel="next">Next</a></span></div></body>
</html>
